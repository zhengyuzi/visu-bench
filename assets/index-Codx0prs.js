var pc=Object.defineProperty;var mc=(e,t,i)=>t in e?pc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var K=(e,t,i)=>mc(e,typeof t!="symbol"?t+"":t,i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function go(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const At={},Gi=[],Ae=()=>{},_c=()=>!1,us=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),po=e=>e.startsWith("onUpdate:"),Wt=Object.assign,mo=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},yc=Object.prototype.hasOwnProperty,bt=(e,t)=>yc.call(e,t),at=Array.isArray,Ii=e=>ds(e)==="[object Map]",_l=e=>ds(e)==="[object Set]",lt=e=>typeof e=="function",Bt=e=>typeof e=="string",Ve=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",yl=e=>(Rt(e)||lt(e))&&lt(e.then)&&lt(e.catch),vl=Object.prototype.toString,ds=e=>vl.call(e),vc=e=>ds(e).slice(8,-1),bl=e=>ds(e)==="[object Object]",_o=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gn=go(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fs=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},bc=/-(\w)/g,ei=fs(e=>e.replace(bc,(t,i)=>i?i.toUpperCase():"")),Sc=/\B([A-Z])/g,ri=fs(e=>e.replace(Sc,"-$1").toLowerCase()),Sl=fs(e=>e.charAt(0).toUpperCase()+e.slice(1)),pr=fs(e=>e?`on${Sl(e)}`:""),ti=(e,t)=>!Object.is(e,t),mr=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},wl=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},wc=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let na;const gs=()=>na||(na=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function yo(e){if(at(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=Bt(n)?Ec(n):yo(n);if(s)for(const r in s)t[r]=s[r]}return t}else if(Bt(e)||Rt(e))return e}const Cc=/;(?![^(]*\))/g,xc=/:([^]+)/,Pc=/\/\*[^]*?\*\//g;function Ec(e){const t={};return e.replace(Pc,"").split(Cc).forEach(i=>{if(i){const n=i.split(xc);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function vo(e){let t="";if(Bt(e))t=e;else if(at(e))for(let i=0;i<e.length;i++){const n=vo(e[i]);n&&(t+=n+" ")}else if(Rt(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Tc="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ac=go(Tc);function Cl(e){return!!e||e===""}const xl=e=>!!(e&&e.__v_isRef===!0),Mc=e=>Bt(e)?e:e==null?"":at(e)||Rt(e)&&(e.toString===vl||!lt(e.toString))?xl(e)?Mc(e.value):JSON.stringify(e,Pl,2):String(e),Pl=(e,t)=>xl(t)?Pl(e,t.value):Ii(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s],r)=>(i[_r(n,r)+" =>"]=s,i),{})}:_l(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>_r(i))}:Ve(t)?_r(t):Rt(t)&&!at(t)&&!bl(t)?String(t):t,_r=(e,t="")=>{var i;return Ve(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ie;class El{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ie,!t&&ie&&(this.index=(ie.scopes||(ie.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=ie;try{return ie=this,t()}finally{ie=i}}}on(){ie=this}off(){ie=this.parent}stop(t){if(this._active){let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.scopes)for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function g5(e){return new El(e)}function Tl(){return ie}function Rc(e,t=!1){ie&&ie.cleanups.push(e)}let Tt;const yr=new WeakSet;class Al{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ie&&ie.active&&ie.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yr.has(this)&&(yr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Rl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,sa(this),Ol(this);const t=Tt,i=ve;Tt=this,ve=!0;try{return this.fn()}finally{Nl(this),Tt=t,ve=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)wo(t);this.deps=this.depsTail=void 0,sa(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Vr(this)&&this.run()}get dirty(){return Vr(this)}}let Ml=0,pn,mn;function Rl(e,t=!1){if(e.flags|=8,t){e.next=mn,mn=e;return}e.next=pn,pn=e}function bo(){Ml++}function So(){if(--Ml>0)return;if(mn){let t=mn;for(mn=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;pn;){let t=pn;for(pn=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function Ol(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Nl(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),wo(n),Oc(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function Vr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===bn))return;e.globalVersion=bn;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Vr(e)){e.flags&=-3;return}const i=Tt,n=ve;Tt=e,ve=!0;try{Ol(e);const s=e.fn(e._value);(t.version===0||ti(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Tt=i,ve=n,Nl(e),e.flags&=-3}}function wo(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let r=i.computed.deps;r;r=r.nextDep)wo(r,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function Oc(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let ve=!0;const kl=[];function oi(){kl.push(ve),ve=!1}function ai(){const e=kl.pop();ve=e===void 0?!0:e}function sa(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=Tt;Tt=void 0;try{t()}finally{Tt=i}}}let bn=0;class Nc{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Co{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Tt||!ve||Tt===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==Tt)i=this.activeLink=new Nc(Tt,this),Tt.deps?(i.prevDep=Tt.depsTail,Tt.depsTail.nextDep=i,Tt.depsTail=i):Tt.deps=Tt.depsTail=i,Ll(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=Tt.depsTail,i.nextDep=void 0,Tt.depsTail.nextDep=i,Tt.depsTail=i,Tt.deps===i&&(Tt.deps=n)}return i}trigger(t){this.version++,bn++,this.notify(t)}notify(t){bo();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{So()}}}function Ll(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Ll(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Jn=new WeakMap,vi=Symbol(""),$r=Symbol(""),Sn=Symbol("");function qt(e,t,i){if(ve&&Tt){let n=Jn.get(e);n||Jn.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new Co),s.map=n,s.key=i),s.track()}}function Ge(e,t,i,n,s,r){const o=Jn.get(e);if(!o){bn++;return}const a=l=>{l&&l.trigger()};if(bo(),t==="clear")o.forEach(a);else{const l=at(e),h=l&&_o(i);if(l&&i==="length"){const c=Number(n);o.forEach((u,d)=>{(d==="length"||d===Sn||!Ve(d)&&d>=c)&&a(u)})}else switch((i!==void 0||o.has(void 0))&&a(o.get(i)),h&&a(o.get(Sn)),t){case"add":l?h&&a(o.get("length")):(a(o.get(vi)),Ii(e)&&a(o.get($r)));break;case"delete":l||(a(o.get(vi)),Ii(e)&&a(o.get($r)));break;case"set":Ii(e)&&a(o.get(vi));break}}So()}function Fc(e,t){const i=Jn.get(e);return i&&i.get(t)}function Oi(e){const t=_t(e);return t===e?t:(qt(t,"iterate",Sn),pe(e)?t:t.map(Zt))}function ps(e){return qt(e=_t(e),"iterate",Sn),e}const kc={__proto__:null,[Symbol.iterator](){return vr(this,Symbol.iterator,Zt)},concat(...e){return Oi(this).concat(...e.map(t=>at(t)?Oi(t):t))},entries(){return vr(this,"entries",e=>(e[1]=Zt(e[1]),e))},every(e,t){return Fe(this,"every",e,t,void 0,arguments)},filter(e,t){return Fe(this,"filter",e,t,i=>i.map(Zt),arguments)},find(e,t){return Fe(this,"find",e,t,Zt,arguments)},findIndex(e,t){return Fe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Fe(this,"findLast",e,t,Zt,arguments)},findLastIndex(e,t){return Fe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Fe(this,"forEach",e,t,void 0,arguments)},includes(...e){return br(this,"includes",e)},indexOf(...e){return br(this,"indexOf",e)},join(e){return Oi(this).join(e)},lastIndexOf(...e){return br(this,"lastIndexOf",e)},map(e,t){return Fe(this,"map",e,t,void 0,arguments)},pop(){return on(this,"pop")},push(...e){return on(this,"push",e)},reduce(e,...t){return ra(this,"reduce",e,t)},reduceRight(e,...t){return ra(this,"reduceRight",e,t)},shift(){return on(this,"shift")},some(e,t){return Fe(this,"some",e,t,void 0,arguments)},splice(...e){return on(this,"splice",e)},toReversed(){return Oi(this).toReversed()},toSorted(e){return Oi(this).toSorted(e)},toSpliced(...e){return Oi(this).toSpliced(...e)},unshift(...e){return on(this,"unshift",e)},values(){return vr(this,"values",Zt)}};function vr(e,t,i){const n=ps(e),s=n[t]();return n!==e&&!pe(e)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=i(r.value)),r}),s}const Lc=Array.prototype;function Fe(e,t,i,n,s,r){const o=ps(e),a=o!==e&&!pe(e),l=o[t];if(l!==Lc[t]){const u=l.apply(e,r);return a?Zt(u):u}let h=i;o!==e&&(a?h=function(u,d){return i.call(this,Zt(u),d,e)}:i.length>2&&(h=function(u,d){return i.call(this,u,d,e)}));const c=l.call(o,h,n);return a&&s?s(c):c}function ra(e,t,i,n){const s=ps(e);let r=i;return s!==e&&(pe(e)?i.length>3&&(r=function(o,a,l){return i.call(this,o,a,l,e)}):r=function(o,a,l){return i.call(this,o,Zt(a),l,e)}),s[t](r,...n)}function br(e,t,i){const n=_t(e);qt(n,"iterate",Sn);const s=n[t](...i);return(s===-1||s===!1)&&To(i[0])?(i[0]=_t(i[0]),n[t](...i)):s}function on(e,t,i=[]){oi(),bo();const n=_t(e)[t].apply(e,i);return So(),ai(),n}const Dc=go("__proto__,__v_isRef,__isVue"),Dl=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ve));function Gc(e){Ve(e)||(e=String(e));const t=_t(this);return qt(t,"has",e),t.hasOwnProperty(e)}class Gl{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){const s=this._isReadonly,r=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return r;if(i==="__v_raw")return n===(s?r?Kc:Vl:r?Bl:Ul).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=at(t);if(!s){let l;if(o&&(l=kc[i]))return l;if(i==="hasOwnProperty")return Gc}const a=Reflect.get(t,i,Yt(t)?t:n);return(Ve(i)?Dl.has(i):Dc(i))||(s||qt(t,"get",i),r)?a:Yt(a)?o&&_o(i)?a:a.value:Rt(a)?s?$l(a):Po(a):a}}class Il extends Gl{constructor(t=!1){super(!1,t)}set(t,i,n,s){let r=t[i];if(!this._isShallow){const l=Si(r);if(!pe(n)&&!Si(n)&&(r=_t(r),n=_t(n)),!at(t)&&Yt(r)&&!Yt(n))return l?!1:(r.value=n,!0)}const o=at(t)&&_o(i)?Number(i)<t.length:bt(t,i),a=Reflect.set(t,i,n,Yt(t)?t:s);return t===_t(s)&&(o?ti(n,r)&&Ge(t,"set",i,n):Ge(t,"add",i,n)),a}deleteProperty(t,i){const n=bt(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&Ge(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Ve(i)||!Dl.has(i))&&qt(t,"has",i),n}ownKeys(t){return qt(t,"iterate",at(t)?"length":vi),Reflect.ownKeys(t)}}class Ic extends Gl{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Uc=new Il,Bc=new Ic,Vc=new Il(!0);const Hr=e=>e,Dn=e=>Reflect.getPrototypeOf(e);function $c(e,t,i){return function(...n){const s=this.__v_raw,r=_t(s),o=Ii(r),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,h=s[e](...n),c=i?Hr:t?zr:Zt;return!t&&qt(r,"iterate",l?$r:vi),{next(){const{value:u,done:d}=h.next();return d?{value:u,done:d}:{value:a?[c(u[0]),c(u[1])]:c(u),done:d}},[Symbol.iterator](){return this}}}}function Gn(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Hc(e,t){const i={get(s){const r=this.__v_raw,o=_t(r),a=_t(s);e||(ti(s,a)&&qt(o,"get",s),qt(o,"get",a));const{has:l}=Dn(o),h=t?Hr:e?zr:Zt;if(l.call(o,s))return h(r.get(s));if(l.call(o,a))return h(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!e&&qt(_t(s),"iterate",vi),Reflect.get(s,"size",s)},has(s){const r=this.__v_raw,o=_t(r),a=_t(s);return e||(ti(s,a)&&qt(o,"has",s),qt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=_t(a),h=t?Hr:e?zr:Zt;return!e&&qt(l,"iterate",vi),a.forEach((c,u)=>s.call(r,h(c),h(u),o))}};return Wt(i,e?{add:Gn("add"),set:Gn("set"),delete:Gn("delete"),clear:Gn("clear")}:{add(s){!t&&!pe(s)&&!Si(s)&&(s=_t(s));const r=_t(this);return Dn(r).has.call(r,s)||(r.add(s),Ge(r,"add",s,s)),this},set(s,r){!t&&!pe(r)&&!Si(r)&&(r=_t(r));const o=_t(this),{has:a,get:l}=Dn(o);let h=a.call(o,s);h||(s=_t(s),h=a.call(o,s));const c=l.call(o,s);return o.set(s,r),h?ti(r,c)&&Ge(o,"set",s,r):Ge(o,"add",s,r),this},delete(s){const r=_t(this),{has:o,get:a}=Dn(r);let l=o.call(r,s);l||(s=_t(s),l=o.call(r,s)),a&&a.call(r,s);const h=r.delete(s);return l&&Ge(r,"delete",s,void 0),h},clear(){const s=_t(this),r=s.size!==0,o=s.clear();return r&&Ge(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=$c(s,e,t)}),i}function xo(e,t){const i=Hc(e,t);return(n,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(bt(i,s)&&s in n?i:n,s,r)}const zc={get:xo(!1,!1)},Wc={get:xo(!1,!0)},jc={get:xo(!0,!1)};const Ul=new WeakMap,Bl=new WeakMap,Vl=new WeakMap,Kc=new WeakMap;function Yc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xc(e){return e.__v_skip||!Object.isExtensible(e)?0:Yc(vc(e))}function Po(e){return Si(e)?e:Eo(e,!1,Uc,zc,Ul)}function qc(e){return Eo(e,!1,Vc,Wc,Bl)}function $l(e){return Eo(e,!0,Bc,jc,Vl)}function Eo(e,t,i,n,s){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const o=Xc(e);if(o===0)return e;const a=new Proxy(e,o===2?n:i);return s.set(e,a),a}function Ui(e){return Si(e)?Ui(e.__v_raw):!!(e&&e.__v_isReactive)}function Si(e){return!!(e&&e.__v_isReadonly)}function pe(e){return!!(e&&e.__v_isShallow)}function To(e){return e?!!e.__v_raw:!1}function _t(e){const t=e&&e.__v_raw;return t?_t(t):e}function Zc(e){return!bt(e,"__v_skip")&&Object.isExtensible(e)&&wl(e,"__v_skip",!0),e}const Zt=e=>Rt(e)?Po(e):e,zr=e=>Rt(e)?$l(e):e;function Yt(e){return e?e.__v_isRef===!0:!1}function zn(e){return Jc(e,!1)}function Jc(e,t){return Yt(e)?e:new Qc(e,t)}class Qc{constructor(t,i){this.dep=new Co,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:_t(t),this._value=i?t:Zt(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||pe(t)||Si(t);t=n?t:_t(t),ti(t,i)&&(this._rawValue=t,this._value=n?t:Zt(t),this.dep.trigger())}}function Bi(e){return Yt(e)?e.value:e}const t0={get:(e,t,i)=>t==="__v_raw"?e:Bi(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return Yt(s)&&!Yt(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function Hl(e){return Ui(e)?e:new Proxy(e,t0)}function p5(e){const t=at(e)?new Array(e.length):{};for(const i in e)t[i]=i0(e,i);return t}class e0{constructor(t,i,n){this._object=t,this._key=i,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Fc(_t(this._object),this._key)}}function i0(e,t,i){const n=e[t];return Yt(n)?n:new e0(e,t,i)}class n0{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Co(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=bn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Tt!==this)return Rl(this,!0),!0}get value(){const t=this.dep.track();return Fl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function s0(e,t,i=!1){let n,s;return lt(e)?n=e:(n=e.get,s=e.set),new n0(n,s,i)}const In={},Qn=new WeakMap;let yi;function r0(e,t=!1,i=yi){if(i){let n=Qn.get(i);n||Qn.set(i,n=[]),n.push(e)}}function o0(e,t,i=At){const{immediate:n,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=i,h=_=>s?_:pe(_)||s===!1||s===0?Je(_,1):Je(_);let c,u,d,f,p=!1,m=!1;if(Yt(e)?(u=()=>e.value,p=pe(e)):Ui(e)?(u=()=>h(e),p=!0):at(e)?(m=!0,p=e.some(_=>Ui(_)||pe(_)),u=()=>e.map(_=>{if(Yt(_))return _.value;if(Ui(_))return h(_);if(lt(_))return l?l(_,2):_()})):lt(e)?t?u=l?()=>l(e,2):e:u=()=>{if(d){oi();try{d()}finally{ai()}}const _=yi;yi=c;try{return l?l(e,3,[f]):e(f)}finally{yi=_}}:u=Ae,t&&s){const _=u,v=s===!0?1/0:s;u=()=>Je(_(),v)}const b=Tl(),y=()=>{c.stop(),b&&mo(b.effects,c)};if(r&&t){const _=t;t=(...v)=>{_(...v),y()}}let P=m?new Array(e.length).fill(In):In;const g=_=>{if(!(!(c.flags&1)||!c.dirty&&!_))if(t){const v=c.run();if(s||p||(m?v.some((A,N)=>ti(A,P[N])):ti(v,P))){d&&d();const A=yi;yi=c;try{const N=[v,P===In?void 0:m&&P[0]===In?[]:P,f];l?l(t,3,N):t(...N),P=v}finally{yi=A}}}else c.run()};return a&&a(g),c=new Al(u),c.scheduler=o?()=>o(g,!1):g,f=_=>r0(_,!1,c),d=c.onStop=()=>{const _=Qn.get(c);if(_){if(l)l(_,4);else for(const v of _)v();Qn.delete(c)}},t?n?g(!0):P=c.run():o?o(g.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function Je(e,t=1/0,i){if(t<=0||!Rt(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,Yt(e))Je(e.value,t,i);else if(at(e))for(let n=0;n<e.length;n++)Je(e[n],t,i);else if(_l(e)||Ii(e))e.forEach(n=>{Je(n,t,i)});else if(bl(e)){for(const n in e)Je(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Je(e[n],t,i)}return e}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function An(e,t,i,n){try{return n?e(...n):e()}catch(s){Mn(s,t,i)}}function Me(e,t,i,n){if(lt(e)){const s=An(e,t,i,n);return s&&yl(s)&&s.catch(r=>{Mn(r,t,i)}),s}if(at(e)){const s=[];for(let r=0;r<e.length;r++)s.push(Me(e[r],t,i,n));return s}}function Mn(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||At;if(t){let a=t.parent;const l=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${i}`;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](e,l,h)===!1)return}a=a.parent}if(r){oi(),An(r,null,10,[e,l,h]),ai();return}}a0(e,i,s,n,o)}function a0(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const ne=[];let Pe=-1;const Vi=[];let Xe=null,Li=0;const zl=Promise.resolve();let ts=null;function l0(e){const t=ts||zl;return e?t.then(this?e.bind(this):e):t}function h0(e){let t=Pe+1,i=ne.length;for(;t<i;){const n=t+i>>>1,s=ne[n],r=wn(s);r<e||r===e&&s.flags&2?t=n+1:i=n}return t}function Ao(e){if(!(e.flags&1)){const t=wn(e),i=ne[ne.length-1];!i||!(e.flags&2)&&t>=wn(i)?ne.push(e):ne.splice(h0(t),0,e),e.flags|=1,Wl()}}function Wl(){ts||(ts=zl.then(Kl))}function c0(e){at(e)?Vi.push(...e):Xe&&e.id===-1?Xe.splice(Li+1,0,e):e.flags&1||(Vi.push(e),e.flags|=1),Wl()}function oa(e,t,i=Pe+1){for(;i<ne.length;i++){const n=ne[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;ne.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function jl(e){if(Vi.length){const t=[...new Set(Vi)].sort((i,n)=>wn(i)-wn(n));if(Vi.length=0,Xe){Xe.push(...t);return}for(Xe=t,Li=0;Li<Xe.length;Li++){const i=Xe[Li];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}Xe=null,Li=0}}const wn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Kl(e){try{for(Pe=0;Pe<ne.length;Pe++){const t=ne[Pe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),An(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Pe<ne.length;Pe++){const t=ne[Pe];t&&(t.flags&=-2)}Pe=-1,ne.length=0,jl(),ts=null,(ne.length||Vi.length)&&Kl()}}let se=null,Yl=null;function es(e){const t=se;return se=e,Yl=e&&e.type.__scopeId||null,t}function dn(e,t=se,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&pa(-1);const r=es(t);let o;try{o=e(...s)}finally{es(r),n._d&&pa(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function pi(e,t,i,n){const s=e.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(oi(),Me(l,i,8,[e.el,a,e,t]),ai())}}const u0=Symbol("_vte"),d0=e=>e.__isTeleport;function Mo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Mo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function ms(e,t){return lt(e)?Wt({name:e.name},t,{setup:e}):e}function m5(){const e=mh();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function Ro(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Wr(e,t,i,n,s=!1){if(at(e)){e.forEach((p,m)=>Wr(p,t&&(at(t)?t[m]:t),i,n,s));return}if($i(n)&&!s)return;const r=n.shapeFlag&4?Io(n.component):n.el,o=s?null:r,{i:a,r:l}=e,h=t&&t.r,c=a.refs===At?a.refs={}:a.refs,u=a.setupState,d=_t(u),f=u===At?()=>!1:p=>bt(d,p);if(h!=null&&h!==l&&(Bt(h)?(c[h]=null,f(h)&&(u[h]=null)):Yt(h)&&(h.value=null)),lt(l))An(l,a,12,[o,c]);else{const p=Bt(l),m=Yt(l);if(p||m){const b=()=>{if(e.f){const y=p?f(l)?u[l]:c[l]:l.value;s?at(y)&&mo(y,r):at(y)?y.includes(r)||y.push(r):p?(c[l]=[r],f(l)&&(u[l]=c[l])):(l.value=[r],e.k&&(c[e.k]=l.value))}else p?(c[l]=o,f(l)&&(u[l]=o)):m&&(l.value=o,e.k&&(c[e.k]=o))};o?(b.id=-1,ce(b,i)):b()}}}const aa=e=>e.nodeType===8;gs().requestIdleCallback;gs().cancelIdleCallback;function f0(e,t){if(aa(e)&&e.data==="["){let i=1,n=e.nextSibling;for(;n;){if(n.nodeType===1){if(t(n)===!1)break}else if(aa(n))if(n.data==="]"){if(--i===0)break}else n.data==="["&&i++;n=n.nextSibling}}else t(e)}const $i=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Sr(e){lt(e)&&(e={loader:e});const{loader:t,loadingComponent:i,errorComponent:n,delay:s=200,hydrate:r,timeout:o,suspensible:a=!0,onError:l}=e;let h=null,c,u=0;const d=()=>(u++,h=null,f()),f=()=>{let p;return h||(p=h=t().catch(m=>{if(m=m instanceof Error?m:new Error(String(m)),l)return new Promise((b,y)=>{l(m,()=>b(d()),()=>y(m),u+1)});throw m}).then(m=>p!==h&&h?h:(m&&(m.__esModule||m[Symbol.toStringTag]==="Module")&&(m=m.default),c=m,m)))};return ms({name:"AsyncComponentWrapper",__asyncLoader:f,__asyncHydrate(p,m,b){const y=r?()=>{const P=r(b,g=>f0(p,g));P&&(m.bum||(m.bum=[])).push(P)}:b;c?y():f().then(()=>!m.isUnmounted&&y())},get __asyncResolved(){return c},setup(){const p=jt;if(Ro(p),c)return()=>wr(c,p);const m=g=>{h=null,Mn(g,p,13,!n)};if(a&&p.suspense||ji)return f().then(g=>()=>wr(g,p)).catch(g=>(m(g),()=>n?Nt(n,{error:g}):null));const b=zn(!1),y=zn(),P=zn(!!s);return s&&setTimeout(()=>{P.value=!1},s),o!=null&&setTimeout(()=>{if(!b.value&&!y.value){const g=new Error(`Async component timed out after ${o}ms.`);m(g),y.value=g}},o),f().then(()=>{b.value=!0,p.parent&&Oo(p.parent.vnode)&&p.parent.update()}).catch(g=>{m(g),y.value=g}),()=>{if(b.value&&c)return wr(c,p);if(y.value&&n)return Nt(n,{error:y.value});if(i&&!P.value)return Nt(i)}}})}function wr(e,t){const{ref:i,props:n,children:s,ce:r}=t.vnode,o=Nt(e,n,s);return o.ref=i,o.ce=r,delete t.vnode.ce,o}const Oo=e=>e.type.__isKeepAlive;function g0(e,t){Xl(e,"a",t)}function p0(e,t){Xl(e,"da",t)}function Xl(e,t,i=jt){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(_s(t,n,i),i){let s=i.parent;for(;s&&s.parent;)Oo(s.parent.vnode)&&m0(n,t,i,s),s=s.parent}}function m0(e,t,i,n){const s=_s(t,e,n,!0);No(()=>{mo(n[t],s)},i)}function _s(e,t,i=jt,n=!1){if(i){const s=i[e]||(i[e]=[]),r=t.__weh||(t.__weh=(...o)=>{oi();const a=Rn(i),l=Me(t,i,e,o);return a(),ai(),l});return n?s.unshift(r):s.push(r),r}}const $e=e=>(t,i=jt)=>{(!ji||e==="sp")&&_s(e,(...n)=>t(...n),i)},_0=$e("bm"),y0=$e("m"),v0=$e("bu"),b0=$e("u"),S0=$e("bum"),No=$e("um"),w0=$e("sp"),C0=$e("rtg"),x0=$e("rtc");function P0(e,t=jt){_s("ec",e,t)}const E0=Symbol.for("v-ndc");function _5(e,t,i,n){let s;const r=i,o=at(e);if(o||Bt(e)){const a=o&&Ui(e);let l=!1;a&&(l=!pe(e),e=ps(e)),s=new Array(e.length);for(let h=0,c=e.length;h<c;h++)s[h]=t(l?Zt(e[h]):e[h],h,void 0,r)}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,r)}else if(Rt(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,r));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const c=a[l];s[l]=t(e[c],c,l,r)}}else s=[];return s}function Wn(e,t,i={},n,s){if(se.ce||se.parent&&$i(se.parent)&&se.parent.ce)return t!=="default"&&(i.name=t),zi(),qr(ge,null,[Nt("slot",i,n&&n())],64);let r=e[t];r&&r._c&&(r._d=!1),zi();const o=r&&ql(r(i)),a=i.key||o&&o.key,l=qr(ge,{key:(a&&!Ve(a)?a:`_${t}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&e._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function ql(e){return e.some(t=>xn(t)?!(t.type===ii||t.type===ge&&!ql(t.children)):!0)?e:null}const jr=e=>e?_h(e)?Io(e):jr(e.parent):null,_n=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>jr(e.parent),$root:e=>jr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Fo(e),$forceUpdate:e=>e.f||(e.f=()=>{Ao(e.update)}),$nextTick:e=>e.n||(e.n=l0.bind(e.proxy)),$watch:e=>Y0.bind(e)}),Cr=(e,t)=>e!==At&&!e.__isScriptSetup&&bt(e,t),T0={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:r,accessCache:o,type:a,appContext:l}=e;let h;if(t[0]!=="$"){const f=o[t];if(f!==void 0)switch(f){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return r[t]}else{if(Cr(n,t))return o[t]=1,n[t];if(s!==At&&bt(s,t))return o[t]=2,s[t];if((h=e.propsOptions[0])&&bt(h,t))return o[t]=3,r[t];if(i!==At&&bt(i,t))return o[t]=4,i[t];Kr&&(o[t]=0)}}const c=_n[t];let u,d;if(c)return t==="$attrs"&&qt(e.attrs,"get",""),c(e);if((u=a.__cssModules)&&(u=u[t]))return u;if(i!==At&&bt(i,t))return o[t]=4,i[t];if(d=l.config.globalProperties,bt(d,t))return d[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:r}=e;return Cr(s,t)?(s[t]=i,!0):n!==At&&bt(n,t)?(n[t]=i,!0):bt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:r}},o){let a;return!!i[o]||e!==At&&bt(e,o)||Cr(t,o)||(a=r[0])&&bt(a,o)||bt(n,o)||bt(_n,o)||bt(s.config.globalProperties,o)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:bt(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function y5(){return A0().slots}function A0(){const e=mh();return e.setupContext||(e.setupContext=vh(e))}function la(e){return at(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Kr=!0;function M0(e){const t=Fo(e),i=e.proxy,n=e.ctx;Kr=!1,t.beforeCreate&&ha(t.beforeCreate,e,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:h,created:c,beforeMount:u,mounted:d,beforeUpdate:f,updated:p,activated:m,deactivated:b,beforeDestroy:y,beforeUnmount:P,destroyed:g,unmounted:_,render:v,renderTracked:A,renderTriggered:N,errorCaptured:x,serverPrefetch:R,expose:S,inheritAttrs:T,components:O,directives:j,filters:et}=t;if(h&&R0(h,n,null),o)for(const Y in o){const J=o[Y];lt(J)&&(n[Y]=J.bind(i))}if(s){const Y=s.call(i,i);Rt(Y)&&(e.data=Po(Y))}if(Kr=!0,r)for(const Y in r){const J=r[Y],kt=lt(J)?J.bind(i,i):lt(J.get)?J.get.bind(i,i):Ae,z=!lt(J)&&lt(J.set)?J.set.bind(i):Ae,Q=gu({get:kt,set:z});Object.defineProperty(n,Y,{enumerable:!0,configurable:!0,get:()=>Q.value,set:ht=>Q.value=ht})}if(a)for(const Y in a)Zl(a[Y],n,i,Y);if(l){const Y=lt(l)?l.call(i):l;Reflect.ownKeys(Y).forEach(J=>{Ql(J,Y[J])})}c&&ha(c,e,"c");function B(Y,J){at(J)?J.forEach(kt=>Y(kt.bind(i))):J&&Y(J.bind(i))}if(B(_0,u),B(y0,d),B(v0,f),B(b0,p),B(g0,m),B(p0,b),B(P0,x),B(x0,A),B(C0,N),B(S0,P),B(No,_),B(w0,R),at(S))if(S.length){const Y=e.exposed||(e.exposed={});S.forEach(J=>{Object.defineProperty(Y,J,{get:()=>i[J],set:kt=>i[J]=kt})})}else e.exposed||(e.exposed={});v&&e.render===Ae&&(e.render=v),T!=null&&(e.inheritAttrs=T),O&&(e.components=O),j&&(e.directives=j),R&&Ro(e)}function R0(e,t,i=Ae){at(e)&&(e=Yr(e));for(const n in e){const s=e[n];let r;Rt(s)?"default"in s?r=yn(s.from||n,s.default,!0):r=yn(s.from||n):r=yn(s),Yt(r)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[n]=r}}function ha(e,t,i){Me(at(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Zl(e,t,i,n){let s=n.includes(".")?uh(i,n):()=>i[n];if(Bt(e)){const r=t[e];lt(r)&&jn(s,r)}else if(lt(e))jn(s,e.bind(i));else if(Rt(e))if(at(e))e.forEach(r=>Zl(r,t,i,n));else{const r=lt(e.handler)?e.handler.bind(i):t[e.handler];lt(r)&&jn(s,r,e)}}function Fo(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,a=r.get(t);let l;return a?l=a:!s.length&&!i&&!n?l=t:(l={},s.length&&s.forEach(h=>is(l,h,o,!0)),is(l,t,o)),Rt(t)&&r.set(t,l),l}function is(e,t,i,n=!1){const{mixins:s,extends:r}=t;r&&is(e,r,i,!0),s&&s.forEach(o=>is(e,o,i,!0));for(const o in t)if(!(n&&o==="expose")){const a=O0[o]||i&&i[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const O0={data:ca,props:ua,emits:ua,methods:fn,computed:fn,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:fn,directives:fn,watch:F0,provide:ca,inject:N0};function ca(e,t){return t?e?function(){return Wt(lt(e)?e.call(this,this):e,lt(t)?t.call(this,this):t)}:t:e}function N0(e,t){return fn(Yr(e),Yr(t))}function Yr(e){if(at(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ee(e,t){return e?[...new Set([].concat(e,t))]:t}function fn(e,t){return e?Wt(Object.create(null),e,t):t}function ua(e,t){return e?at(e)&&at(t)?[...new Set([...e,...t])]:Wt(Object.create(null),la(e),la(t??{})):t}function F0(e,t){if(!e)return t;if(!t)return e;const i=Wt(Object.create(null),e);for(const n in t)i[n]=ee(e[n],t[n]);return i}function Jl(){return{app:null,config:{isNativeTag:_c,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let k0=0;function L0(e,t){return function(n,s=null){lt(n)||(n=Wt({},n)),s!=null&&!Rt(s)&&(s=null);const r=Jl(),o=new WeakSet,a=[];let l=!1;const h=r.app={_uid:k0++,_component:n,_props:s,_container:null,_context:r,_instance:null,version:pu,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&lt(c.install)?(o.add(c),c.install(h,...u)):lt(c)&&(o.add(c),c(h,...u))),h},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),h},component(c,u){return u?(r.components[c]=u,h):r.components[c]},directive(c,u){return u?(r.directives[c]=u,h):r.directives[c]},mount(c,u,d){if(!l){const f=h._ceVNode||Nt(n,s);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),u&&t?t(f,c):e(f,c,d),l=!0,h._container=c,c.__vue_app__=h,Io(f.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Me(a,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(c,u){return r.provides[c]=u,h},runWithContext(c){const u=Hi;Hi=h;try{return c()}finally{Hi=u}}};return h}}let Hi=null;function Ql(e,t){if(jt){let i=jt.provides;const n=jt.parent&&jt.parent.provides;n===i&&(i=jt.provides=Object.create(n)),i[e]=t}}function yn(e,t,i=!1){const n=jt||se;if(n||Hi){const s=Hi?Hi._context.provides:n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&lt(t)?t.call(n&&n.proxy):t}}const th={},eh=()=>Object.create(th),ih=e=>Object.getPrototypeOf(e)===th;function D0(e,t,i,n=!1){const s={},r=eh();e.propsDefaults=Object.create(null),nh(e,t,s,r);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);i?e.props=n?s:qc(s):e.type.props?e.props=s:e.props=r,e.attrs=r}function G0(e,t,i,n){const{props:s,attrs:r,vnode:{patchFlag:o}}=e,a=_t(s),[l]=e.propsOptions;let h=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let u=0;u<c.length;u++){let d=c[u];if(ys(e.emitsOptions,d))continue;const f=t[d];if(l)if(bt(r,d))f!==r[d]&&(r[d]=f,h=!0);else{const p=ei(d);s[p]=Xr(l,a,p,f,e,!1)}else f!==r[d]&&(r[d]=f,h=!0)}}}else{nh(e,t,s,r)&&(h=!0);let c;for(const u in a)(!t||!bt(t,u)&&((c=ri(u))===u||!bt(t,c)))&&(l?i&&(i[u]!==void 0||i[c]!==void 0)&&(s[u]=Xr(l,a,u,void 0,e,!0)):delete s[u]);if(r!==a)for(const u in r)(!t||!bt(t,u))&&(delete r[u],h=!0)}h&&Ge(e.attrs,"set","")}function nh(e,t,i,n){const[s,r]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(gn(l))continue;const h=t[l];let c;s&&bt(s,c=ei(l))?!r||!r.includes(c)?i[c]=h:(a||(a={}))[c]=h:ys(e.emitsOptions,l)||(!(l in n)||h!==n[l])&&(n[l]=h,o=!0)}if(r){const l=_t(i),h=a||At;for(let c=0;c<r.length;c++){const u=r[c];i[u]=Xr(s,l,u,h[u],e,!bt(h,u))}}return o}function Xr(e,t,i,n,s,r){const o=e[i];if(o!=null){const a=bt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&lt(l)){const{propsDefaults:h}=s;if(i in h)n=h[i];else{const c=Rn(s);n=h[i]=l.call(null,t),c()}}else n=l;s.ce&&s.ce._setProp(i,n)}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===ri(i))&&(n=!0))}return n}const I0=new WeakMap;function sh(e,t,i=!1){const n=i?I0:t.propsCache,s=n.get(e);if(s)return s;const r=e.props,o={},a=[];let l=!1;if(!lt(e)){const c=u=>{l=!0;const[d,f]=sh(u,t,!0);Wt(o,d),f&&a.push(...f)};!i&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!r&&!l)return Rt(e)&&n.set(e,Gi),Gi;if(at(r))for(let c=0;c<r.length;c++){const u=ei(r[c]);da(u)&&(o[u]=At)}else if(r)for(const c in r){const u=ei(c);if(da(u)){const d=r[c],f=o[u]=at(d)||lt(d)?{type:d}:Wt({},d),p=f.type;let m=!1,b=!0;if(at(p))for(let y=0;y<p.length;++y){const P=p[y],g=lt(P)&&P.name;if(g==="Boolean"){m=!0;break}else g==="String"&&(b=!1)}else m=lt(p)&&p.name==="Boolean";f[0]=m,f[1]=b,(m||bt(f,"default"))&&a.push(u)}}const h=[o,a];return Rt(e)&&n.set(e,h),h}function da(e){return e[0]!=="$"&&!gn(e)}const rh=e=>e[0]==="_"||e==="$stable",ko=e=>at(e)?e.map(Ee):[Ee(e)],U0=(e,t,i)=>{if(t._n)return t;const n=dn((...s)=>ko(t(...s)),i);return n._c=!1,n},oh=(e,t,i)=>{const n=e._ctx;for(const s in e){if(rh(s))continue;const r=e[s];if(lt(r))t[s]=U0(s,r,n);else if(r!=null){const o=ko(r);t[s]=()=>o}}},ah=(e,t)=>{const i=ko(t);e.slots.default=()=>i},lh=(e,t,i)=>{for(const n in t)(i||n!=="_")&&(e[n]=t[n])},B0=(e,t,i)=>{const n=e.slots=eh();if(e.vnode.shapeFlag&32){const s=t._;s?(lh(n,t,i),i&&wl(n,"_",s,!0)):oh(t,n)}else t&&ah(e,t)},V0=(e,t,i)=>{const{vnode:n,slots:s}=e;let r=!0,o=At;if(n.shapeFlag&32){const a=t._;a?i&&a===1?r=!1:lh(s,t,i):(r=!t.$stable,oh(t,s)),o=t}else t&&(ah(e,t),o={default:1});if(r)for(const a in s)!rh(a)&&o[a]==null&&delete s[a]},ce=eu;function $0(e){return H0(e)}function H0(e,t){const i=gs();i.__VUE__=!0;const{insert:n,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:h,setElementText:c,parentNode:u,nextSibling:d,setScopeId:f=Ae,insertStaticContent:p}=e,m=(w,C,M,D=null,F=null,L=null,H=void 0,$=null,V=!!C.dynamicChildren)=>{if(w===C)return;w&&!an(w,C)&&(D=E(w),ht(w,F,L,!0),w=null),C.patchFlag===-2&&(V=!1,C.dynamicChildren=null);const{type:I,ref:it,shapeFlag:W}=C;switch(I){case vs:b(w,C,M,D);break;case ii:y(w,C,M,D);break;case Er:w==null&&P(C,M,D,H);break;case ge:O(w,C,M,D,F,L,H,$,V);break;default:W&1?v(w,C,M,D,F,L,H,$,V):W&6?j(w,C,M,D,F,L,H,$,V):(W&64||W&128)&&I.process(w,C,M,D,F,L,H,$,V,vt)}it!=null&&F&&Wr(it,w&&w.ref,L,C||w,!C)},b=(w,C,M,D)=>{if(w==null)n(C.el=a(C.children),M,D);else{const F=C.el=w.el;C.children!==w.children&&h(F,C.children)}},y=(w,C,M,D)=>{w==null?n(C.el=l(C.children||""),M,D):C.el=w.el},P=(w,C,M,D)=>{[w.el,w.anchor]=p(w.children,C,M,D,w.el,w.anchor)},g=({el:w,anchor:C},M,D)=>{let F;for(;w&&w!==C;)F=d(w),n(w,M,D),w=F;n(C,M,D)},_=({el:w,anchor:C})=>{let M;for(;w&&w!==C;)M=d(w),s(w),w=M;s(C)},v=(w,C,M,D,F,L,H,$,V)=>{C.type==="svg"?H="svg":C.type==="math"&&(H="mathml"),w==null?A(C,M,D,F,L,H,$,V):R(w,C,F,L,H,$,V)},A=(w,C,M,D,F,L,H,$)=>{let V,I;const{props:it,shapeFlag:W,transition:Z,dirs:ot}=w;if(V=w.el=o(w.type,L,it&&it.is,it),W&8?c(V,w.children):W&16&&x(w.children,V,null,D,F,xr(w,L),H,$),ot&&pi(w,null,D,"created"),N(V,w,w.scopeId,H,D),it){for(const Et in it)Et!=="value"&&!gn(Et)&&r(V,Et,null,it[Et],L,D);"value"in it&&r(V,"value",null,it.value,L),(I=it.onVnodeBeforeMount)&&xe(I,D,w)}ot&&pi(w,null,D,"beforeMount");const gt=z0(F,Z);gt&&Z.beforeEnter(V),n(V,C,M),((I=it&&it.onVnodeMounted)||gt||ot)&&ce(()=>{I&&xe(I,D,w),gt&&Z.enter(V),ot&&pi(w,null,D,"mounted")},F)},N=(w,C,M,D,F)=>{if(M&&f(w,M),D)for(let L=0;L<D.length;L++)f(w,D[L]);if(F){let L=F.subTree;if(C===L||fh(L.type)&&(L.ssContent===C||L.ssFallback===C)){const H=F.vnode;N(w,H,H.scopeId,H.slotScopeIds,F.parent)}}},x=(w,C,M,D,F,L,H,$,V=0)=>{for(let I=V;I<w.length;I++){const it=w[I]=$?qe(w[I]):Ee(w[I]);m(null,it,C,M,D,F,L,H,$)}},R=(w,C,M,D,F,L,H)=>{const $=C.el=w.el;let{patchFlag:V,dynamicChildren:I,dirs:it}=C;V|=w.patchFlag&16;const W=w.props||At,Z=C.props||At;let ot;if(M&&mi(M,!1),(ot=Z.onVnodeBeforeUpdate)&&xe(ot,M,C,w),it&&pi(C,w,M,"beforeUpdate"),M&&mi(M,!0),(W.innerHTML&&Z.innerHTML==null||W.textContent&&Z.textContent==null)&&c($,""),I?S(w.dynamicChildren,I,$,M,D,xr(C,F),L):H||J(w,C,$,null,M,D,xr(C,F),L,!1),V>0){if(V&16)T($,W,Z,M,F);else if(V&2&&W.class!==Z.class&&r($,"class",null,Z.class,F),V&4&&r($,"style",W.style,Z.style,F),V&8){const gt=C.dynamicProps;for(let Et=0;Et<gt.length;Et++){const St=gt[Et],ae=W[St],Xt=Z[St];(Xt!==ae||St==="value")&&r($,St,ae,Xt,F,M)}}V&1&&w.children!==C.children&&c($,C.children)}else!H&&I==null&&T($,W,Z,M,F);((ot=Z.onVnodeUpdated)||it)&&ce(()=>{ot&&xe(ot,M,C,w),it&&pi(C,w,M,"updated")},D)},S=(w,C,M,D,F,L,H)=>{for(let $=0;$<C.length;$++){const V=w[$],I=C[$],it=V.el&&(V.type===ge||!an(V,I)||V.shapeFlag&70)?u(V.el):M;m(V,I,it,null,D,F,L,H,!0)}},T=(w,C,M,D,F)=>{if(C!==M){if(C!==At)for(const L in C)!gn(L)&&!(L in M)&&r(w,L,C[L],null,F,D);for(const L in M){if(gn(L))continue;const H=M[L],$=C[L];H!==$&&L!=="value"&&r(w,L,$,H,F,D)}"value"in M&&r(w,"value",C.value,M.value,F)}},O=(w,C,M,D,F,L,H,$,V)=>{const I=C.el=w?w.el:a(""),it=C.anchor=w?w.anchor:a("");let{patchFlag:W,dynamicChildren:Z,slotScopeIds:ot}=C;ot&&($=$?$.concat(ot):ot),w==null?(n(I,M,D),n(it,M,D),x(C.children||[],M,it,F,L,H,$,V)):W>0&&W&64&&Z&&w.dynamicChildren?(S(w.dynamicChildren,Z,M,F,L,H,$),(C.key!=null||F&&C===F.subTree)&&hh(w,C,!0)):J(w,C,M,it,F,L,H,$,V)},j=(w,C,M,D,F,L,H,$,V)=>{C.slotScopeIds=$,w==null?C.shapeFlag&512?F.ctx.activate(C,M,D,H,V):et(C,M,D,F,L,H,V):U(w,C,V)},et=(w,C,M,D,F,L,H)=>{const $=w.component=hu(w,D,F);if(Oo(w)&&($.ctx.renderer=vt),cu($,!1,H),$.asyncDep){if(F&&F.registerDep($,B,H),!w.el){const V=$.subTree=Nt(ii);y(null,V,C,M)}}else B($,w,C,M,F,L,H)},U=(w,C,M)=>{const D=C.component=w.component;if(Q0(w,C,M))if(D.asyncDep&&!D.asyncResolved){Y(D,C,M);return}else D.next=C,D.update();else C.el=w.el,D.vnode=C},B=(w,C,M,D,F,L,H)=>{const $=()=>{if(w.isMounted){let{next:W,bu:Z,u:ot,parent:gt,vnode:Et}=w;{const le=ch(w);if(le){W&&(W.el=Et.el,Y(w,W,H)),le.asyncDep.then(()=>{w.isUnmounted||$()});return}}let St=W,ae;mi(w,!1),W?(W.el=Et.el,Y(w,W,H)):W=Et,Z&&mr(Z),(ae=W.props&&W.props.onVnodeBeforeUpdate)&&xe(ae,gt,W,Et),mi(w,!0);const Xt=Pr(w),me=w.subTree;w.subTree=Xt,m(me,Xt,u(me.el),E(me),w,F,L),W.el=Xt.el,St===null&&tu(w,Xt.el),ot&&ce(ot,F),(ae=W.props&&W.props.onVnodeUpdated)&&ce(()=>xe(ae,gt,W,Et),F)}else{let W;const{el:Z,props:ot}=C,{bm:gt,m:Et,parent:St,root:ae,type:Xt}=w,me=$i(C);if(mi(w,!1),gt&&mr(gt),!me&&(W=ot&&ot.onVnodeBeforeMount)&&xe(W,St,C),mi(w,!0),Z&&Mt){const le=()=>{w.subTree=Pr(w),Mt(Z,w.subTree,w,F,null)};me&&Xt.__asyncHydrate?Xt.__asyncHydrate(Z,w,le):le()}else{ae.ce&&ae.ce._injectChildStyle(Xt);const le=w.subTree=Pr(w);m(null,le,M,D,w,F,L),C.el=le.el}if(Et&&ce(Et,F),!me&&(W=ot&&ot.onVnodeMounted)){const le=C;ce(()=>xe(W,St,le),F)}(C.shapeFlag&256||St&&$i(St.vnode)&&St.vnode.shapeFlag&256)&&w.a&&ce(w.a,F),w.isMounted=!0,C=M=D=null}};w.scope.on();const V=w.effect=new Al($);w.scope.off();const I=w.update=V.run.bind(V),it=w.job=V.runIfDirty.bind(V);it.i=w,it.id=w.uid,V.scheduler=()=>Ao(it),mi(w,!0),I()},Y=(w,C,M)=>{C.component=w;const D=w.vnode.props;w.vnode=C,w.next=null,G0(w,C.props,D,M),V0(w,C.children,M),oi(),oa(w),ai()},J=(w,C,M,D,F,L,H,$,V=!1)=>{const I=w&&w.children,it=w?w.shapeFlag:0,W=C.children,{patchFlag:Z,shapeFlag:ot}=C;if(Z>0){if(Z&128){z(I,W,M,D,F,L,H,$,V);return}else if(Z&256){kt(I,W,M,D,F,L,H,$,V);return}}ot&8?(it&16&&It(I,F,L),W!==I&&c(M,W)):it&16?ot&16?z(I,W,M,D,F,L,H,$,V):It(I,F,L,!0):(it&8&&c(M,""),ot&16&&x(W,M,D,F,L,H,$,V))},kt=(w,C,M,D,F,L,H,$,V)=>{w=w||Gi,C=C||Gi;const I=w.length,it=C.length,W=Math.min(I,it);let Z;for(Z=0;Z<W;Z++){const ot=C[Z]=V?qe(C[Z]):Ee(C[Z]);m(w[Z],ot,M,null,F,L,H,$,V)}I>it?It(w,F,L,!0,!1,W):x(C,M,D,F,L,H,$,V,W)},z=(w,C,M,D,F,L,H,$,V)=>{let I=0;const it=C.length;let W=w.length-1,Z=it-1;for(;I<=W&&I<=Z;){const ot=w[I],gt=C[I]=V?qe(C[I]):Ee(C[I]);if(an(ot,gt))m(ot,gt,M,null,F,L,H,$,V);else break;I++}for(;I<=W&&I<=Z;){const ot=w[W],gt=C[Z]=V?qe(C[Z]):Ee(C[Z]);if(an(ot,gt))m(ot,gt,M,null,F,L,H,$,V);else break;W--,Z--}if(I>W){if(I<=Z){const ot=Z+1,gt=ot<it?C[ot].el:D;for(;I<=Z;)m(null,C[I]=V?qe(C[I]):Ee(C[I]),M,gt,F,L,H,$,V),I++}}else if(I>Z)for(;I<=W;)ht(w[I],F,L,!0),I++;else{const ot=I,gt=I,Et=new Map;for(I=gt;I<=Z;I++){const he=C[I]=V?qe(C[I]):Ee(C[I]);he.key!=null&&Et.set(he.key,I)}let St,ae=0;const Xt=Z-gt+1;let me=!1,le=0;const rn=new Array(Xt);for(I=0;I<Xt;I++)rn[I]=0;for(I=ot;I<=W;I++){const he=w[I];if(ae>=Xt){ht(he,F,L,!0);continue}let Ce;if(he.key!=null)Ce=Et.get(he.key);else for(St=gt;St<=Z;St++)if(rn[St-gt]===0&&an(he,C[St])){Ce=St;break}Ce===void 0?ht(he,F,L,!0):(rn[Ce-gt]=I+1,Ce>=le?le=Ce:me=!0,m(he,C[Ce],M,null,F,L,H,$,V),ae++)}const ea=me?W0(rn):Gi;for(St=ea.length-1,I=Xt-1;I>=0;I--){const he=gt+I,Ce=C[he],ia=he+1<it?C[he+1].el:D;rn[I]===0?m(null,Ce,M,ia,F,L,H,$,V):me&&(St<0||I!==ea[St]?Q(Ce,M,ia,2):St--)}}},Q=(w,C,M,D,F=null)=>{const{el:L,type:H,transition:$,children:V,shapeFlag:I}=w;if(I&6){Q(w.component.subTree,C,M,D);return}if(I&128){w.suspense.move(C,M,D);return}if(I&64){H.move(w,C,M,vt);return}if(H===ge){n(L,C,M);for(let W=0;W<V.length;W++)Q(V[W],C,M,D);n(w.anchor,C,M);return}if(H===Er){g(w,C,M);return}if(D!==2&&I&1&&$)if(D===0)$.beforeEnter(L),n(L,C,M),ce(()=>$.enter(L),F);else{const{leave:W,delayLeave:Z,afterLeave:ot}=$,gt=()=>n(L,C,M),Et=()=>{W(L,()=>{gt(),ot&&ot()})};Z?Z(L,gt,Et):Et()}else n(L,C,M)},ht=(w,C,M,D=!1,F=!1)=>{const{type:L,props:H,ref:$,children:V,dynamicChildren:I,shapeFlag:it,patchFlag:W,dirs:Z,cacheIndex:ot}=w;if(W===-2&&(F=!1),$!=null&&Wr($,null,M,w,!0),ot!=null&&(C.renderCache[ot]=void 0),it&256){C.ctx.deactivate(w);return}const gt=it&1&&Z,Et=!$i(w);let St;if(Et&&(St=H&&H.onVnodeBeforeUnmount)&&xe(St,C,w),it&6)re(w.component,M,D);else{if(it&128){w.suspense.unmount(M,D);return}gt&&pi(w,null,C,"beforeUnmount"),it&64?w.type.remove(w,C,M,vt,D):I&&!I.hasOnce&&(L!==ge||W>0&&W&64)?It(I,C,M,!1,!0):(L===ge&&W&384||!F&&it&16)&&It(V,C,M),D&&pt(w)}(Et&&(St=H&&H.onVnodeUnmounted)||gt)&&ce(()=>{St&&xe(St,C,w),gt&&pi(w,null,C,"unmounted")},M)},pt=w=>{const{type:C,el:M,anchor:D,transition:F}=w;if(C===ge){Ct(M,D);return}if(C===Er){_(w);return}const L=()=>{s(M),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(w.shapeFlag&1&&F&&!F.persisted){const{leave:H,delayLeave:$}=F,V=()=>H(M,L);$?$(w.el,L,V):V()}else L()},Ct=(w,C)=>{let M;for(;w!==C;)M=d(w),s(w),w=M;s(C)},re=(w,C,M)=>{const{bum:D,scope:F,job:L,subTree:H,um:$,m:V,a:I}=w;fa(V),fa(I),D&&mr(D),F.stop(),L&&(L.flags|=8,ht(H,w,C,M)),$&&ce($,C),ce(()=>{w.isUnmounted=!0},C),C&&C.pendingBranch&&!C.isUnmounted&&w.asyncDep&&!w.asyncResolved&&w.suspenseId===C.pendingId&&(C.deps--,C.deps===0&&C.resolve())},It=(w,C,M,D=!1,F=!1,L=0)=>{for(let H=L;H<w.length;H++)ht(w[H],C,M,D,F)},E=w=>{if(w.shapeFlag&6)return E(w.component.subTree);if(w.shapeFlag&128)return w.suspense.next();const C=d(w.anchor||w.el),M=C&&C[u0];return M?d(M):C};let G=!1;const q=(w,C,M)=>{w==null?C._vnode&&ht(C._vnode,null,null,!0):m(C._vnode||null,w,C,null,null,null,M),C._vnode=w,G||(G=!0,oa(),jl(),G=!1)},vt={p:m,um:ht,m:Q,r:pt,mt:et,mc:x,pc:J,pbc:S,n:E,o:e};let mt,Mt;return{render:q,hydrate:mt,createApp:L0(q,mt)}}function xr({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function mi({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function z0(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function hh(e,t,i=!1){const n=e.children,s=t.children;if(at(n)&&at(s))for(let r=0;r<n.length;r++){const o=n[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=qe(s[r]),a.el=o.el),!i&&a.patchFlag!==-2&&hh(o,a)),a.type===vs&&(a.el=o.el)}}function W0(e){const t=e.slice(),i=[0];let n,s,r,o,a;const l=e.length;for(n=0;n<l;n++){const h=e[n];if(h!==0){if(s=i[i.length-1],e[s]<h){t[n]=s,i.push(n);continue}for(r=0,o=i.length-1;r<o;)a=r+o>>1,e[i[a]]<h?r=a+1:o=a;h<e[i[r]]&&(r>0&&(t[n]=i[r-1]),i[r]=n)}}for(r=i.length,o=i[r-1];r-- >0;)i[r]=o,o=t[o];return i}function ch(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:ch(t)}function fa(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const j0=Symbol.for("v-scx"),K0=()=>yn(j0);function v5(e,t){return Lo(e,null,t)}function jn(e,t,i){return Lo(e,t,i)}function Lo(e,t,i=At){const{immediate:n,deep:s,flush:r,once:o}=i,a=Wt({},i),l=t&&n||!t&&r!=="post";let h;if(ji){if(r==="sync"){const f=K0();h=f.__watcherHandles||(f.__watcherHandles=[])}else if(!l){const f=()=>{};return f.stop=Ae,f.resume=Ae,f.pause=Ae,f}}const c=jt;a.call=(f,p,m)=>Me(f,c,p,m);let u=!1;r==="post"?a.scheduler=f=>{ce(f,c&&c.suspense)}:r!=="sync"&&(u=!0,a.scheduler=(f,p)=>{p?f():Ao(f)}),a.augmentJob=f=>{t&&(f.flags|=4),u&&(f.flags|=2,c&&(f.id=c.uid,f.i=c))};const d=o0(e,t,a);return ji&&(h?h.push(d):l&&d()),d}function Y0(e,t,i){const n=this.proxy,s=Bt(e)?e.includes(".")?uh(n,e):()=>n[e]:e.bind(n,n);let r;lt(t)?r=t:(r=t.handler,i=t);const o=Rn(this),a=Lo(s,r.bind(n),i);return o(),a}function uh(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const X0=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ei(t)}Modifiers`]||e[`${ri(t)}Modifiers`];function q0(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||At;let s=i;const r=t.startsWith("update:"),o=r&&X0(n,t.slice(7));o&&(o.trim&&(s=i.map(c=>Bt(c)?c.trim():c)),o.number&&(s=i.map(wc)));let a,l=n[a=pr(t)]||n[a=pr(ei(t))];!l&&r&&(l=n[a=pr(ri(t))]),l&&Me(l,e,6,s);const h=n[a+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Me(h,e,6,s)}}function dh(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const r=e.emits;let o={},a=!1;if(!lt(e)){const l=h=>{const c=dh(h,t,!0);c&&(a=!0,Wt(o,c))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!r&&!a?(Rt(e)&&n.set(e,null),null):(at(r)?r.forEach(l=>o[l]=null):Wt(o,r),Rt(e)&&n.set(e,o),o)}function ys(e,t){return!e||!us(t)?!1:(t=t.slice(2).replace(/Once$/,""),bt(e,t[0].toLowerCase()+t.slice(1))||bt(e,ri(t))||bt(e,t))}function Pr(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:h,renderCache:c,props:u,data:d,setupState:f,ctx:p,inheritAttrs:m}=e,b=es(e);let y,P;try{if(i.shapeFlag&4){const _=s||n,v=_;y=Ee(h.call(v,_,c,u,f,d,p)),P=a}else{const _=t;y=Ee(_.length>1?_(u,{attrs:a,slots:o,emit:l}):_(u,null)),P=t.props?a:Z0(a)}}catch(_){vn.length=0,Mn(_,e,1),y=Nt(ii)}let g=y;if(P&&m!==!1){const _=Object.keys(P),{shapeFlag:v}=g;_.length&&v&7&&(r&&_.some(po)&&(P=J0(P,r)),g=Wi(g,P,!1,!0))}return i.dirs&&(g=Wi(g,null,!1,!0),g.dirs=g.dirs?g.dirs.concat(i.dirs):i.dirs),i.transition&&Mo(g,i.transition),y=g,es(b),y}const Z0=e=>{let t;for(const i in e)(i==="class"||i==="style"||us(i))&&((t||(t={}))[i]=e[i]);return t},J0=(e,t)=>{const i={};for(const n in e)(!po(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function Q0(e,t,i){const{props:n,children:s,component:r}=e,{props:o,children:a,patchFlag:l}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return n?ga(n,o,h):!!o;if(l&8){const c=t.dynamicProps;for(let u=0;u<c.length;u++){const d=c[u];if(o[d]!==n[d]&&!ys(h,d))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?ga(n,o,h):!0:!!o;return!1}function ga(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const r=n[s];if(t[r]!==e[r]&&!ys(i,r))return!0}return!1}function tu({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const fh=e=>e.__isSuspense;function eu(e,t){t&&t.pendingBranch?at(e)?t.effects.push(...e):t.effects.push(e):c0(e)}const ge=Symbol.for("v-fgt"),vs=Symbol.for("v-txt"),ii=Symbol.for("v-cmt"),Er=Symbol.for("v-stc"),vn=[];let de=null;function zi(e=!1){vn.push(de=e?null:[])}function iu(){vn.pop(),de=vn[vn.length-1]||null}let Cn=1;function pa(e){Cn+=e,e<0&&de&&(de.hasOnce=!0)}function gh(e){return e.dynamicChildren=Cn>0?de||Gi:null,iu(),Cn>0&&de&&de.push(e),e}function Do(e,t,i,n,s,r){return gh(ue(e,t,i,n,s,r,!0))}function qr(e,t,i,n,s){return gh(Nt(e,t,i,n,s,!0))}function xn(e){return e?e.__v_isVNode===!0:!1}function an(e,t){return e.type===t.type&&e.key===t.key}const ph=({key:e})=>e??null,Kn=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||Yt(e)||lt(e)?{i:se,r:e,k:t,f:!!i}:e:null);function ue(e,t=null,i=null,n=0,s=null,r=e===ge?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&ph(t),ref:t&&Kn(t),scopeId:Yl,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:se};return a?(Go(l,i),r&128&&e.normalize(l)):i&&(l.shapeFlag|=Bt(i)?8:16),Cn>0&&!o&&de&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&de.push(l),l}const Nt=nu;function nu(e,t=null,i=null,n=0,s=null,r=!1){if((!e||e===E0)&&(e=ii),xn(e)){const a=Wi(e,t,!0);return i&&Go(a,i),Cn>0&&!r&&de&&(a.shapeFlag&6?de[de.indexOf(e)]=a:de.push(a)),a.patchFlag=-2,a}if(fu(e)&&(e=e.__vccOpts),t){t=su(t);let{class:a,style:l}=t;a&&!Bt(a)&&(t.class=vo(a)),Rt(l)&&(To(l)&&!at(l)&&(l=Wt({},l)),t.style=yo(l))}const o=Bt(e)?1:fh(e)?128:d0(e)?64:Rt(e)?4:lt(e)?2:0;return ue(e,t,i,n,s,o,r,!0)}function su(e){return e?To(e)||ih(e)?Wt({},e):e:null}function Wi(e,t,i=!1,n=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=e,h=t?ou(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&ph(h),ref:t&&t.ref?i&&r?at(r)?r.concat(Kn(t)):[r,Kn(t)]:Kn(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ge?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wi(e.ssContent),ssFallback:e.ssFallback&&Wi(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Mo(c,l.clone(c)),c}function ru(e=" ",t=0){return Nt(vs,null,e,t)}function b5(e="",t=!1){return t?(zi(),qr(ii,null,e)):Nt(ii,null,e)}function Ee(e){return e==null||typeof e=="boolean"?Nt(ii):at(e)?Nt(ge,null,e.slice()):xn(e)?qe(e):Nt(vs,null,String(e))}function qe(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Wi(e)}function Go(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(at(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),Go(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!ih(t)?t._ctx=se:s===3&&se&&(se.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else lt(t)?(t={default:t,_ctx:se},i=32):(t=String(t),n&64?(i=16,t=[ru(t)]):i=8);e.children=t,e.shapeFlag|=i}function ou(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=vo([t.class,n.class]));else if(s==="style")t.style=yo([t.style,n.style]);else if(us(s)){const r=t[s],o=n[s];o&&r!==o&&!(at(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=n[s])}return t}function xe(e,t,i,n=null){Me(e,t,7,[i,n])}const au=Jl();let lu=0;function hu(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||au,r={uid:lu++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new El(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sh(n,s),emitsOptions:dh(n,s),emit:null,emitted:null,propsDefaults:At,inheritAttrs:n.inheritAttrs,ctx:At,data:At,props:At,attrs:At,slots:At,refs:At,setupState:At,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=q0.bind(null,r),e.ce&&e.ce(r),r}let jt=null;const mh=()=>jt||se;let ns,Zr;{const e=gs(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};ns=t("__VUE_INSTANCE_SETTERS__",i=>jt=i),Zr=t("__VUE_SSR_SETTERS__",i=>ji=i)}const Rn=e=>{const t=jt;return ns(e),e.scope.on(),()=>{e.scope.off(),ns(t)}},ma=()=>{jt&&jt.scope.off(),ns(null)};function _h(e){return e.vnode.shapeFlag&4}let ji=!1;function cu(e,t=!1,i=!1){t&&Zr(t);const{props:n,children:s}=e.vnode,r=_h(e);D0(e,n,r,t),B0(e,s,i);const o=r?uu(e,t):void 0;return t&&Zr(!1),o}function uu(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,T0);const{setup:n}=i;if(n){oi();const s=e.setupContext=n.length>1?vh(e):null,r=Rn(e),o=An(n,e,0,[e.props,s]),a=yl(o);if(ai(),r(),(a||e.sp)&&!$i(e)&&Ro(e),a){if(o.then(ma,ma),t)return o.then(l=>{_a(e,l,t)}).catch(l=>{Mn(l,e,0)});e.asyncDep=o}else _a(e,o,t)}else yh(e,t)}function _a(e,t,i){lt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=Hl(t)),yh(e,i)}let ya;function yh(e,t,i){const n=e.type;if(!e.render){if(!t&&ya&&!n.render){const s=n.template||Fo(e).template;if(s){const{isCustomElement:r,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=n,h=Wt(Wt({isCustomElement:r,delimiters:a},o),l);n.render=ya(s,h)}}e.render=n.render||Ae}{const s=Rn(e);oi();try{M0(e)}finally{ai(),s()}}}const du={get(e,t){return qt(e,"get",""),e[t]}};function vh(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,du),slots:e.slots,emit:e.emit,expose:t}}function Io(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Hl(Zc(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in _n)return _n[i](e)},has(t,i){return i in t||i in _n}})):e.proxy}function fu(e){return lt(e)&&"__vccOpts"in e}const gu=(e,t)=>s0(e,t,ji);function S5(e,t,i){const n=arguments.length;return n===2?Rt(t)&&!at(t)?xn(t)?Nt(e,null,[t]):Nt(e,t):Nt(e,null,t):(n>3?i=Array.prototype.slice.call(arguments,2):n===3&&xn(i)&&(i=[i]),Nt(e,t,i))}const pu="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jr;const va=typeof window<"u"&&window.trustedTypes;if(va)try{Jr=va.createPolicy("vue",{createHTML:e=>e})}catch{}const bh=Jr?e=>Jr.createHTML(e):e=>e,mu="http://www.w3.org/2000/svg",_u="http://www.w3.org/1998/Math/MathML",De=typeof document<"u"?document:null,ba=De&&De.createElement("template"),yu={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?De.createElementNS(mu,e):t==="mathml"?De.createElementNS(_u,e):i?De.createElement(e,{is:i}):De.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>De.createTextNode(e),createComment:e=>De.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>De.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,r){const o=i?i.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===r||!(s=s.nextSibling)););else{ba.innerHTML=bh(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const a=ba.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},vu=Symbol("_vtc");function bu(e,t,i){const n=e[vu];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const Sa=Symbol("_vod"),Su=Symbol("_vsh"),wu=Symbol(""),Cu=/(^|;)\s*display\s*:/;function xu(e,t,i){const n=e.style,s=Bt(i);let r=!1;if(i&&!s){if(t)if(Bt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();i[a]==null&&Yn(n,a,"")}else for(const o in t)i[o]==null&&Yn(n,o,"");for(const o in i)o==="display"&&(r=!0),Yn(n,o,i[o])}else if(s){if(t!==i){const o=n[wu];o&&(i+=";"+o),n.cssText=i,r=Cu.test(i)}}else t&&e.removeAttribute("style");Sa in e&&(e[Sa]=r?n.display:"",e[Su]&&(n.display="none"))}const wa=/\s*!important$/;function Yn(e,t,i){if(at(i))i.forEach(n=>Yn(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Pu(e,t);wa.test(i)?e.setProperty(ri(n),i.replace(wa,""),"important"):e[n]=i}}const Ca=["Webkit","Moz","ms"],Tr={};function Pu(e,t){const i=Tr[t];if(i)return i;let n=ei(t);if(n!=="filter"&&n in e)return Tr[t]=n;n=Sl(n);for(let s=0;s<Ca.length;s++){const r=Ca[s]+n;if(r in e)return Tr[t]=r}return t}const xa="http://www.w3.org/1999/xlink";function Pa(e,t,i,n,s,r=Ac(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(xa,t.slice(6,t.length)):e.setAttributeNS(xa,t,i):i==null||r&&!Cl(i)?e.removeAttribute(t):e.setAttribute(t,r?"":Ve(i)?String(i):i)}function Ea(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?bh(i):i);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(a!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const a=typeof e[t];a==="boolean"?i=Cl(i):i==null&&a==="string"?(i="",o=!0):a==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(s||t)}function Eu(e,t,i,n){e.addEventListener(t,i,n)}function Tu(e,t,i,n){e.removeEventListener(t,i,n)}const Ta=Symbol("_vei");function Au(e,t,i,n,s=null){const r=e[Ta]||(e[Ta]={}),o=r[t];if(n&&o)o.value=n;else{const[a,l]=Mu(t);if(n){const h=r[t]=Nu(n,s);Eu(e,a,h,l)}else o&&(Tu(e,a,o,l),r[t]=void 0)}}const Aa=/(?:Once|Passive|Capture)$/;function Mu(e){let t;if(Aa.test(e)){t={};let n;for(;n=e.match(Aa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ri(e.slice(2)),t]}let Ar=0;const Ru=Promise.resolve(),Ou=()=>Ar||(Ru.then(()=>Ar=0),Ar=Date.now());function Nu(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;Me(Fu(n,i.value),t,5,[n])};return i.value=e,i.attached=Ou(),i}function Fu(e,t){if(at(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Ma=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ku=(e,t,i,n,s,r)=>{const o=s==="svg";t==="class"?bu(e,n,o):t==="style"?xu(e,i,n):us(t)?po(t)||Au(e,t,i,n,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Lu(e,t,n,o))?(Ea(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Pa(e,t,n,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(n))?Ea(e,ei(t),n,r,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Pa(e,t,n,o))};function Lu(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Ma(t)&&lt(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ma(t)&&Bt(i)?!1:t in e}const Du=["ctrl","shift","alt","meta"],Gu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Du.some(i=>e[`${i}Key`]&&!t.includes(i))},w5=(e,t)=>{const i=e._withMods||(e._withMods={}),n=t.join(".");return i[n]||(i[n]=(s,...r)=>{for(let o=0;o<t.length;o++){const a=Gu[t[o]];if(a&&a(s,t))return}return e(s,...r)})},Iu={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},C5=(e,t)=>{const i=e._withKeys||(e._withKeys={}),n=t.join(".");return i[n]||(i[n]=s=>{if(!("key"in s))return;const r=ri(s.key);if(t.some(o=>o===r||Iu[o]===r))return e(s)})},Uu=Wt({patchProp:ku},yu);let Ra;function Bu(){return Ra||(Ra=$0(Uu))}const Vu=(...e)=>{const t=Bu().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=Hu(n);if(!s)return;const r=t._component;!lt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=i(s,!1,$u(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function $u(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Hu(e){return Bt(e)?document.querySelector(e):e}const zu="modulepreload",Wu=function(e){return"/visu-bench/"+e},Oa={},Mr=function(t,i,n){let s=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(i.map(l=>{if(l=Wu(l),l in Oa)return;Oa[l]=!0;const h=l.endsWith(".css"),c=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const u=document.createElement("link");if(u.rel=h?"stylesheet":zu,h||(u.as="script"),u.crossOrigin="",u.href=l,a&&u.setAttribute("nonce",a),document.head.appendChild(u),h)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})};class ju{constructor(t,i={}){K(this,"name","VisuPluginContextmenu");K(this,"isOpen",!1);K(this,"_handleContextmenu",this.handleContextmenu.bind(this));this.stage=t}handleContextmenu(t){t.preventDefault()}open(){this.isOpen||(this.isOpen=!0,this.stage.container().addEventListener("contextmenu",this._handleContextmenu))}close(){this.isOpen&&(this.isOpen=!1,this.stage.container().removeEventListener("contextmenu",this._handleContextmenu))}}const Sh="visu-stage",Ue={GROUP:"visu-workspace-group",CANVAS:"visu-workspace-canvas"},wi={MAIN:"visu-layer-main",STATIC:"visu-layer-static"};function Ku(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(s){s(i)}),(n=e.get("*"))&&n.slice().map(function(s){s(t,i)})}}}const Jt=Ku();class Yu{constructor(t,i={}){K(this,"name","VisuPluginResize");K(this,"isOpen",!1);K(this,"resizeObserver");K(this,"main");K(this,"canvas");this.stage=t,this.main=this.stage.findOne(`#${wi.MAIN}`),this.canvas=this.stage.findOne(`#${Ue.GROUP}`),this.resizeObserver=new ResizeObserver(n=>{const{width:s,height:r}=n[0].contentRect;this.stage.setSize({width:s,height:r}),this.viewportCenter(s,r),Jt.emit("visu-resize",{width:s,height:r}),this.stage.draw()})}open(){this.isOpen||(this.isOpen=!0,this.resizeObserver.observe(this.stage.container()))}close(){this.isOpen&&(this.isOpen=!1,this.resizeObserver.unobserve(this.stage.container()))}viewportCenter(t,i){const n={x:(t-this.canvas.width()*this.main.scaleX())/2,y:(i-this.canvas.height()*this.main.scaleY())/2};this.canvas.setAbsolutePosition(n)}}var Na=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uo={exports:{}},bs={},wh={},ct={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e._registerNode=e.Konva=e.glob=void 0;const t=Math.PI/180;function i(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}e.glob=typeof Na<"u"?Na:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},e.Konva={_global:e.glob,version:"9.3.16",isBrowser:i(),isUnminified:/param/.test((function(s){}).toString()),dblClickWindow:400,getAngle(s){return e.Konva.angleDeg?s*t:s},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return e.Konva.DD.isDragging},isTransforming(){var s;return(s=e.Konva.Transformer)===null||s===void 0?void 0:s.isTransforming()},isDragReady(){return!!e.Konva.DD.node},releaseCanvasOnDestroy:!0,document:e.glob.document,_injectGlobal(s){e.glob.Konva=s}};const n=s=>{e.Konva[s.prototype.getClassName()]=s};e._registerNode=n,e.Konva._injectGlobal(e.Konva)})(ct);var Ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Util=e.Transform=void 0;const t=ct;class i{constructor(_=[1,0,0,1,0,0]){this.dirty=!1,this.m=_&&_.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new i(this.m)}copyInto(_){_.m[0]=this.m[0],_.m[1]=this.m[1],_.m[2]=this.m[2],_.m[3]=this.m[3],_.m[4]=this.m[4],_.m[5]=this.m[5]}point(_){const v=this.m;return{x:v[0]*_.x+v[2]*_.y+v[4],y:v[1]*_.x+v[3]*_.y+v[5]}}translate(_,v){return this.m[4]+=this.m[0]*_+this.m[2]*v,this.m[5]+=this.m[1]*_+this.m[3]*v,this}scale(_,v){return this.m[0]*=_,this.m[1]*=_,this.m[2]*=v,this.m[3]*=v,this}rotate(_){const v=Math.cos(_),A=Math.sin(_),N=this.m[0]*v+this.m[2]*A,x=this.m[1]*v+this.m[3]*A,R=this.m[0]*-A+this.m[2]*v,S=this.m[1]*-A+this.m[3]*v;return this.m[0]=N,this.m[1]=x,this.m[2]=R,this.m[3]=S,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(_,v){const A=this.m[0]+this.m[2]*v,N=this.m[1]+this.m[3]*v,x=this.m[2]+this.m[0]*_,R=this.m[3]+this.m[1]*_;return this.m[0]=A,this.m[1]=N,this.m[2]=x,this.m[3]=R,this}multiply(_){const v=this.m[0]*_.m[0]+this.m[2]*_.m[1],A=this.m[1]*_.m[0]+this.m[3]*_.m[1],N=this.m[0]*_.m[2]+this.m[2]*_.m[3],x=this.m[1]*_.m[2]+this.m[3]*_.m[3],R=this.m[0]*_.m[4]+this.m[2]*_.m[5]+this.m[4],S=this.m[1]*_.m[4]+this.m[3]*_.m[5]+this.m[5];return this.m[0]=v,this.m[1]=A,this.m[2]=N,this.m[3]=x,this.m[4]=R,this.m[5]=S,this}invert(){const _=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),v=this.m[3]*_,A=-this.m[1]*_,N=-this.m[2]*_,x=this.m[0]*_,R=_*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),S=_*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=v,this.m[1]=A,this.m[2]=N,this.m[3]=x,this.m[4]=R,this.m[5]=S,this}getMatrix(){return this.m}decompose(){const _=this.m[0],v=this.m[1],A=this.m[2],N=this.m[3],x=this.m[4],R=this.m[5],S=_*N-v*A,T={x,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(_!=0||v!=0){const O=Math.sqrt(_*_+v*v);T.rotation=v>0?Math.acos(_/O):-Math.acos(_/O),T.scaleX=O,T.scaleY=S/O,T.skewX=(_*A+v*N)/S,T.skewY=0}else if(A!=0||N!=0){const O=Math.sqrt(A*A+N*N);T.rotation=Math.PI/2-(N>0?Math.acos(-A/O):-Math.acos(A/O)),T.scaleX=S/O,T.scaleY=O,T.skewX=0,T.skewY=(_*A+v*N)/S}return T.rotation=e.Util._getRotation(T.rotation),T}}e.Transform=i;let n="[object Array]",s="[object Number]",r="[object String]",o="[object Boolean]",a=Math.PI/180,l=180/Math.PI,h="#",c="",u="0",d="Konva warning: ",f="Konva error: ",p="rgb(",m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},b=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,y=[];const P=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(g){setTimeout(g,60)};e.Util={_isElement(g){return!!(g&&g.nodeType==1)},_isFunction(g){return!!(g&&g.constructor&&g.call&&g.apply)},_isPlainObject(g){return!!g&&g.constructor===Object},_isArray(g){return Object.prototype.toString.call(g)===n},_isNumber(g){return Object.prototype.toString.call(g)===s&&!isNaN(g)&&isFinite(g)},_isString(g){return Object.prototype.toString.call(g)===r},_isBoolean(g){return Object.prototype.toString.call(g)===o},isObject(g){return g instanceof Object},isValidSelector(g){if(typeof g!="string")return!1;const _=g[0];return _==="#"||_==="."||_===_.toUpperCase()},_sign(g){return g===0||g>0?1:-1},requestAnimFrame(g){y.push(g),y.length===1&&P(function(){const _=y;y=[],_.forEach(function(v){v()})})},createCanvasElement(){const g=document.createElement("canvas");try{g.style=g.style||{}}catch{}return g},createImageElement(){return document.createElement("img")},_isInDocument(g){for(;g=g.parentNode;)if(g==document)return!0;return!1},_urlToImage(g,_){const v=e.Util.createImageElement();v.onload=function(){_(v)},v.src=g},_rgbToHex(g,_,v){return((1<<24)+(g<<16)+(_<<8)+v).toString(16).slice(1)},_hexToRgb(g){g=g.replace(h,c);const _=parseInt(g,16);return{r:_>>16&255,g:_>>8&255,b:_&255}},getRandomColor(){let g=(Math.random()*16777215<<0).toString(16);for(;g.length<6;)g=u+g;return h+g},getRGB(g){let _;return g in m?(_=m[g],{r:_[0],g:_[1],b:_[2]}):g[0]===h?this._hexToRgb(g.substring(1)):g.substr(0,4)===p?(_=b.exec(g.replace(/ /g,"")),{r:parseInt(_[1],10),g:parseInt(_[2],10),b:parseInt(_[3],10)}):{r:0,g:0,b:0}},colorToRGBA(g){return g=g||"black",e.Util._namedColorToRBA(g)||e.Util._hex3ColorToRGBA(g)||e.Util._hex4ColorToRGBA(g)||e.Util._hex6ColorToRGBA(g)||e.Util._hex8ColorToRGBA(g)||e.Util._rgbColorToRGBA(g)||e.Util._rgbaColorToRGBA(g)||e.Util._hslColorToRGBA(g)},_namedColorToRBA(g){const _=m[g.toLowerCase()];return _?{r:_[0],g:_[1],b:_[2],a:1}:null},_rgbColorToRGBA(g){if(g.indexOf("rgb(")===0){g=g.match(/rgb\(([^)]+)\)/)[1];const _=g.split(/ *, */).map(Number);return{r:_[0],g:_[1],b:_[2],a:1}}},_rgbaColorToRGBA(g){if(g.indexOf("rgba(")===0){g=g.match(/rgba\(([^)]+)\)/)[1];const _=g.split(/ *, */).map((v,A)=>v.slice(-1)==="%"?A===3?parseInt(v)/100:parseInt(v)/100*255:Number(v));return{r:_[0],g:_[1],b:_[2],a:_[3]}}},_hex8ColorToRGBA(g){if(g[0]==="#"&&g.length===9)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:parseInt(g.slice(7,9),16)/255}},_hex6ColorToRGBA(g){if(g[0]==="#"&&g.length===7)return{r:parseInt(g.slice(1,3),16),g:parseInt(g.slice(3,5),16),b:parseInt(g.slice(5,7),16),a:1}},_hex4ColorToRGBA(g){if(g[0]==="#"&&g.length===5)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:parseInt(g[4]+g[4],16)/255}},_hex3ColorToRGBA(g){if(g[0]==="#"&&g.length===4)return{r:parseInt(g[1]+g[1],16),g:parseInt(g[2]+g[2],16),b:parseInt(g[3]+g[3],16),a:1}},_hslColorToRGBA(g){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(g)){const[_,...v]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(g),A=Number(v[0])/360,N=Number(v[1])/100,x=Number(v[2])/100;let R,S,T;if(N===0)return T=x*255,{r:Math.round(T),g:Math.round(T),b:Math.round(T),a:1};x<.5?R=x*(1+N):R=x+N-x*N;const O=2*x-R,j=[0,0,0];for(let et=0;et<3;et++)S=A+1/3*-(et-1),S<0&&S++,S>1&&S--,6*S<1?T=O+(R-O)*6*S:2*S<1?T=R:3*S<2?T=O+(R-O)*(2/3-S)*6:T=O,j[et]=T*255;return{r:Math.round(j[0]),g:Math.round(j[1]),b:Math.round(j[2]),a:1}}},haveIntersection(g,_){return!(_.x>g.x+g.width||_.x+_.width<g.x||_.y>g.y+g.height||_.y+_.height<g.y)},cloneObject(g){const _={};for(const v in g)this._isPlainObject(g[v])?_[v]=this.cloneObject(g[v]):this._isArray(g[v])?_[v]=this.cloneArray(g[v]):_[v]=g[v];return _},cloneArray(g){return g.slice(0)},degToRad(g){return g*a},radToDeg(g){return g*l},_degToRad(g){return e.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),e.Util.degToRad(g)},_radToDeg(g){return e.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),e.Util.radToDeg(g)},_getRotation(g){return t.Konva.angleDeg?e.Util.radToDeg(g):g},_capitalize(g){return g.charAt(0).toUpperCase()+g.slice(1)},throw(g){throw new Error(f+g)},error(g){console.error(f+g)},warn(g){t.Konva.showWarnings&&console.warn(d+g)},each(g,_){for(const v in g)_(v,g[v])},_inRange(g,_,v){return _<=g&&g<v},_getProjectionToSegment(g,_,v,A,N,x){let R,S,T;const O=(g-v)*(g-v)+(_-A)*(_-A);if(O==0)R=g,S=_,T=(N-v)*(N-v)+(x-A)*(x-A);else{const j=((N-g)*(v-g)+(x-_)*(A-_))/O;j<0?(R=g,S=_,T=(g-N)*(g-N)+(_-x)*(_-x)):j>1?(R=v,S=A,T=(v-N)*(v-N)+(A-x)*(A-x)):(R=g+j*(v-g),S=_+j*(A-_),T=(R-N)*(R-N)+(S-x)*(S-x))}return[R,S,T]},_getProjectionToLine(g,_,v){const A=e.Util.cloneObject(g);let N=Number.MAX_VALUE;return _.forEach(function(x,R){if(!v&&R===_.length-1)return;const S=_[(R+1)%_.length],T=e.Util._getProjectionToSegment(x.x,x.y,S.x,S.y,g.x,g.y),O=T[0],j=T[1],et=T[2];et<N&&(A.x=O,A.y=j,N=et)}),A},_prepareArrayForTween(g,_,v){let A,N=[],x=[];if(g.length>_.length){const S=_;_=g,g=S}for(A=0;A<g.length;A+=2)N.push({x:g[A],y:g[A+1]});for(A=0;A<_.length;A+=2)x.push({x:_[A],y:_[A+1]});const R=[];return x.forEach(function(S){const T=e.Util._getProjectionToLine(S,N,v);R.push(T.x),R.push(T.y)}),R},_prepareToStringify(g){let _;g.visitedByCircularReferenceRemoval=!0;for(const v in g)if(g.hasOwnProperty(v)&&g[v]&&typeof g[v]=="object"){if(_=Object.getOwnPropertyDescriptor(g,v),g[v].visitedByCircularReferenceRemoval||e.Util._isElement(g[v]))if(_.configurable)delete g[v];else return null;else if(e.Util._prepareToStringify(g[v])===null)if(_.configurable)delete g[v];else return null}return delete g.visitedByCircularReferenceRemoval,g},_assign(g,_){for(const v in _)g[v]=_[v];return g},_getFirstPointerId(g){return g.touches?g.changedTouches[0].identifier:g.pointerId||999},releaseCanvas(...g){t.Konva.releaseCanvasOnDestroy&&g.forEach(_=>{_.width=0,_.height=0})},drawRoundedRectPath(g,_,v,A){let N=0,x=0,R=0,S=0;typeof A=="number"?N=x=R=S=Math.min(A,_/2,v/2):(N=Math.min(A[0]||0,_/2,v/2),x=Math.min(A[1]||0,_/2,v/2),S=Math.min(A[2]||0,_/2,v/2),R=Math.min(A[3]||0,_/2,v/2)),g.moveTo(N,0),g.lineTo(_-x,0),g.arc(_-x,x,x,Math.PI*3/2,0,!1),g.lineTo(_,v-S),g.arc(_-S,v-S,S,0,Math.PI/2,!1),g.lineTo(R,v),g.arc(R,v-R,R,Math.PI/2,Math.PI,!1),g.lineTo(0,N),g.arc(N,N,N,Math.PI,Math.PI*3/2,!1)}}})(Ft);var Ot={},ut={},nt={};Object.defineProperty(nt,"__esModule",{value:!0});nt.RGBComponent=qu;nt.alphaComponent=Zu;nt.getNumberValidator=Ju;nt.getNumberOrArrayOfNumbersValidator=Qu;nt.getNumberOrAutoValidator=td;nt.getStringValidator=ed;nt.getStringOrGradientValidator=id;nt.getFunctionValidator=nd;nt.getNumberArrayValidator=sd;nt.getBooleanValidator=rd;nt.getComponentValidator=od;const He=ct,Lt=Ft;function ze(e){return Lt.Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Lt.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function qu(e){return e>255?255:e<0?0:Math.round(e)}function Zu(e){return e>1?1:e<1e-4?1e-4:e}function Ju(){if(He.Konva.isUnminified)return function(e,t){return Lt.Util._isNumber(e)||Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function Qu(e){if(He.Konva.isUnminified)return function(t,i){const n=Lt.Util._isNumber(t),s=Lt.Util._isArray(t)&&t.length==e;return!n&&!s&&Lt.Util.warn(ze(t)+' is a not valid value for "'+i+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function td(){if(He.Konva.isUnminified)return function(e,t){return Lt.Util._isNumber(e)||e==="auto"||Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function ed(){if(He.Konva.isUnminified)return function(e,t){return Lt.Util._isString(e)||Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function id(){if(He.Konva.isUnminified)return function(e,t){const i=Lt.Util._isString(e),n=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return i||n||Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function nd(){if(He.Konva.isUnminified)return function(e,t){return Lt.Util._isFunction(e)||Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}}function sd(){if(He.Konva.isUnminified)return function(e,t){const i=Int8Array?Object.getPrototypeOf(Int8Array):null;return i&&e instanceof i||(Lt.Util._isArray(e)?e.forEach(function(n){Lt.Util._isNumber(n)||Lt.Util.warn('"'+t+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function rd(){if(He.Konva.isUnminified)return function(e,t){return e===!0||e===!1||Lt.Util.warn(ze(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function od(e){if(He.Konva.isUnminified)return function(t,i){return t==null||Lt.Util.isObject(t)||Lt.Util.warn(ze(t)+' is a not valid value for "'+i+'" attribute. The value should be an object with properties '+e),t}}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Factory=void 0;const t=Ft,i=nt,n="get",s="set";e.Factory={addGetterSetter(r,o,a,l,h){e.Factory.addGetter(r,o,a),e.Factory.addSetter(r,o,l,h),e.Factory.addOverloadedGetterSetter(r,o)},addGetter(r,o,a){const l=n+t.Util._capitalize(o);r.prototype[l]=r.prototype[l]||function(){const h=this.attrs[o];return h===void 0?a:h}},addSetter(r,o,a,l){const h=s+t.Util._capitalize(o);r.prototype[h]||e.Factory.overWriteSetter(r,o,a,l)},overWriteSetter(r,o,a,l){const h=s+t.Util._capitalize(o);r.prototype[h]=function(c){return a&&c!==void 0&&c!==null&&(c=a.call(this,c,o)),this._setAttr(o,c),l&&l.call(this),this}},addComponentsGetterSetter(r,o,a,l,h){let c=a.length,u=t.Util._capitalize,d=n+u(o),f=s+u(o),p,m;r.prototype[d]=function(){const y={};for(p=0;p<c;p++)m=a[p],y[m]=this.getAttr(o+u(m));return y};const b=(0,i.getComponentValidator)(a);r.prototype[f]=function(y){let P=this.attrs[o],g;l&&(y=l.call(this,y)),b&&b.call(this,y,o);for(g in y)y.hasOwnProperty(g)&&this._setAttr(o+u(g),y[g]);return y||a.forEach(_=>{this._setAttr(o+u(_),void 0)}),this._fireChangeEvent(o,P,y),h&&h.call(this),this},e.Factory.addOverloadedGetterSetter(r,o)},addOverloadedGetterSetter(r,o){const a=t.Util._capitalize(o),l=s+a,h=n+a;r.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(r,o,a,l){t.Util.error("Adding deprecated "+o);const h=n+t.Util._capitalize(o),c=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";r.prototype[h]=function(){t.Util.error(c);const u=this.attrs[o];return u===void 0?a:u},e.Factory.addSetter(r,o,l,function(){t.Util.error(c)}),e.Factory.addOverloadedGetterSetter(r,o)},backCompat(r,o){t.Util.each(o,function(a,l){const h=r.prototype[l],c=n+t.Util._capitalize(a),u=s+t.Util._capitalize(a);function d(){h.apply(this,arguments),t.Util.error('"'+a+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}r.prototype[a]=d,r.prototype[c]=d,r.prototype[u]=d})},afterSetFilter(){this._filterUpToDate=!1}}})(ut);var be={},Be={};Object.defineProperty(Be,"__esModule",{value:!0});Be.HitContext=Be.SceneContext=Be.Context=void 0;const Ch=Ft,ad=ct;function ld(e){let t=[],i=e.length,n=Ch.Util,s,r;for(s=0;s<i;s++)r=e[s],n._isNumber(r)?r=Math.round(r*1e3)/1e3:n._isString(r)||(r=r+""),t.push(r);return t}const Fa=",",hd="(",cd=")",ud="([",dd="])",fd=";",gd="()",pd="=",ka=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],md=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],_d=100;class Ss{constructor(t){this.canvas=t,ad.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,i){let n=this.traceArr,s=n.length,r="",o,a,l,h;for(o=0;o<s;o++)a=n[o],l=a.method,l?(h=a.args,r+=l,t?r+=gd:Ch.Util._isArray(h[0])?r+=ud+h.join(Fa)+dd:(i&&(h=h.map(c=>typeof c=="number"?Math.floor(c):c)),r+=hd+h.join(Fa)+cd)):(r+=a.property,t||(r+=pd+a.val)),r+=fd;return r}clearTrace(){this.traceArr=[]}_trace(t){let i=this.traceArr,n;i.push(t),n=i.length,n>=_d&&i.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const i=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,i.getWidth()/i.pixelRatio,i.getHeight()/i.pixelRatio)}_applyLineCap(t){const i=t.attrs.lineCap;i&&this.setAttr("lineCap",i)}_applyOpacity(t){const i=t.getAbsoluteOpacity();i!==1&&this.setAttr("globalAlpha",i)}_applyLineJoin(t){const i=t.attrs.lineJoin;i&&this.setAttr("lineJoin",i)}setAttr(t,i){this._context[t]=i}arc(t,i,n,s,r,o){this._context.arc(t,i,n,s,r,o)}arcTo(t,i,n,s,r){this._context.arcTo(t,i,n,s,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,i,n,s,r,o){this._context.bezierCurveTo(t,i,n,s,r,o)}clearRect(t,i,n,s){this._context.clearRect(t,i,n,s)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,i){const n=arguments;if(n.length===2)return this._context.createImageData(t,i);if(n.length===1)return this._context.createImageData(t)}createLinearGradient(t,i,n,s){return this._context.createLinearGradient(t,i,n,s)}createPattern(t,i){return this._context.createPattern(t,i)}createRadialGradient(t,i,n,s,r,o){return this._context.createRadialGradient(t,i,n,s,r,o)}drawImage(t,i,n,s,r,o,a,l,h){const c=arguments,u=this._context;c.length===3?u.drawImage(t,i,n):c.length===5?u.drawImage(t,i,n,s,r):c.length===9&&u.drawImage(t,i,n,s,r,o,a,l,h)}ellipse(t,i,n,s,r,o,a,l){this._context.ellipse(t,i,n,s,r,o,a,l)}isPointInPath(t,i,n,s){return n?this._context.isPointInPath(n,t,i,s):this._context.isPointInPath(t,i,s)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,i,n,s){this._context.fillRect(t,i,n,s)}strokeRect(t,i,n,s){this._context.strokeRect(t,i,n,s)}fillText(t,i,n,s){s?this._context.fillText(t,i,n,s):this._context.fillText(t,i,n)}measureText(t){return this._context.measureText(t)}getImageData(t,i,n,s){return this._context.getImageData(t,i,n,s)}lineTo(t,i){this._context.lineTo(t,i)}moveTo(t,i){this._context.moveTo(t,i)}rect(t,i,n,s){this._context.rect(t,i,n,s)}roundRect(t,i,n,s,r){this._context.roundRect(t,i,n,s,r)}putImageData(t,i,n){this._context.putImageData(t,i,n)}quadraticCurveTo(t,i,n,s){this._context.quadraticCurveTo(t,i,n,s)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,i){this._context.scale(t,i)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,i,n,s,r,o){this._context.setTransform(t,i,n,s,r,o)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,i,n,s){this._context.strokeText(t,i,n,s)}transform(t,i,n,s,r,o){this._context.transform(t,i,n,s,r,o)}translate(t,i){this._context.translate(t,i)}_enableTrace(){let t=this,i=ka.length,n=this.setAttr,s,r;const o=function(a){let l=t[a],h;t[a]=function(){return r=ld(Array.prototype.slice.call(arguments,0)),h=l.apply(t,arguments),t._trace({method:a,args:r}),h}};for(s=0;s<i;s++)o(ka[s]);t.setAttr=function(){n.apply(t,arguments);const a=arguments[0];let l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),t._trace({property:a,val:l})}}_applyGlobalCompositeOperation(t){const i=t.attrs.globalCompositeOperation;!i||i==="source-over"||this.setAttr("globalCompositeOperation",i)}}Be.Context=Ss;md.forEach(function(e){Object.defineProperty(Ss.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class yd extends Ss{constructor(t,{willReadFrequently:i=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:i})}_fillColor(t){const i=t.fill();this.setAttr("fillStyle",i),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const i=t._getLinearGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fillRadialGradient(t){const i=t._getRadialGradient();i&&(this.setAttr("fillStyle",i),t._fillFunc(this))}_fill(t){const i=t.fill(),n=t.getFillPriority();if(i&&n==="color"){this._fillColor(t);return}const s=t.getFillPatternImage();if(s&&n==="pattern"){this._fillPattern(t);return}const r=t.getFillLinearGradientColorStops();if(r&&n==="linear-gradient"){this._fillLinearGradient(t);return}const o=t.getFillRadialGradientColorStops();if(o&&n==="radial-gradient"){this._fillRadialGradient(t);return}i?this._fillColor(t):s?this._fillPattern(t):r?this._fillLinearGradient(t):o&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const i=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),s=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(i.x,i.y,n.x,n.y);if(s){for(let o=0;o<s.length;o+=2)r.addColorStop(s[o],s[o+1]);this.setAttr("strokeStyle",r)}}_stroke(t){const i=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t),i&&t.dashEnabled()&&(this.setLineDash(i),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var i,n,s;const r=(i=t.getShadowRGBA())!==null&&i!==void 0?i:"black",o=(n=t.getShadowBlur())!==null&&n!==void 0?n:5,a=(s=t.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},l=t.getAbsoluteScale(),h=this.canvas.getPixelRatio(),c=l.x*h,u=l.y*h;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",o*Math.min(Math.abs(c),Math.abs(u))),this.setAttr("shadowOffsetX",a.x*c),this.setAttr("shadowOffsetY",a.y*u)}}Be.SceneContext=yd;class vd extends Ss{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const i=t.getStrokeScaleEnabled();if(!i){this.save();const r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(t);const n=t.hitStrokeWidth(),s=n==="auto"?t.strokeWidth():n;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),i||this.restore()}}}Be.HitContext=vd;Object.defineProperty(be,"__esModule",{value:!0});be.HitCanvas=be.SceneCanvas=be.Canvas=void 0;const ss=Ft,xh=Be,Ph=ct,bd=ut,Sd=nt;let Un;function wd(){if(Un)return Un;const e=ss.Util.createCanvasElement(),t=e.getContext("2d");return Un=function(){const i=Ph.Konva._global.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return i/n}(),ss.Util.releaseCanvas(e),Un}class ws{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const n=(t||{}).pixelRatio||Ph.Konva.pixelRatio||wd();this.pixelRatio=n,this._canvas=ss.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const i=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/i,this.getHeight()/i)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const i=this.pixelRatio;this.getContext()._context.scale(i,i)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,i){this.setWidth(t||0),this.setHeight(i||0)}toDataURL(t,i){try{return this._canvas.toDataURL(t,i)}catch{try{return this._canvas.toDataURL()}catch(s){return ss.Util.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}be.Canvas=ws;bd.Factory.addGetterSetter(ws,"pixelRatio",void 0,(0,Sd.getNumberValidator)());class Cd extends ws{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new xh.SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}be.SceneCanvas=Cd;class xd extends ws{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new xh.HitContext(this),this.setSize(t.width,t.height)}}be.HitCanvas=xd;var Cs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DD=void 0;const t=ct,i=Ft;e.DD={get isDragging(){let n=!1;return e.DD._dragElements.forEach(s=>{s.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return e.DD._dragElements.forEach(s=>{n=s.node}),n},_dragElements:new Map,_drag(n){const s=[];e.DD._dragElements.forEach((r,o)=>{const{node:a}=r,l=a.getStage();l.setPointersPositions(n),r.pointerId===void 0&&(r.pointerId=i.Util._getFirstPointerId(n));const h=l._changedPointerPositions.find(c=>c.id===r.pointerId);if(h){if(r.dragStatus!=="dragging"){const c=a.dragDistance();if(Math.max(Math.abs(h.x-r.startPointerPos.x),Math.abs(h.y-r.startPointerPos.y))<c||(a.startDrag({evt:n}),!a.isDragging()))return}a._setDragPosition(n,r),s.push(a)}}),s.forEach(r=>{r.fire("dragmove",{type:"dragmove",target:r,evt:n},!0)})},_endDragBefore(n){const s=[];e.DD._dragElements.forEach(r=>{const{node:o}=r,a=o.getStage();if(n&&a.setPointersPositions(n),!a._changedPointerPositions.find(c=>c.id===r.pointerId))return;(r.dragStatus==="dragging"||r.dragStatus==="stopped")&&(e.DD.justDragged=!0,t.Konva._mouseListenClick=!1,t.Konva._touchListenClick=!1,t.Konva._pointerListenClick=!1,r.dragStatus="stopped");const h=r.node.getLayer()||r.node instanceof t.Konva.Stage&&r.node;h&&s.indexOf(h)===-1&&s.push(h)}),s.forEach(r=>{r.draw()})},_endDragAfter(n){e.DD._dragElements.forEach((s,r)=>{s.dragStatus==="stopped"&&s.node.fire("dragend",{type:"dragend",target:s.node,evt:n},!0),s.dragStatus!=="dragging"&&e.DD._dragElements.delete(r)})}},t.Konva.isBrowser&&(window.addEventListener("mouseup",e.DD._endDragBefore,!0),window.addEventListener("touchend",e.DD._endDragBefore,!0),window.addEventListener("touchcancel",e.DD._endDragBefore,!0),window.addEventListener("mousemove",e.DD._drag),window.addEventListener("touchmove",e.DD._drag),window.addEventListener("mouseup",e.DD._endDragAfter,!1),window.addEventListener("touchend",e.DD._endDragAfter,!1),window.addEventListener("touchcancel",e.DD._endDragAfter,!1))})(Cs);Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Node=void 0;const dt=Ft,On=ut,ln=be,Ke=ct,fe=Cs,Gt=nt,Xn="absoluteOpacity",Bn="allEventListeners",Le="absoluteTransform",La="absoluteScale",_i="canvas",Pd="Change",Ed="children",Td="konva",Qr="listening",Da="mouseenter",Ga="mouseleave",Ia="set",Ua="Shape",qn=" ",Ba="stage",Ye="transform",Ad="Stage",to="visible",Md=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(qn);let Rd=1;class rt{constructor(t){this._id=Rd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===Ye||t===Le)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,i){let n=this._cache.get(t);return(n===void 0||(t===Ye||t===Le)&&n.dirty===!0)&&(n=i.call(this),this._cache.set(t,n)),n}_calculate(t,i,n){if(!this._attachedDepsListeners.get(t)){const s=i.map(r=>r+"Change.konva").join(qn);this.on(s,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(_i)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===Le&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(_i)){const{scene:t,filter:i,hit:n}=this._cache.get(_i);dt.Util.releaseCanvas(t,i,n),this._cache.delete(_i)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const i=t||{};let n={};(i.x===void 0||i.y===void 0||i.width===void 0||i.height===void 0)&&(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(i.width||n.width),r=Math.ceil(i.height||n.height),o=i.pixelRatio,a=i.x===void 0?Math.floor(n.x):i.x,l=i.y===void 0?Math.floor(n.y):i.y,h=i.offset||0,c=i.drawBorder||!1,u=i.hitCanvasPixelRatio||1;if(!s||!r){dt.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const d=Math.abs(Math.round(n.x)-a)>.5?1:0,f=Math.abs(Math.round(n.y)-l)>.5?1:0;s+=h*2+d,r+=h*2+f,a-=h,l-=h;const p=new ln.SceneCanvas({pixelRatio:o,width:s,height:r}),m=new ln.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),b=new ln.HitCanvas({pixelRatio:u,width:s,height:r}),y=p.getContext(),P=b.getContext();return b.isCache=!0,p.isCache=!0,this._cache.delete(_i),this._filterUpToDate=!1,i.imageSmoothingEnabled===!1&&(p.getContext()._context.imageSmoothingEnabled=!1,m.getContext()._context.imageSmoothingEnabled=!1),y.save(),P.save(),y.translate(-a,-l),P.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Xn),this._clearSelfAndDescendantCache(La),this.drawScene(p,this),this.drawHit(b,this),this._isUnderCache=!1,y.restore(),P.restore(),c&&(y.save(),y.beginPath(),y.rect(0,0,s,r),y.closePath(),y.setAttr("strokeStyle","red"),y.setAttr("lineWidth",5),y.stroke(),y.restore()),this._cache.set(_i,{scene:p,filter:m,hit:b,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(_i)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,i){const n=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let s=1/0,r=1/0,o=-1/0,a=-1/0;const l=this.getAbsoluteTransform(i);return n.forEach(function(h){const c=l.point(h);s===void 0&&(s=o=c.x,r=a=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),{x:s,y:r,width:o-s,height:a-r}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const i=this._getCanvasCache();t.translate(i.x,i.y);const n=this._getCachedSceneCanvas(),s=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/s,n.height/s),t.restore()}_drawCachedHitCanvas(t){const i=this._getCanvasCache(),n=i.hit;t.save(),t.translate(i.x,i.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),i=this._getCanvasCache(),n=i.scene,s=i.filter,r=s.getContext(),o,a,l,h;if(t){if(!this._filterUpToDate){const c=n.pixelRatio;s.setSize(n.width/n.pixelRatio,n.height/n.pixelRatio);try{for(o=t.length,r.clear(),r.drawImage(n._canvas,0,0,n.getWidth()/c,n.getHeight()/c),a=r.getImageData(0,0,s.getWidth(),s.getHeight()),l=0;l<o;l++){if(h=t[l],typeof h!="function"){dt.Util.error("Filter should be type of function, but got "+typeof h+" instead. Please check correct filters");continue}h.call(this,a),r.putImageData(a,0,0)}}catch(u){dt.Util.error("Unable to apply filter. "+u.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return n}on(t,i){if(this._cache&&this._cache.delete(Bn),arguments.length===3)return this._delegate.apply(this,arguments);let n=t.split(qn),s=n.length,r,o,a,l,h;for(r=0;r<s;r++)o=n[r],a=o.split("."),l=a[0],h=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:h,handler:i});return this}off(t,i){let n=(t||"").split(qn),s=n.length,r,o,a,l,h,c;if(this._cache&&this._cache.delete(Bn),!t)for(o in this.eventListeners)this._off(o);for(r=0;r<s;r++)if(a=n[r],l=a.split("."),h=l[0],c=l[1],h)this.eventListeners[h]&&this._off(h,c,i);else for(o in this.eventListeners)this._off(o,c,i);return this}dispatchEvent(t){const i={target:this,type:t.type,evt:t};return this.fire(t.type,i),this}addEventListener(t,i){return this.on(t,function(n){i.call(this,n.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,i,n){const s=this;this.on(t,function(r){const o=r.target.findAncestors(i,!0,s);for(let a=0;a<o.length;a++)r=dt.Util.cloneObject(r),r.currentTarget=o[a],n.call(o[a],r)})}remove(){return this.isDragging()&&this.stopDrag(),fe.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Le),this._clearSelfAndDescendantCache(Xn),this._clearSelfAndDescendantCache(La),this._clearSelfAndDescendantCache(Ba),this._clearSelfAndDescendantCache(to),this._clearSelfAndDescendantCache(Qr)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const i="get"+dt.Util._capitalize(t);return dt.Util._isFunction(this[i])?this[i]():this.attrs[t]}getAncestors(){let t=this.getParent(),i=[];for(;t;)i.push(t),t=t.getParent();return i}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let i,n;if(!t)return this;for(i in t)i!==Ed&&(n=Ia+dt.Util._capitalize(i),dt.Util._isFunction(this[n])?this[n](t[i]):this._setAttr(i,t[i]))}),this}isListening(){return this._getCache(Qr,this._isListening)}_isListening(t){if(!this.listening())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isListening(t):!0}isVisible(){return this._getCache(to,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const n=this.getParent();return n&&n!==t&&this!==t?n._isVisible(t):!0}shouldDrawHit(t,i=!1){if(t)return this._isVisible(t)&&this._isListening(t);const n=this.getLayer();let s=!1;fe.DD._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===n)&&(s=!0)});const r=!i&&!Ke.Konva.hitOnDragEnabled&&(s||Ke.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),i=this,n=0,s,r,o,a;function l(c){for(s=[],r=c.length,o=0;o<r;o++)a=c[o],n++,a.nodeType!==Ua&&(s=s.concat(a.getChildren().slice())),a._id===i._id&&(o=r);s.length>0&&s[0].getDepth()<=t&&l(s)}const h=this.getStage();return i.nodeType!==Ad&&h&&l(h.getChildren()),n}getDepth(){let t=0,i=this.parent;for(;i;)t++,i=i.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ye),this._clearSelfAndDescendantCache(Le)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const i=t.getPointerPosition();if(!i)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(i)}getAbsolutePosition(t){let i=!1,n=this.parent;for(;n;){if(n.isCached()){i=!0;break}n=n.parent}i&&!t&&(t=!0);const s=this.getAbsoluteTransform(t).getMatrix(),r=new dt.Transform,o=this.offset();return r.m=s.slice(),r.translate(o.x,o.y),r.getTranslation()}setAbsolutePosition(t){const{x:i,y:n,...s}=this._clearTransform();this.attrs.x=i,this.attrs.y=n,this._clearCache(Ye);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(t.x,t.y),t={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(s),this.setPosition({x:t.x,y:t.y}),this._clearCache(Ye),this._clearSelfAndDescendantCache(Le),this}_setTransform(t){let i;for(i in t)this.attrs[i]=t[i]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let i=t.x,n=t.y,s=this.x(),r=this.y();return i!==void 0&&(s+=i),n!==void 0&&(r+=n),this.setPosition({x:s,y:r}),this}_eachAncestorReverse(t,i){let n=[],s=this.getParent(),r,o;if(!(i&&i._id===this._id)){for(n.unshift(this);s&&(!i||s._id!==i._id);)n.unshift(s),s=s.parent;for(r=n.length,o=0;o<r;o++)t(n[o])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return dt.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return dt.Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,i=this.parent.getChildren().length;return t<i-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return dt.Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return dt.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return dt.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&dt.Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const i=this.index;return this.parent.children.splice(i,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Xn,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const i=this.getParent();return i&&!i._isUnderCache&&(t*=i.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),i,n,s,r,o;const a={attrs:{},className:this.getClassName()};for(i in t)n=t[i],o=dt.Util.isObject(n)&&!dt.Util._isPlainObject(n)&&!dt.Util._isArray(n),!o&&(s=typeof this[i]=="function"&&this[i],delete t[i],r=s?s.call(this):null,t[i]=n,r!==n&&(a.attrs[i]=n));return dt.Util._prepareToStringify(a)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,i,n){const s=[];i&&this._isMatch(t)&&s.push(this);let r=this.parent;for(;r;){if(r===n)return s;r._isMatch(t)&&s.push(r),r=r.parent}return s}isAncestorOf(t){return!1}findAncestor(t,i,n){return this.findAncestors(t,i,n)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let i=t.replace(/ /g,"").split(","),n=i.length,s,r;for(s=0;s<n;s++)if(r=i[s],dt.Util.isValidSelector(r)||(dt.Util.warn('Selector "'+r+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),dt.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),dt.Util.warn("Konva is awesome, right?")),r.charAt(0)==="#"){if(this.id()===r.slice(1))return!0}else if(r.charAt(0)==="."){if(this.hasName(r.slice(1)))return!0}else if(this.className===r||this.nodeType===r)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(Ba,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,i={},n){return i.target=i.target||this,n?this._fireAndBubble(t,i):this._fire(t,i),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(Le,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let i;if(t)return i=new dt.Transform,this._eachAncestorReverse(function(n){const s=n.transformsEnabled();s==="all"?i.multiply(n.getTransform()):s==="position"&&i.translate(n.x()-n.offsetX(),n.y()-n.offsetY())},t),i;{i=this._cache.get(Le)||new dt.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(i):i.reset();const n=this.transformsEnabled();if(n==="all")i.multiply(this.getTransform());else if(n==="position"){const s=this.attrs.x||0,r=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;i.translate(s-o,r-a)}return i.dirty=!1,i}}getAbsoluteScale(t){let i=this;for(;i;)i._isUnderCache&&(t=i),i=i.getParent();const s=this.getAbsoluteTransform(t).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ye,this._getTransform)}_getTransform(){var t,i;const n=this._cache.get(Ye)||new dt.Transform;n.reset();const s=this.x(),r=this.y(),o=Ke.Konva.getAngle(this.rotation()),a=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,l=(i=this.attrs.scaleY)!==null&&i!==void 0?i:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,u=this.attrs.offsetX||0,d=this.attrs.offsetY||0;return(s!==0||r!==0)&&n.translate(s,r),o!==0&&n.rotate(o),(h!==0||c!==0)&&n.skew(h,c),(a!==1||l!==1)&&n.scale(a,l),(u!==0||d!==0)&&n.translate(-1*u,-1*d),n.dirty=!1,n}clone(t){let i=dt.Util.cloneObject(this.attrs),n,s,r,o,a;for(n in t)i[n]=t[n];const l=new this.constructor(i);for(n in this.eventListeners)for(s=this.eventListeners[n],r=s.length,o=0;o<r;o++)a=s[o],a.name.indexOf(Td)<0&&(l.eventListeners[n]||(l.eventListeners[n]=[]),l.eventListeners[n].push(a));return l}_toKonvaCanvas(t){t=t||{};const i=this.getClientRect(),n=this.getStage(),s=t.x!==void 0?t.x:Math.floor(i.x),r=t.y!==void 0?t.y:Math.floor(i.y),o=t.pixelRatio||1,a=new ln.SceneCanvas({width:t.width||Math.ceil(i.width)||(n?n.width():0),height:t.height||Math.ceil(i.height)||(n?n.height():0),pixelRatio:o}),l=a.getContext(),h=new ln.SceneCanvas({width:a.width/a.pixelRatio+Math.abs(s),height:a.height/a.pixelRatio+Math.abs(r),pixelRatio:a.pixelRatio});return t.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(s||r)&&l.translate(-1*s,-1*r),this.drawScene(a,void 0,h),l.restore(),a}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const i=t.mimeType||null,n=t.quality||null,s=this._toKonvaCanvas(t).toDataURL(i,n);return t.callback&&t.callback(s),s}toImage(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,dt.Util._urlToImage(this.toDataURL(t),function(r){i(r),s==null||s(r)})}catch(s){n(s)}})}toBlob(t){return new Promise((i,n)=>{try{const s=t==null?void 0:t.callback;s&&delete t.callback,this.toCanvas(t).toBlob(r=>{i(r),s==null||s(r)},t==null?void 0:t.mimeType,t==null?void 0:t.quality)}catch(s){n(s)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Ke.Konva.dragDistance}_off(t,i,n){let s=this.eventListeners[t],r,o,a;for(r=0;r<s.length;r++)if(o=s[r].name,a=s[r].handler,(o!=="konva"||i==="konva")&&(!i||o===i)&&(!n||n===a)){if(s.splice(r,1),s.length===0){delete this.eventListeners[t];break}r--}}_fireChangeEvent(t,i,n){this._fire(t+Pd,{oldVal:i,newVal:n})}addName(t){if(!this.hasName(t)){const i=this.name(),n=i?i+" "+t:t;this.name(n)}return this}hasName(t){if(!t)return!1;const i=this.name();return i?(i||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const i=(this.name()||"").split(/\s/g),n=i.indexOf(t);return n!==-1&&(i.splice(n,1),this.name(i.join(" "))),this}setAttr(t,i){const n=this[Ia+dt.Util._capitalize(t)];return dt.Util._isFunction(n)?n.call(this,i):this._setAttr(t,i),this}_requestDraw(){if(Ke.Konva.autoDrawEnabled){const t=this.getLayer()||this.getStage();t==null||t.batchDraw()}}_setAttr(t,i){const n=this.attrs[t];n===i&&!dt.Util.isObject(i)||(i==null?delete this.attrs[t]:this.attrs[t]=i,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,i),this._requestDraw())}_setComponentAttr(t,i,n){let s;n!==void 0&&(s=this.attrs[t],s||(this.attrs[t]=this.getAttr(t)),this.attrs[t][i]=n,this._fireChangeEvent(t,s,n))}_fireAndBubble(t,i,n){if(i&&this.nodeType===Ua&&(i.target=this),!((t===Da||t===Ga)&&(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||this.nodeType==="Stage"&&!n))){this._fire(t,i);const r=(t===Da||t===Ga)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(i&&!i.cancelBubble||!i)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,i,n):this._fireAndBubble.call(this.parent,t,i))}}_getProtoListeners(t){var i,n,s;const r=(i=this._cache.get(Bn))!==null&&i!==void 0?i:{};let o=r==null?void 0:r[t];if(o===void 0){o=[];let a=Object.getPrototypeOf(this);for(;a;){const l=(s=(n=a.eventListeners)===null||n===void 0?void 0:n[t])!==null&&s!==void 0?s:[];o.push(...l),a=Object.getPrototypeOf(a)}r[t]=o,this._cache.set(Bn,r)}return o}_fire(t,i){i=i||{},i.currentTarget=this,i.type=t;const n=this._getProtoListeners(t);if(n)for(var s=0;s<n.length;s++)n[s].handler.call(this,i);const r=this.eventListeners[t];if(r)for(var s=0;s<r.length;s++)r[s].handler.call(this,i)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const i=t?t.pointerId:void 0,n=this.getStage(),s=this.getAbsolutePosition();if(!n)return;const r=n._getPointerById(i)||n._changedPointerPositions[0]||s;fe.DD._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-s.x,y:r.y-s.y},dragStatus:"ready",pointerId:i})}startDrag(t,i=!0){fe.DD._dragElements.has(this._id)||this._createDragElement(t);const n=fe.DD._dragElements.get(this._id);n.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},i)}_setDragPosition(t,i){const n=this.getStage()._getPointerById(i.pointerId);if(!n)return;let s={x:n.x-i.offset.x,y:n.y-i.offset.y};const r=this.dragBoundFunc();if(r!==void 0){const o=r.call(this,s,t);o?s=o:dt.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(t){const i=fe.DD._dragElements.get(this._id);i&&(i.dragStatus="stopped"),fe.DD._endDragBefore(t),fe.DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=fe.DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Ke.Konva.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let s=!1;fe.DD._dragElements.forEach(r=>{this.isAncestorOf(r.node)&&(s=!0)}),s||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const i=fe.DD._dragElements.get(this._id),n=i&&i.dragStatus==="dragging",s=i&&i.dragStatus==="ready";n?this.stopDrag():s&&fe.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const i=this.getStage();if(!i)return!1;const n={x:-t.x,y:-t.y,width:i.width()+2*t.x,height:i.height()+2*t.y};return dt.Util.haveIntersection(n,this.getClientRect())}static create(t,i){return dt.Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,i)}static _createNode(t,i){let n=rt.prototype.getClassName.call(t),s=t.children,r,o,a;i&&(t.attrs.container=i),Ke.Konva[n]||(dt.Util.warn('Can not find a node with class name "'+n+'". Fallback to "Shape".'),n="Shape");const l=Ke.Konva[n];if(r=new l(t.attrs),s)for(o=s.length,a=0;a<o;a++)r.add(rt._createNode(s[a]));return r}}Ot.Node=rt;rt.prototype.nodeType="Node";rt.prototype._attrsAffectingSize=[];rt.prototype.eventListeners={};rt.prototype.on.call(rt.prototype,Md,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ye),this._clearSelfAndDescendantCache(Le)});rt.prototype.on.call(rt.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(to)});rt.prototype.on.call(rt.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Qr)});rt.prototype.on.call(rt.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Xn)});const Pt=On.Factory.addGetterSetter;Pt(rt,"zIndex");Pt(rt,"absolutePosition");Pt(rt,"position");Pt(rt,"x",0,(0,Gt.getNumberValidator)());Pt(rt,"y",0,(0,Gt.getNumberValidator)());Pt(rt,"globalCompositeOperation","source-over",(0,Gt.getStringValidator)());Pt(rt,"opacity",1,(0,Gt.getNumberValidator)());Pt(rt,"name","",(0,Gt.getStringValidator)());Pt(rt,"id","",(0,Gt.getStringValidator)());Pt(rt,"rotation",0,(0,Gt.getNumberValidator)());On.Factory.addComponentsGetterSetter(rt,"scale",["x","y"]);Pt(rt,"scaleX",1,(0,Gt.getNumberValidator)());Pt(rt,"scaleY",1,(0,Gt.getNumberValidator)());On.Factory.addComponentsGetterSetter(rt,"skew",["x","y"]);Pt(rt,"skewX",0,(0,Gt.getNumberValidator)());Pt(rt,"skewY",0,(0,Gt.getNumberValidator)());On.Factory.addComponentsGetterSetter(rt,"offset",["x","y"]);Pt(rt,"offsetX",0,(0,Gt.getNumberValidator)());Pt(rt,"offsetY",0,(0,Gt.getNumberValidator)());Pt(rt,"dragDistance",null,(0,Gt.getNumberValidator)());Pt(rt,"width",0,(0,Gt.getNumberValidator)());Pt(rt,"height",0,(0,Gt.getNumberValidator)());Pt(rt,"listening",!0,(0,Gt.getBooleanValidator)());Pt(rt,"preventDefault",!0,(0,Gt.getBooleanValidator)());Pt(rt,"filters",null,function(e){return this._filterUpToDate=!1,e});Pt(rt,"visible",!0,(0,Gt.getBooleanValidator)());Pt(rt,"transformsEnabled","all",(0,Gt.getStringValidator)());Pt(rt,"size");Pt(rt,"dragBoundFunc");Pt(rt,"draggable",!1,(0,Gt.getBooleanValidator)());On.Factory.backCompat(rt,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});var Ci={};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.Container=void 0;const Zi=ut,Rr=Ot,xs=nt;class xi extends Rr.Node{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];const i=this.children||[],n=[];return i.forEach(function(s){t(s)&&n.push(s)}),n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let n=0;n<t.length;n++)this.add(t[n]);return this}const i=t[0];return i.getParent()?(i.moveTo(this),this):(this._validateAdd(i),i.index=this.getChildren().length,i.parent=this,i._clearCaches(),this.getChildren().push(i),this._fire("add",{child:i}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const i=this._generalFind(t,!0);return i.length>0?i[0]:void 0}_generalFind(t,i){const n=[];return this._descendants(s=>{const r=s._isMatch(t);return r&&n.push(s),!!(r&&i)}),n}_descendants(t){let i=!1;const n=this.getChildren();for(const s of n){if(i=t(s),i)return!0;if(s.hasChildren()&&(i=s._descendants(t),i))return!0}return!1}toObject(){const t=Rr.Node.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(i=>{t.children.push(i.toObject())}),t}isAncestorOf(t){let i=t.getParent();for(;i;){if(i._id===this._id)return!0;i=i.getParent()}return!1}clone(t){const i=Rr.Node.prototype.clone.call(this,t);return this.getChildren().forEach(function(n){i.add(n.clone())}),i}getAllIntersections(t){const i=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(t)&&i.push(n)}),i}_clearSelfAndDescendantCache(t){var i;super._clearSelfAndDescendantCache(t),!this.isCached()&&((i=this.children)===null||i===void 0||i.forEach(function(n){n._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(i,n){i.index=n}),this._requestDraw()}drawScene(t,i,n){const s=this.getLayer(),r=t||s&&s.getCanvas(),o=r&&r.getContext(),a=this._getCanvasCache(),l=a&&a.scene,h=r&&r.isCache;if(!this.isVisible()&&!h)return this;if(l){o.save();const c=this.getAbsoluteTransform(i).getMatrix();o.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",r,i,n);return this}drawHit(t,i){if(!this.shouldDrawHit(i))return this;const n=this.getLayer(),s=t||n&&n.hitCanvas,r=s&&s.getContext(),o=this._getCanvasCache();if(o&&o.hit){r.save();const l=this.getAbsoluteTransform(i).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",s,i);return this}_drawChildren(t,i,n,s){var r;const o=i&&i.getContext(),a=this.clipWidth(),l=this.clipHeight(),h=this.clipFunc(),c=typeof a=="number"&&typeof l=="number"||h,u=n===this;if(c){o.save();const f=this.getAbsoluteTransform(n);let p=f.getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5]),o.beginPath();let m;if(h)m=h.call(this,o,this);else{const b=this.clipX(),y=this.clipY();o.rect(b||0,y||0,a,l)}o.clip.apply(o,m),p=f.copy().invert().getMatrix(),o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}const d=!u&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";d&&(o.save(),o._applyGlobalCompositeOperation(this)),(r=this.children)===null||r===void 0||r.forEach(function(f){f[t](i,n,s)}),d&&o.restore(),c&&o.restore()}getClientRect(t={}){var i;const n=t.skipTransform,s=t.relativeTo;let r,o,a,l,h={x:1/0,y:1/0,width:0,height:0};const c=this;(i=this.children)===null||i===void 0||i.forEach(function(f){if(!f.visible())return;const p=f.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});p.width===0&&p.height===0||(r===void 0?(r=p.x,o=p.y,a=p.x+p.width,l=p.y+p.height):(r=Math.min(r,p.x),o=Math.min(o,p.y),a=Math.max(a,p.x+p.width),l=Math.max(l,p.y+p.height)))});const u=this.find("Shape");let d=!1;for(let f=0;f<u.length;f++)if(u[f]._isVisible(this)){d=!0;break}return d&&r!==void 0?h={x:r,y:o,width:a-r,height:l-o}:h={x:0,y:0,width:0,height:0},n?h:this._transformedRect(h,s)}}Ci.Container=xi;Zi.Factory.addComponentsGetterSetter(xi,"clip",["x","y","width","height"]);Zi.Factory.addGetterSetter(xi,"clipX",void 0,(0,xs.getNumberValidator)());Zi.Factory.addGetterSetter(xi,"clipY",void 0,(0,xs.getNumberValidator)());Zi.Factory.addGetterSetter(xi,"clipWidth",void 0,(0,xs.getNumberValidator)());Zi.Factory.addGetterSetter(xi,"clipHeight",void 0,(0,xs.getNumberValidator)());Zi.Factory.addGetterSetter(xi,"clipFunc");var Eh={},li={};Object.defineProperty(li,"__esModule",{value:!0});li.getCapturedShape=Nd;li.createEvent=Bo;li.hasPointerCapture=Fd;li.setPointerCapture=kd;li.releaseCapture=Ah;const Od=ct,Pn=new Map,Th=Od.Konva._global.PointerEvent!==void 0;function Nd(e){return Pn.get(e)}function Bo(e){return{evt:e,pointerId:e.pointerId}}function Fd(e,t){return Pn.get(e)===t}function kd(e,t){Ah(e),t.getStage()&&(Pn.set(e,t),Th&&t._fire("gotpointercapture",Bo(new PointerEvent("gotpointercapture"))))}function Ah(e,t){const i=Pn.get(e);if(!i)return;const n=i.getStage();n&&n.content,Pn.delete(e),Th&&i._fire("lostpointercapture",Bo(new PointerEvent("lostpointercapture")))}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Stage=e.stages=void 0;const t=Ft,i=ut,n=Ci,s=ct,r=be,o=Cs,a=ct,l=li,h="Stage",c="string",u="px",d="mouseout",f="mouseleave",p="mouseover",m="mouseenter",b="mousemove",y="mousedown",P="mouseup",g="pointermove",_="pointerdown",v="pointerup",A="pointercancel",N="lostpointercapture",x="pointerout",R="pointerleave",S="pointerover",T="pointerenter",O="contextmenu",j="touchstart",et="touchend",U="touchmove",B="touchcancel",Y="wheel",J=5,kt=[[m,"_pointerenter"],[y,"_pointerdown"],[b,"_pointermove"],[P,"_pointerup"],[f,"_pointerleave"],[j,"_pointerdown"],[U,"_pointermove"],[et,"_pointerup"],[B,"_pointercancel"],[p,"_pointerover"],[Y,"_wheel"],[O,"_contextmenu"],[_,"_pointerdown"],[g,"_pointermove"],[v,"_pointerup"],[A,"_pointercancel"],[N,"_lostpointercapture"]],z={mouse:{[x]:d,[R]:f,[S]:p,[T]:m,[g]:b,[_]:y,[v]:P,[A]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[x]:"touchout",[R]:"touchleave",[S]:"touchover",[T]:"touchenter",[g]:U,[_]:j,[v]:et,[A]:B,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[x]:x,[R]:R,[S]:S,[T]:T,[g]:g,[_]:_,[v]:v,[A]:A,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Q=It=>It.indexOf("pointer")>=0?"pointer":It.indexOf("touch")>=0?"touch":"mouse",ht=It=>{const E=Q(It);if(E==="pointer")return s.Konva.pointerEventsEnabled&&z.pointer;if(E==="touch")return z.touch;if(E==="mouse")return z.mouse};function pt(It={}){return(It.clipFunc||It.clipWidth||It.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),It}const Ct="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";e.stages=[];class re extends n.Container{constructor(E){super(pt(E)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),e.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{pt(this.attrs)}),this._checkVisibility()}_validateAdd(E){const G=E.getType()==="Layer",q=E.getType()==="FastLayer";G||q||t.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const E=this.visible()?"":"none";this.content.style.display=E}setContainer(E){if(typeof E===c){if(E.charAt(0)==="."){const q=E.slice(1);E=document.getElementsByClassName(q)[0]}else{var G;E.charAt(0)!=="#"?G=E:G=E.slice(1),E=document.getElementById(G)}if(!E)throw"Can not find container in document with id "+G}return this._setAttr("container",E),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),E.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){let E=this.children,G=E.length,q;for(q=0;q<G;q++)E[q].clear();return this}clone(E){return E||(E={}),E.container=typeof document<"u"&&document.createElement("div"),n.Container.prototype.clone.call(this,E)}destroy(){super.destroy();const E=this.content;E&&t.Util._isInDocument(E)&&this.container().removeChild(E);const G=e.stages.indexOf(this);return G>-1&&e.stages.splice(G,1),t.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const E=this._pointerPositions[0]||this._changedPointerPositions[0];return E?{x:E.x,y:E.y}:(t.Util.warn(Ct),null)}_getPointerById(E){return this._pointerPositions.find(G=>G.id===E)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(E){E=E||{},E.x=E.x||0,E.y=E.y||0,E.width=E.width||this.width(),E.height=E.height||this.height();const G=new r.SceneCanvas({width:E.width,height:E.height,pixelRatio:E.pixelRatio||1}),q=G.getContext()._context,vt=this.children;return(E.x||E.y)&&q.translate(-1*E.x,-1*E.y),vt.forEach(function(mt){if(!mt.isVisible())return;const Mt=mt._toKonvaCanvas(E);q.drawImage(Mt._canvas,E.x,E.y,Mt.getWidth()/Mt.getPixelRatio(),Mt.getHeight()/Mt.getPixelRatio())}),G}getIntersection(E){if(!E)return null;let G=this.children,q=G.length,vt=q-1,mt;for(mt=vt;mt>=0;mt--){const Mt=G[mt].getIntersection(E);if(Mt)return Mt}return null}_resizeDOM(){const E=this.width(),G=this.height();this.content&&(this.content.style.width=E+u,this.content.style.height=G+u),this.bufferCanvas.setSize(E,G),this.bufferHitCanvas.setSize(E,G),this.children.forEach(q=>{q.setSize({width:E,height:G}),q.draw()})}add(E,...G){if(arguments.length>1){for(let vt=0;vt<arguments.length;vt++)this.add(arguments[vt]);return this}super.add(E);const q=this.children.length;return q>J&&t.Util.warn("The stage has "+q+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),E.setSize({width:this.width(),height:this.height()}),E.draw(),s.Konva.isBrowser&&this.content.appendChild(E.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(E){return l.hasPointerCapture(E,this)}setPointerCapture(E){l.setPointerCapture(E,this)}releaseCapture(E){l.releaseCapture(E,this)}getLayers(){return this.children}_bindContentEvents(){s.Konva.isBrowser&&kt.forEach(([E,G])=>{this.content.addEventListener(E,q=>{this[G](q)},{passive:!1})})}_pointerenter(E){this.setPointersPositions(E);const G=ht(E.type);G&&this._fire(G.pointerenter,{evt:E,target:this,currentTarget:this})}_pointerover(E){this.setPointersPositions(E);const G=ht(E.type);G&&this._fire(G.pointerover,{evt:E,target:this,currentTarget:this})}_getTargetShape(E){let G=this[E+"targetShape"];return G&&!G.getStage()&&(G=null),G}_pointerleave(E){const G=ht(E.type),q=Q(E.type);if(!G)return;this.setPointersPositions(E);const vt=this._getTargetShape(q),mt=!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled;vt&&mt?(vt._fireAndBubble(G.pointerout,{evt:E}),vt._fireAndBubble(G.pointerleave,{evt:E}),this._fire(G.pointerleave,{evt:E,target:this,currentTarget:this}),this[q+"targetShape"]=null):mt&&(this._fire(G.pointerleave,{evt:E,target:this,currentTarget:this}),this._fire(G.pointerout,{evt:E,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(E){const G=ht(E.type),q=Q(E.type);if(!G)return;this.setPointersPositions(E);let vt=!1;this._changedPointerPositions.forEach(mt=>{const Mt=this.getIntersection(mt);if(o.DD.justDragged=!1,s.Konva["_"+q+"ListenClick"]=!0,!Mt||!Mt.isListening()){this[q+"ClickStartShape"]=void 0;return}s.Konva.capturePointerEventsEnabled&&Mt.setPointerCapture(mt.id),this[q+"ClickStartShape"]=Mt,Mt._fireAndBubble(G.pointerdown,{evt:E,pointerId:mt.id}),vt=!0;const w=E.type.indexOf("touch")>=0;Mt.preventDefault()&&E.cancelable&&w&&E.preventDefault()}),vt||this._fire(G.pointerdown,{evt:E,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(E){const G=ht(E.type),q=Q(E.type);if(!G||(s.Konva.isDragging()&&o.DD.node.preventDefault()&&E.cancelable&&E.preventDefault(),this.setPointersPositions(E),!(!(s.Konva.isDragging()||s.Konva.isTransforming())||s.Konva.hitOnDragEnabled)))return;const mt={};let Mt=!1;const w=this._getTargetShape(q);this._changedPointerPositions.forEach(C=>{const M=l.getCapturedShape(C.id)||this.getIntersection(C),D=C.id,F={evt:E,pointerId:D},L=w!==M;if(L&&w&&(w._fireAndBubble(G.pointerout,{...F},M),w._fireAndBubble(G.pointerleave,{...F},M)),M){if(mt[M._id])return;mt[M._id]=!0}M&&M.isListening()?(Mt=!0,L&&(M._fireAndBubble(G.pointerover,{...F},w),M._fireAndBubble(G.pointerenter,{...F},w),this[q+"targetShape"]=M),M._fireAndBubble(G.pointermove,{...F})):w&&(this._fire(G.pointerover,{evt:E,target:this,currentTarget:this,pointerId:D}),this[q+"targetShape"]=null)}),Mt||this._fire(G.pointermove,{evt:E,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(E){const G=ht(E.type),q=Q(E.type);if(!G)return;this.setPointersPositions(E);const vt=this[q+"ClickStartShape"],mt=this[q+"ClickEndShape"],Mt={};let w=!1;this._changedPointerPositions.forEach(C=>{const M=l.getCapturedShape(C.id)||this.getIntersection(C);if(M){if(M.releaseCapture(C.id),Mt[M._id])return;Mt[M._id]=!0}const D=C.id,F={evt:E,pointerId:D};let L=!1;s.Konva["_"+q+"InDblClickWindow"]?(L=!0,clearTimeout(this[q+"DblTimeout"])):o.DD.justDragged||(s.Konva["_"+q+"InDblClickWindow"]=!0,clearTimeout(this[q+"DblTimeout"])),this[q+"DblTimeout"]=setTimeout(function(){s.Konva["_"+q+"InDblClickWindow"]=!1},s.Konva.dblClickWindow),M&&M.isListening()?(w=!0,this[q+"ClickEndShape"]=M,M._fireAndBubble(G.pointerup,{...F}),s.Konva["_"+q+"ListenClick"]&&vt&&vt===M&&(M._fireAndBubble(G.pointerclick,{...F}),L&&mt&&mt===M&&M._fireAndBubble(G.pointerdblclick,{...F}))):(this[q+"ClickEndShape"]=null,s.Konva["_"+q+"ListenClick"]&&this._fire(G.pointerclick,{evt:E,target:this,currentTarget:this,pointerId:D}),L&&this._fire(G.pointerdblclick,{evt:E,target:this,currentTarget:this,pointerId:D}))}),w||this._fire(G.pointerup,{evt:E,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),s.Konva["_"+q+"ListenClick"]=!1,E.cancelable&&q!=="touch"&&E.preventDefault()}_contextmenu(E){this.setPointersPositions(E);const G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(O,{evt:E}):this._fire(O,{evt:E,target:this,currentTarget:this})}_wheel(E){this.setPointersPositions(E);const G=this.getIntersection(this.getPointerPosition());G&&G.isListening()?G._fireAndBubble(Y,{evt:E}):this._fire(Y,{evt:E,target:this,currentTarget:this})}_pointercancel(E){this.setPointersPositions(E);const G=l.getCapturedShape(E.pointerId)||this.getIntersection(this.getPointerPosition());G&&G._fireAndBubble(v,l.createEvent(E)),l.releaseCapture(E.pointerId)}_lostpointercapture(E){l.releaseCapture(E.pointerId)}setPointersPositions(E){let G=this._getContentPosition(),q=null,vt=null;E=E||window.event,E.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(E.touches,mt=>{this._pointerPositions.push({id:mt.identifier,x:(mt.clientX-G.left)/G.scaleX,y:(mt.clientY-G.top)/G.scaleY})}),Array.prototype.forEach.call(E.changedTouches||E.touches,mt=>{this._changedPointerPositions.push({id:mt.identifier,x:(mt.clientX-G.left)/G.scaleX,y:(mt.clientY-G.top)/G.scaleY})})):(q=(E.clientX-G.left)/G.scaleX,vt=(E.clientY-G.top)/G.scaleY,this.pointerPos={x:q,y:vt},this._pointerPositions=[{x:q,y:vt,id:t.Util._getFirstPointerId(E)}],this._changedPointerPositions=[{x:q,y:vt,id:t.Util._getFirstPointerId(E)}])}_setPointerPosition(E){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(E)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const E=this.content.getBoundingClientRect();return{top:E.top,left:E.left,scaleX:E.width/this.content.clientWidth||1,scaleY:E.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new r.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new r.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!s.Konva.isBrowser)return;const E=this.container();if(!E)throw"Stage has no container. A container is required.";E.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),E.appendChild(this.content),this._resizeDOM()}cache(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(E){E.batchDraw()}),this}}e.Stage=re,re.prototype.nodeType=h,(0,a._registerNode)(re),i.Factory.addGetterSetter(re,"container"),s.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{e.stages.forEach(It=>{It.batchDraw()})})})(Eh);var Nn={},Ht={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Shape=e.shapes=void 0;const t=ct,i=Ft,n=ut,s=Ot,r=nt,o=ct,a=li,l="hasShadow",h="shadowRGBA",c="patternImage",u="linearGradient",d="radialGradient";let f;function p(){return f||(f=i.Util.createCanvasElement().getContext("2d"),f)}e.shapes={};function m(R){const S=this.attrs.fillRule;S?R.fill(S):R.fill()}function b(R){R.stroke()}function y(R){const S=this.attrs.fillRule;S?R.fill(S):R.fill()}function P(R){R.stroke()}function g(){this._clearCache(l)}function _(){this._clearCache(h)}function v(){this._clearCache(c)}function A(){this._clearCache(u)}function N(){this._clearCache(d)}class x extends s.Node{constructor(S){super(S);let T;for(;T=i.Util.getRandomColor(),!(T&&!(T in e.shapes)););this.colorKey=T,e.shapes[T]=this}getContext(){return i.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return i.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(l,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(c,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const T=p().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(T&&T.setTransform){const O=new i.Transform;O.translate(this.fillPatternX(),this.fillPatternY()),O.rotate(t.Konva.getAngle(this.fillPatternRotation())),O.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),O.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const j=O.getMatrix(),et=typeof DOMMatrix>"u"?{a:j[0],b:j[1],c:j[2],d:j[3],e:j[4],f:j[5]}:new DOMMatrix(j);T.setTransform(et)}return T}}_getLinearGradient(){return this._getCache(u,this.__getLinearGradient)}__getLinearGradient(){const S=this.fillLinearGradientColorStops();if(S){const T=p(),O=this.fillLinearGradientStartPoint(),j=this.fillLinearGradientEndPoint(),et=T.createLinearGradient(O.x,O.y,j.x,j.y);for(let U=0;U<S.length;U+=2)et.addColorStop(S[U],S[U+1]);return et}}_getRadialGradient(){return this._getCache(d,this.__getRadialGradient)}__getRadialGradient(){const S=this.fillRadialGradientColorStops();if(S){const T=p(),O=this.fillRadialGradientStartPoint(),j=this.fillRadialGradientEndPoint(),et=T.createRadialGradient(O.x,O.y,this.fillRadialGradientStartRadius(),j.x,j.y,this.fillRadialGradientEndRadius());for(let U=0;U<S.length;U+=2)et.addColorStop(S[U],S[U+1]);return et}}getShadowRGBA(){return this._getCache(h,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const S=i.Util.colorToRGBA(this.shadowColor());if(S)return"rgba("+S.r+","+S.g+","+S.b+","+S.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const S=this.hitStrokeWidth();return S==="auto"?this.hasStroke():this.strokeEnabled()&&!!S}intersects(S){const T=this.getStage();if(!T)return!1;const O=T.bufferHitCanvas;return O.getContext().clear(),this.drawHit(O,void 0,!0),O.context.getImageData(Math.round(S.x),Math.round(S.y),1,1).data[3]>0}destroy(){return s.Node.prototype.destroy.call(this),delete e.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(S){var T;if(!((T=this.attrs.perfectDrawEnabled)!==null&&T!==void 0?T:!0))return!1;const j=S||this.hasFill(),et=this.hasStroke(),U=this.getAbsoluteOpacity()!==1;if(j&&et&&U)return!0;const B=this.hasShadow(),Y=this.shadowForStrokeEnabled();return!!(j&&et&&B&&Y)}setStrokeHitEnabled(S){i.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),S?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const S=this.size();return{x:this._centroid?-S.width/2:0,y:this._centroid?-S.height/2:0,width:S.width,height:S.height}}getClientRect(S={}){let T=!1,O=this.getParent();for(;O;){if(O.isCached()){T=!0;break}O=O.getParent()}const j=S.skipTransform,et=S.relativeTo||T&&this.getStage()||void 0,U=this.getSelfRect(),Y=!S.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,J=U.width+Y,kt=U.height+Y,z=!S.skipShadow&&this.hasShadow(),Q=z?this.shadowOffsetX():0,ht=z?this.shadowOffsetY():0,pt=J+Math.abs(Q),Ct=kt+Math.abs(ht),re=z&&this.shadowBlur()||0,It=pt+re*2,E=Ct+re*2,G={width:It,height:E,x:-(Y/2+re)+Math.min(Q,0)+U.x,y:-(Y/2+re)+Math.min(ht,0)+U.y};return j?G:this._transformedRect(G,et)}drawScene(S,T,O){const j=this.getLayer();let et=S||j.getCanvas(),U=et.getContext(),B=this._getCanvasCache(),Y=this.getSceneFunc(),J=this.hasShadow(),kt,z;const Q=et.isCache,ht=T===this;if(!this.isVisible()&&!ht)return this;if(B){U.save();const Ct=this.getAbsoluteTransform(T).getMatrix();return U.transform(Ct[0],Ct[1],Ct[2],Ct[3],Ct[4],Ct[5]),this._drawCachedSceneCanvas(U),U.restore(),this}if(!Y)return this;if(U.save(),this._useBufferCanvas()&&!Q){kt=this.getStage();const Ct=O||kt.bufferCanvas;z=Ct.getContext(),z.clear(),z.save(),z._applyLineJoin(this);var pt=this.getAbsoluteTransform(T).getMatrix();z.transform(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]),Y.call(this,z,this),z.restore();const re=Ct.pixelRatio;J&&U._applyShadow(this),U._applyOpacity(this),U._applyGlobalCompositeOperation(this),U.drawImage(Ct._canvas,0,0,Ct.width/re,Ct.height/re)}else{if(U._applyLineJoin(this),!ht){var pt=this.getAbsoluteTransform(T).getMatrix();U.transform(pt[0],pt[1],pt[2],pt[3],pt[4],pt[5]),U._applyOpacity(this),U._applyGlobalCompositeOperation(this)}J&&U._applyShadow(this),Y.call(this,U,this)}return U.restore(),this}drawHit(S,T,O=!1){if(!this.shouldDrawHit(T,O))return this;const j=this.getLayer(),et=S||j.hitCanvas,U=et&&et.getContext(),B=this.hitFunc()||this.sceneFunc(),Y=this._getCanvasCache(),J=Y&&Y.hit;if(this.colorKey||i.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),J){U.save();const z=this.getAbsoluteTransform(T).getMatrix();return U.transform(z[0],z[1],z[2],z[3],z[4],z[5]),this._drawCachedHitCanvas(U),U.restore(),this}if(!B)return this;if(U.save(),U._applyLineJoin(this),!(this===T)){const z=this.getAbsoluteTransform(T).getMatrix();U.transform(z[0],z[1],z[2],z[3],z[4],z[5])}return B.call(this,U,this),U.restore(),this}drawHitFromCache(S=0){let T=this._getCanvasCache(),O=this._getCachedSceneCanvas(),j=T.hit,et=j.getContext(),U=j.getWidth(),B=j.getHeight(),Y,J,kt,z,Q,ht;et.clear(),et.drawImage(O._canvas,0,0,U,B);try{for(Y=et.getImageData(0,0,U,B),J=Y.data,kt=J.length,z=i.Util._hexToRgb(this.colorKey),Q=0;Q<kt;Q+=4)ht=J[Q+3],ht>S?(J[Q]=z.r,J[Q+1]=z.g,J[Q+2]=z.b,J[Q+3]=255):J[Q+3]=0;et.putImageData(Y,0,0)}catch(pt){i.Util.error("Unable to draw hit graph from cached scene canvas. "+pt.message)}return this}hasPointerCapture(S){return a.hasPointerCapture(S,this)}setPointerCapture(S){a.setPointerCapture(S,this)}releaseCapture(S){a.releaseCapture(S,this)}}e.Shape=x,x.prototype._fillFunc=m,x.prototype._strokeFunc=b,x.prototype._fillFuncHit=y,x.prototype._strokeFuncHit=P,x.prototype._centroid=!1,x.prototype.nodeType="Shape",(0,o._registerNode)(x),x.prototype.eventListeners={},x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",g),x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",v),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",A),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",N),n.Factory.addGetterSetter(x,"stroke",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(x,"strokeWidth",2,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(x,"hitStrokeWidth","auto",(0,r.getNumberOrAutoValidator)()),n.Factory.addGetterSetter(x,"strokeHitEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,(0,r.getBooleanValidator)()),n.Factory.addGetterSetter(x,"lineJoin"),n.Factory.addGetterSetter(x,"lineCap"),n.Factory.addGetterSetter(x,"sceneFunc"),n.Factory.addGetterSetter(x,"hitFunc"),n.Factory.addGetterSetter(x,"dash"),n.Factory.addGetterSetter(x,"dashOffset",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"shadowColor",void 0,(0,r.getStringValidator)()),n.Factory.addGetterSetter(x,"shadowBlur",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"shadowOpacity",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(x,"shadowOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"shadowOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"fillPatternImage"),n.Factory.addGetterSetter(x,"fill",void 0,(0,r.getStringOrGradientValidator)()),n.Factory.addGetterSetter(x,"fillPatternX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"fillPatternY",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(x,"fillEnabled",!0),n.Factory.addGetterSetter(x,"strokeEnabled",!0),n.Factory.addGetterSetter(x,"shadowEnabled",!0),n.Factory.addGetterSetter(x,"dashEnabled",!0),n.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(x,"fillPriority","color"),n.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(x,"fillPatternOffsetX",0,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"fillPatternOffsetY",0,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(x,"fillPatternScaleX",1,(0,r.getNumberValidator)()),n.Factory.addGetterSetter(x,"fillPatternScaleY",1,(0,r.getNumberValidator)()),n.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(x,"fillPatternRotation",0),n.Factory.addGetterSetter(x,"fillRule",void 0,(0,r.getStringValidator)()),n.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})})(Ht);Object.defineProperty(Nn,"__esModule",{value:!0});Nn.Layer=void 0;const ke=Ft,Or=Ci,Ni=Ot,Vo=ut,Va=be,Ld=nt,Dd=Ht,Gd=ct,Id="#",Ud="beforeDraw",Bd="draw",Mh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Vd=Mh.length;class Ji extends Or.Container{constructor(t){super(t),this.canvas=new Va.SceneCanvas,this.hitCanvas=new Va.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const i=this.getStage();return i&&i.content&&(i.content.removeChild(this.getNativeCanvasElement()),t<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[t+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Ni.Node.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Ni.Node.prototype.moveUp.call(this))return!1;const i=this.getStage();return!i||!i.content?!1:(i.content.removeChild(this.getNativeCanvasElement()),this.index<i.children.length-1?i.content.insertBefore(this.getNativeCanvasElement(),i.children[this.index+1].getCanvas()._canvas):i.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Ni.Node.prototype.moveDown.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Ni.Node.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const i=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),i[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Ni.Node.prototype.remove.call(this),t&&t.parentNode&&ke.Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:i}){return this.canvas.setSize(t,i),this.hitCanvas.setSize(t,i),this._setSmoothEnabled(),this}_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&ke.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Ni.Node.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ke.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ke.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ke.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let i=1,n=!1;for(;;){for(let s=0;s<Vd;s++){const r=Mh[s],o=this._getIntersection({x:t.x+r.x*i,y:t.y+r.y*i}),a=o.shape;if(a)return a;if(n=!!o.antialiased,!o.antialiased)break}if(n)i+=1;else return null}}_getIntersection(t){const i=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*i),Math.round(t.y*i),1,1).data,s=n[3];if(s===255){const r=ke.Util._rgbToHex(n[0],n[1],n[2]),o=Dd.shapes[Id+r];return o?{shape:o}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(t,i){const n=this.getLayer(),s=t||n&&n.getCanvas();return this._fire(Ud,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),Or.Container.prototype.drawScene.call(this,s,i),this._fire(Bd,{node:this}),this}drawHit(t,i){const n=this.getLayer(),s=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),Or.Container.prototype.drawHit.call(this,s,i),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){ke.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return ke.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return ke.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Nn.Layer=Ji;Ji.prototype.nodeType="Layer";(0,Gd._registerNode)(Ji);Vo.Factory.addGetterSetter(Ji,"imageSmoothingEnabled",!0);Vo.Factory.addGetterSetter(Ji,"clearBeforeDraw",!0);Vo.Factory.addGetterSetter(Ji,"hitGraphEnabled",!0,(0,Ld.getBooleanValidator)());var Ps={};Object.defineProperty(Ps,"__esModule",{value:!0});Ps.FastLayer=void 0;const $d=Ft,Hd=Nn,zd=ct;class $o extends Hd.Layer{constructor(t){super(t),this.listening(!1),$d.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Ps.FastLayer=$o;$o.prototype.nodeType="FastLayer";(0,zd._registerNode)($o);var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.Group=void 0;const Wd=Ft,jd=Ci,Kd=ct;class Ho extends jd.Container{_validateAdd(t){const i=t.getType();i!=="Group"&&i!=="Shape"&&Wd.Util.throw("You may only add groups and shapes to groups.")}}Qi.Group=Ho;Ho.prototype.nodeType="Group";(0,Kd._registerNode)(Ho);var tn={};Object.defineProperty(tn,"__esModule",{value:!0});tn.Animation=void 0;const Nr=ct,$a=Ft,Fr=function(){return Nr.glob.performance&&Nr.glob.performance.now?function(){return Nr.glob.performance.now()}:function(){return new Date().getTime()}}();class Te{constructor(t,i){this.id=Te.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Fr(),frameRate:0},this.func=t,this.setLayers(i)}setLayers(t){let i=[];return t&&(i=Array.isArray(t)?t:[t]),this.layers=i,this}getLayers(){return this.layers}addLayer(t){const i=this.layers,n=i.length;for(let s=0;s<n;s++)if(i[s]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const i=Te.animations,n=i.length;for(let s=0;s<n;s++)if(i[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Fr(),Te._addAnimation(this),this}stop(){return Te._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const i=t.id,n=this.animations,s=n.length;for(let r=0;r<s;r++)if(n[r].id===i){this.animations.splice(r,1);break}}static _runFrames(){const t={},i=this.animations;for(let n=0;n<i.length;n++){const s=i[n],r=s.layers,o=s.func;s._updateFrameObject(Fr());const a=r.length;let l;if(o?l=o.call(s,s.frame)!==!1:l=!0,!!l)for(let h=0;h<a;h++){const c=r[h];c._id!==void 0&&(t[c._id]=c)}}for(const n in t)t.hasOwnProperty(n)&&t[n].batchDraw()}static _animationLoop(){const t=Te;t.animations.length?(t._runFrames(),$a.Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,$a.Util.requestAnimFrame(this._animationLoop))}}tn.Animation=Te;Te.animations=[];Te.animIdCounter=0;Te.animRunning=!1;var Rh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Easings=e.Tween=void 0;const t=Ft,i=tn,n=Ot,s=ct;let r={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,a=2,l=3,h=0,c=["fill","stroke","shadowColor"];class u{constructor(p,m,b,y,P,g,_){this.prop=p,this.propFunc=m,this.begin=y,this._pos=y,this.duration=g,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=b,this._change=P-this.begin,this.pause()}fire(p){const m=this[p];m&&m()}setTime(p){p>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():p<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=p,this.update())}getTime(){return this._time}setPosition(p){this.prevPos=this._pos,this.propFunc(p),this._pos=p}getPosition(p){return p===void 0&&(p=this._time),this.func(p,this.begin,this._change,this.duration)}play(){this.state=a,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(p){this.pause(),this._time=p,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const p=this.getTimer()-this._startTime;this.state===a?this.setTime(p):this.state===l&&this.setTime(this.duration-p)}pause(){this.state=o,this.fire("onPause")}getTimer(){return new Date().getTime()}}class d{constructor(p){let m=this,b=p.node,y=b._id,P,g=p.easing||e.Easings.Linear,_=!!p.yoyo,v;typeof p.duration>"u"?P=.3:p.duration===0?P=.001:P=p.duration,this.node=b,this._id=h++;const A=b.getLayer()||(b instanceof s.Konva.Stage?b.getLayers():null);A||t.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new i.Animation(function(){m.tween.onEnterFrame()},A),this.tween=new u(v,function(N){m._tweenFunc(N)},g,0,1,P*1e3,_),this._addListeners(),d.attrs[y]||(d.attrs[y]={}),d.attrs[y][this._id]||(d.attrs[y][this._id]={}),d.tweens[y]||(d.tweens[y]={});for(v in p)r[v]===void 0&&this._addAttr(v,p[v]);this.reset(),this.onFinish=p.onFinish,this.onReset=p.onReset,this.onUpdate=p.onUpdate}_addAttr(p,m){let b=this.node,y=b._id,P,g,_,v,A,N,x,R;if(_=d.tweens[y][p],_&&delete d.attrs[y][_][p],P=b.getAttr(p),t.Util._isArray(m))if(g=[],A=Math.max(m.length,P.length),p==="points"&&m.length!==P.length&&(m.length>P.length?(x=P,P=t.Util._prepareArrayForTween(P,m,b.closed())):(N=m,m=t.Util._prepareArrayForTween(m,P,b.closed()))),p.indexOf("fill")===0)for(v=0;v<A;v++)if(v%2===0)g.push(m[v]-P[v]);else{const S=t.Util.colorToRGBA(P[v]);R=t.Util.colorToRGBA(m[v]),P[v]=S,g.push({r:R.r-S.r,g:R.g-S.g,b:R.b-S.b,a:R.a-S.a})}else for(v=0;v<A;v++)g.push(m[v]-P[v]);else c.indexOf(p)!==-1?(P=t.Util.colorToRGBA(P),R=t.Util.colorToRGBA(m),g={r:R.r-P.r,g:R.g-P.g,b:R.b-P.b,a:R.a-P.a}):g=m-P;d.attrs[y][this._id][p]={start:P,diff:g,end:m,trueEnd:N,trueStart:x},d.tweens[y][p]=this._id}_tweenFunc(p){let m=this.node,b=d.attrs[m._id][this._id],y,P,g,_,v,A,N,x;for(y in b){if(P=b[y],g=P.start,_=P.diff,x=P.end,t.Util._isArray(g))if(v=[],N=Math.max(g.length,x.length),y.indexOf("fill")===0)for(A=0;A<N;A++)A%2===0?v.push((g[A]||0)+_[A]*p):v.push("rgba("+Math.round(g[A].r+_[A].r*p)+","+Math.round(g[A].g+_[A].g*p)+","+Math.round(g[A].b+_[A].b*p)+","+(g[A].a+_[A].a*p)+")");else for(A=0;A<N;A++)v.push((g[A]||0)+_[A]*p);else c.indexOf(y)!==-1?v="rgba("+Math.round(g.r+_.r*p)+","+Math.round(g.g+_.g*p)+","+Math.round(g.b+_.b*p)+","+(g.a+_.a*p)+")":v=g+_*p;m.setAttr(y,v)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueEnd&&p.setAttr("points",m.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const p=this.node,m=d.attrs[p._id][this._id];m.points&&m.points.trueStart&&p.points(m.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(p){return this.tween.seek(p*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){let p=this.node._id,m=this._id,b=d.tweens[p],y;this.pause();for(y in b)delete d.tweens[p][y];delete d.attrs[p][m]}}e.Tween=d,d.attrs={},d.tweens={},n.Node.prototype.to=function(f){const p=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),p&&p()},new d(f).play()},e.Easings={BackEaseIn(f,p,m,b){return m*(f/=b)*f*((1.70158+1)*f-1.70158)+p},BackEaseOut(f,p,m,b){return m*((f=f/b-1)*f*((1.70158+1)*f+1.70158)+1)+p},BackEaseInOut(f,p,m,b){let y=1.70158;return(f/=b/2)<1?m/2*(f*f*(((y*=1.525)+1)*f-y))+p:m/2*((f-=2)*f*(((y*=1.525)+1)*f+y)+2)+p},ElasticEaseIn(f,p,m,b,y,P){let g=0;return f===0?p:(f/=b)===1?p+m:(P||(P=b*.3),!y||y<Math.abs(m)?(y=m,g=P/4):g=P/(2*Math.PI)*Math.asin(m/y),-(y*Math.pow(2,10*(f-=1))*Math.sin((f*b-g)*(2*Math.PI)/P))+p)},ElasticEaseOut(f,p,m,b,y,P){let g=0;return f===0?p:(f/=b)===1?p+m:(P||(P=b*.3),!y||y<Math.abs(m)?(y=m,g=P/4):g=P/(2*Math.PI)*Math.asin(m/y),y*Math.pow(2,-10*f)*Math.sin((f*b-g)*(2*Math.PI)/P)+m+p)},ElasticEaseInOut(f,p,m,b,y,P){let g=0;return f===0?p:(f/=b/2)===2?p+m:(P||(P=b*(.3*1.5)),!y||y<Math.abs(m)?(y=m,g=P/4):g=P/(2*Math.PI)*Math.asin(m/y),f<1?-.5*(y*Math.pow(2,10*(f-=1))*Math.sin((f*b-g)*(2*Math.PI)/P))+p:y*Math.pow(2,-10*(f-=1))*Math.sin((f*b-g)*(2*Math.PI)/P)*.5+m+p)},BounceEaseOut(f,p,m,b){return(f/=b)<1/2.75?m*(7.5625*f*f)+p:f<2/2.75?m*(7.5625*(f-=1.5/2.75)*f+.75)+p:f<2.5/2.75?m*(7.5625*(f-=2.25/2.75)*f+.9375)+p:m*(7.5625*(f-=2.625/2.75)*f+.984375)+p},BounceEaseIn(f,p,m,b){return m-e.Easings.BounceEaseOut(b-f,0,m,b)+p},BounceEaseInOut(f,p,m,b){return f<b/2?e.Easings.BounceEaseIn(f*2,0,m,b)*.5+p:e.Easings.BounceEaseOut(f*2-b,0,m,b)*.5+m*.5+p},EaseIn(f,p,m,b){return m*(f/=b)*f+p},EaseOut(f,p,m,b){return-m*(f/=b)*(f-2)+p},EaseInOut(f,p,m,b){return(f/=b/2)<1?m/2*f*f+p:-m/2*(--f*(f-2)-1)+p},StrongEaseIn(f,p,m,b){return m*(f/=b)*f*f*f*f+p},StrongEaseOut(f,p,m,b){return m*((f=f/b-1)*f*f*f*f+1)+p},StrongEaseInOut(f,p,m,b){return(f/=b/2)<1?m/2*f*f*f*f*f+p:m/2*((f-=2)*f*f*f*f+2)+p},Linear(f,p,m,b){return m*f/b+p}}})(Rh);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Konva=void 0;const t=ct,i=Ft,n=Ot,s=Ci,r=Eh,o=Nn,a=Ps,l=Qi,h=Cs,c=Ht,u=tn,d=Rh,f=Be,p=be;e.Konva=i.Util._assign(t.Konva,{Util:i.Util,Transform:i.Transform,Node:n.Node,Container:s.Container,Stage:r.Stage,stages:r.stages,Layer:o.Layer,FastLayer:a.FastLayer,Group:l.Group,DD:h.DD,Shape:c.Shape,shapes:c.shapes,Animation:u.Animation,Tween:d.Tween,Easings:d.Easings,Context:f.Context,Canvas:p.Canvas}),e.default=e.Konva})(wh);var Es={};Object.defineProperty(Es,"__esModule",{value:!0});Es.Arc=void 0;const Ts=ut,Yd=Ht,Ha=ct,As=nt,Xd=ct;class We extends Yd.Shape{_sceneFunc(t){const i=Ha.Konva.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,i,n),t.arc(0,0,this.innerRadius(),i,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),i=this.outerRadius(),n=this.clockwise(),s=Ha.Konva.getAngle(n?360-this.angle():this.angle()),r=Math.cos(Math.min(s,Math.PI)),o=1,a=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),l=Math.sin(Math.min(s,Math.PI/2)),h=r*(r>0?t:i),c=o*i,u=a*(a>0?t:i),d=l*(l>0?i:t);return{x:h,y:n?-1*d:u,width:c-h,height:d-u}}}Es.Arc=We;We.prototype._centroid=!0;We.prototype.className="Arc";We.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Xd._registerNode)(We);Ts.Factory.addGetterSetter(We,"innerRadius",0,(0,As.getNumberValidator)());Ts.Factory.addGetterSetter(We,"outerRadius",0,(0,As.getNumberValidator)());Ts.Factory.addGetterSetter(We,"angle",0,(0,As.getNumberValidator)());Ts.Factory.addGetterSetter(We,"clockwise",!1,(0,As.getBooleanValidator)());var Ms={},Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.Line=void 0;const Rs=ut,qd=ct,Zd=Ht,Oh=nt;function eo(e,t,i,n,s,r,o){const a=Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2)),l=Math.sqrt(Math.pow(s-i,2)+Math.pow(r-n,2)),h=o*a/(a+l),c=o*l/(a+l),u=i-h*(s-e),d=n-h*(r-t),f=i+c*(s-e),p=n+c*(r-t);return[u,d,f,p]}function za(e,t){const i=e.length,n=[];for(let s=2;s<i-2;s+=2){const r=eo(e[s-2],e[s-1],e[s],e[s+1],e[s+2],e[s+3],t);isNaN(r[0])||(n.push(r[0]),n.push(r[1]),n.push(e[s]),n.push(e[s+1]),n.push(r[2]),n.push(r[3]))}return n}class hi extends Zd.Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){let i=this.points(),n=i.length,s=this.tension(),r=this.closed(),o=this.bezier(),a,l,h;if(n){if(t.beginPath(),t.moveTo(i[0],i[1]),s!==0&&n>4){for(a=this.getTensionPoints(),l=a.length,h=r?0:4,r||t.quadraticCurveTo(a[0],a[1],a[2],a[3]);h<l-2;)t.bezierCurveTo(a[h++],a[h++],a[h++],a[h++],a[h++],a[h++]);r||t.quadraticCurveTo(a[l-2],a[l-1],i[n-2],i[n-1])}else if(o)for(h=2;h<n;)t.bezierCurveTo(i[h++],i[h++],i[h++],i[h++],i[h++],i[h++]);else for(h=2;h<n;h+=2)t.lineTo(i[h],i[h+1]);r?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():za(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),i=t.length,n=this.tension(),s=eo(t[i-2],t[i-1],t[0],t[1],t[2],t[3],n),r=eo(t[i-4],t[i-3],t[i-2],t[i-1],t[0],t[1],n),o=za(t,n);return[s[2],s[3]].concat(o).concat([r[0],r[1],t[i-2],t[i-1],r[2],r[3],s[0],s[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:t=this.points();let i=t[0],n=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],i=Math.min(i,o),n=Math.max(n,o),s=Math.min(s,a),r=Math.max(r,a);return{x:i,y:s,width:n-i,height:r-s}}}Fn.Line=hi;hi.prototype.className="Line";hi.prototype._attrsAffectingSize=["points","bezier","tension"];(0,qd._registerNode)(hi);Rs.Factory.addGetterSetter(hi,"closed",!1);Rs.Factory.addGetterSetter(hi,"bezier",!1);Rs.Factory.addGetterSetter(hi,"tension",0,(0,Oh.getNumberValidator)());Rs.Factory.addGetterSetter(hi,"points",[],(0,Oh.getNumberArrayValidator)());var en={},Nh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.t2length=e.getQuadraticArcLength=e.getCubicArcLength=e.binomialCoefficients=e.cValues=e.tValues=void 0,e.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],e.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],e.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const t=(o,a,l)=>{let h,c;const d=l/2;h=0;for(let f=0;f<20;f++)c=d*e.tValues[20][f]+d,h+=e.cValues[20][f]*n(o,a,c);return d*h};e.getCubicArcLength=t;const i=(o,a,l)=>{l===void 0&&(l=1);const h=o[0]-2*o[1]+o[2],c=a[0]-2*a[1]+a[2],u=2*o[1]-2*o[0],d=2*a[1]-2*a[0],f=4*(h*h+c*c),p=4*(h*u+c*d),m=u*u+d*d;if(f===0)return l*Math.sqrt(Math.pow(o[2]-o[0],2)+Math.pow(a[2]-a[0],2));const b=p/(2*f),y=m/f,P=l+b,g=y-b*b,_=P*P+g>0?Math.sqrt(P*P+g):0,v=b*b+g>0?Math.sqrt(b*b+g):0,A=b+Math.sqrt(b*b+g)!==0?g*Math.log(Math.abs((P+_)/(b+v))):0;return Math.sqrt(f)/2*(P*_-b*v+A)};e.getQuadraticArcLength=i;function n(o,a,l){const h=s(1,l,o),c=s(1,l,a),u=h*h+c*c;return Math.sqrt(u)}const s=(o,a,l)=>{const h=l.length-1;let c,u;if(h===0)return 0;if(o===0){u=0;for(let d=0;d<=h;d++)u+=e.binomialCoefficients[h][d]*Math.pow(1-a,h-d)*Math.pow(a,d)*l[d];return u}else{c=new Array(h);for(let d=0;d<h;d++)c[d]=h*(l[d+1]-l[d]);return s(o-1,a,c)}},r=(o,a,l)=>{let h=1,c=o/a,u=(o-l(c))/a,d=0;for(;h>.001;){const f=l(c+u),p=Math.abs(o-f)/a;if(p<h)h=p,c+=u;else{const m=l(c-u),b=Math.abs(o-m)/a;b<h?(h=b,c-=u):u/=2}if(d++,d>500)break}return c};e.t2length=r})(Nh);Object.defineProperty(en,"__esModule",{value:!0});en.Path=void 0;const Jd=ut,Qd=Ht,tf=ct,Fi=Nh;class Vt extends Qd.Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Vt.parsePathData(this.data()),this.pathLength=Vt.getPathLength(this.dataArray)}_sceneFunc(t){const i=this.dataArray;t.beginPath();let n=!1;for(let m=0;m<i.length;m++){const b=i[m].command,y=i[m].points;switch(b){case"L":t.lineTo(y[0],y[1]);break;case"M":t.moveTo(y[0],y[1]);break;case"C":t.bezierCurveTo(y[0],y[1],y[2],y[3],y[4],y[5]);break;case"Q":t.quadraticCurveTo(y[0],y[1],y[2],y[3]);break;case"A":var s=y[0],r=y[1],o=y[2],a=y[3],l=y[4],h=y[5],c=y[6],u=y[7],d=o>a?o:a,f=o>a?1:o/a,p=o>a?a/o:1;t.translate(s,r),t.rotate(c),t.scale(f,p),t.arc(0,0,d,l,l+h,1-u),t.scale(1/f,1/p),t.rotate(-c),t.translate(-s,-r);break;case"z":n=!0,t.closePath();break}}!n&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(l){if(l.command==="A"){const h=l.points[4],c=l.points[5],u=l.points[4]+c;let d=Math.PI/180;if(Math.abs(h-u)<d&&(d=Math.abs(h-u)),c<0)for(let f=h-d;f>u;f-=d){const p=Vt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);t.push(p.x,p.y)}else for(let f=h+d;f<u;f+=d){const p=Vt.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,0);t.push(p.x,p.y)}}else if(l.command==="C")for(let h=0;h<=1;h+=.01){const c=Vt.getPointOnCubicBezier(h,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);t.push(c.x,c.y)}else t=t.concat(l.points)});let i=t[0],n=t[0],s=t[1],r=t[1],o,a;for(let l=0;l<t.length/2;l++)o=t[l*2],a=t[l*2+1],isNaN(o)||(i=Math.min(i,o),n=Math.max(n,o)),isNaN(a)||(s=Math.min(s,a),r=Math.max(r,a));return{x:i,y:s,width:n-i,height:r-s}}getLength(){return this.pathLength}getPointAtLength(t){return Vt.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,i,n,s){return Math.sqrt((n-t)*(n-t)+(s-i)*(s-i))}static getPathLength(t){let i=0;for(let n=0;n<t.length;++n)i+=t[n].pathLength;return i}static getPointAtLengthOfDataArray(t,i){let n,s=0,r=i.length;if(!r)return null;for(;s<r&&t>i[s].pathLength;)t-=i[s].pathLength,++s;if(s===r)return n=i[s-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=i[s].points.slice(0,2),{x:n[0],y:n[1]};const o=i[s],a=o.points;switch(o.command){case"L":return Vt.getPointOnLine(t,o.start.x,o.start.y,a[0],a[1]);case"C":return Vt.getPointOnCubicBezier((0,Fi.t2length)(t,Vt.getPathLength(i),m=>(0,Fi.getCubicArcLength)([o.start.x,a[0],a[2],a[4]],[o.start.y,a[1],a[3],a[5]],m)),o.start.x,o.start.y,a[0],a[1],a[2],a[3],a[4],a[5]);case"Q":return Vt.getPointOnQuadraticBezier((0,Fi.t2length)(t,Vt.getPathLength(i),m=>(0,Fi.getQuadraticArcLength)([o.start.x,a[0],a[2]],[o.start.y,a[1],a[3]],m)),o.start.x,o.start.y,a[0],a[1],a[2],a[3]);case"A":var l=a[0],h=a[1],c=a[2],u=a[3],d=a[4],f=a[5],p=a[6];return d+=f*t/o.pathLength,Vt.getPointOnEllipticalArc(l,h,c,u,d,p)}return null}static getPointOnLine(t,i,n,s,r,o,a){o=o??i,a=a??n;const l=this.getLineLength(i,n,s,r);if(l<1e-10)return{x:i,y:n};if(s===i)return{x:o,y:a+(r>n?t:-t)};const h=(r-n)/(s-i),c=Math.sqrt(t*t/(1+h*h))*(s<i?-1:1),u=h*c;if(Math.abs(a-n-h*(o-i))<1e-10)return{x:o+c,y:a+u};const d=((o-i)*(s-i)+(a-n)*(r-n))/(l*l),f=i+d*(s-i),p=n+d*(r-n),m=this.getLineLength(o,a,f,p),b=Math.sqrt(t*t-m*m),y=Math.sqrt(b*b/(1+h*h))*(s<i?-1:1),P=h*y;return{x:f+y,y:p+P}}static getPointOnCubicBezier(t,i,n,s,r,o,a,l,h){function c(b){return b*b*b}function u(b){return 3*b*b*(1-b)}function d(b){return 3*b*(1-b)*(1-b)}function f(b){return(1-b)*(1-b)*(1-b)}const p=l*c(t)+o*u(t)+s*d(t)+i*f(t),m=h*c(t)+a*u(t)+r*d(t)+n*f(t);return{x:p,y:m}}static getPointOnQuadraticBezier(t,i,n,s,r,o,a){function l(f){return f*f}function h(f){return 2*f*(1-f)}function c(f){return(1-f)*(1-f)}const u=o*l(t)+s*h(t)+i*c(t),d=a*l(t)+r*h(t)+n*c(t);return{x:u,y:d}}static getPointOnEllipticalArc(t,i,n,s,r,o){const a=Math.cos(o),l=Math.sin(o),h={x:n*Math.cos(r),y:s*Math.sin(r)};return{x:t+(h.x*a-h.y*l),y:i+(h.x*l+h.y*a)}}static parsePathData(t){if(!t)return[];let i=t;const n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];i=i.replace(new RegExp(" ","g"),",");for(var s=0;s<n.length;s++)i=i.replace(new RegExp(n[s],"g"),"|"+n[s]);const r=i.split("|"),o=[],a=[];let l=0,h=0;const c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let u;for(s=1;s<r.length;s++){let x=r[s],R=x.charAt(0);for(x=x.slice(1),a.length=0;u=c.exec(x);)a.push(u[0]);const S=[];for(let T=0,O=a.length;T<O;T++){if(a[T]==="00"){S.push(0,0);continue}const j=parseFloat(a[T]);isNaN(j)?S.push(0):S.push(j)}for(;S.length>0&&!isNaN(S[0]);){let T="",O=[];const j=l,et=h;var d,f,p,m,b,y,P,g,_,v;switch(R){case"l":l+=S.shift(),h+=S.shift(),T="L",O.push(l,h);break;case"L":l=S.shift(),h=S.shift(),O.push(l,h);break;case"m":var A=S.shift(),N=S.shift();if(l+=A,h+=N,T="M",o.length>2&&o[o.length-1].command==="z"){for(let U=o.length-2;U>=0;U--)if(o[U].command==="M"){l=o[U].points[0]+A,h=o[U].points[1]+N;break}}O.push(l,h),R="l";break;case"M":l=S.shift(),h=S.shift(),T="M",O.push(l,h),R="L";break;case"h":l+=S.shift(),T="L",O.push(l,h);break;case"H":l=S.shift(),T="L",O.push(l,h);break;case"v":h+=S.shift(),T="L",O.push(l,h);break;case"V":h=S.shift(),T="L",O.push(l,h);break;case"C":O.push(S.shift(),S.shift(),S.shift(),S.shift()),l=S.shift(),h=S.shift(),O.push(l,h);break;case"c":O.push(l+S.shift(),h+S.shift(),l+S.shift(),h+S.shift()),l+=S.shift(),h+=S.shift(),T="C",O.push(l,h);break;case"S":f=l,p=h,d=o[o.length-1],d.command==="C"&&(f=l+(l-d.points[2]),p=h+(h-d.points[3])),O.push(f,p,S.shift(),S.shift()),l=S.shift(),h=S.shift(),T="C",O.push(l,h);break;case"s":f=l,p=h,d=o[o.length-1],d.command==="C"&&(f=l+(l-d.points[2]),p=h+(h-d.points[3])),O.push(f,p,l+S.shift(),h+S.shift()),l+=S.shift(),h+=S.shift(),T="C",O.push(l,h);break;case"Q":O.push(S.shift(),S.shift()),l=S.shift(),h=S.shift(),O.push(l,h);break;case"q":O.push(l+S.shift(),h+S.shift()),l+=S.shift(),h+=S.shift(),T="Q",O.push(l,h);break;case"T":f=l,p=h,d=o[o.length-1],d.command==="Q"&&(f=l+(l-d.points[0]),p=h+(h-d.points[1])),l=S.shift(),h=S.shift(),T="Q",O.push(f,p,l,h);break;case"t":f=l,p=h,d=o[o.length-1],d.command==="Q"&&(f=l+(l-d.points[0]),p=h+(h-d.points[1])),l+=S.shift(),h+=S.shift(),T="Q",O.push(f,p,l,h);break;case"A":m=S.shift(),b=S.shift(),y=S.shift(),P=S.shift(),g=S.shift(),_=l,v=h,l=S.shift(),h=S.shift(),T="A",O=this.convertEndpointToCenterParameterization(_,v,l,h,P,g,m,b,y);break;case"a":m=S.shift(),b=S.shift(),y=S.shift(),P=S.shift(),g=S.shift(),_=l,v=h,l+=S.shift(),h+=S.shift(),T="A",O=this.convertEndpointToCenterParameterization(_,v,l,h,P,g,m,b,y);break}o.push({command:T||R,points:O,start:{x:j,y:et},pathLength:this.calcLength(j,et,T||R,O)})}(R==="z"||R==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,i,n,s){let r,o,a,l;const h=Vt;switch(n){case"L":return h.getLineLength(t,i,s[0],s[1]);case"C":return(0,Fi.getCubicArcLength)([t,s[0],s[2],s[4]],[i,s[1],s[3],s[5]],1);case"Q":return(0,Fi.getQuadraticArcLength)([t,s[0],s[2]],[i,s[1],s[3]],1);case"A":r=0;var c=s[4],u=s[5],d=s[4]+u,f=Math.PI/180;if(Math.abs(c-d)<f&&(f=Math.abs(c-d)),o=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),u<0)for(l=c-f;l>d;l-=f)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=c+f;l<d;l+=f)a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],l,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=h.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],d,0),r+=h.getLineLength(o.x,o.y,a.x,a.y),r}return 0}static convertEndpointToCenterParameterization(t,i,n,s,r,o,a,l,h){const c=h*(Math.PI/180),u=Math.cos(c)*(t-n)/2+Math.sin(c)*(i-s)/2,d=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(i-s)/2,f=u*u/(a*a)+d*d/(l*l);f>1&&(a*=Math.sqrt(f),l*=Math.sqrt(f));let p=Math.sqrt((a*a*(l*l)-a*a*(d*d)-l*l*(u*u))/(a*a*(d*d)+l*l*(u*u)));r===o&&(p*=-1),isNaN(p)&&(p=0);const m=p*a*d/l,b=p*-l*u/a,y=(t+n)/2+Math.cos(c)*m-Math.sin(c)*b,P=(i+s)/2+Math.sin(c)*m+Math.cos(c)*b,g=function(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])},_=function(S,T){return(S[0]*T[0]+S[1]*T[1])/(g(S)*g(T))},v=function(S,T){return(S[0]*T[1]<S[1]*T[0]?-1:1)*Math.acos(_(S,T))},A=v([1,0],[(u-m)/a,(d-b)/l]),N=[(u-m)/a,(d-b)/l],x=[(-1*u-m)/a,(-1*d-b)/l];let R=v(N,x);return _(N,x)<=-1&&(R=Math.PI),_(N,x)>=1&&(R=0),o===0&&R>0&&(R=R-2*Math.PI),o===1&&R<0&&(R=R+2*Math.PI),[y,P,a,l,A,R,c,o]}}en.Path=Vt;Vt.prototype.className="Path";Vt.prototype._attrsAffectingSize=["data"];(0,tf._registerNode)(Vt);Jd.Factory.addGetterSetter(Vt,"data");Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Arrow=void 0;const Os=ut,ef=Fn,Fh=nt,nf=ct,Wa=en;class Pi extends ef.Line{_sceneFunc(t){super._sceneFunc(t);const i=Math.PI*2,n=this.points();let s=n;const r=this.tension()!==0&&n.length>4;r&&(s=this.getTensionPoints());const o=this.pointerLength(),a=n.length;let l,h;if(r){const d=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],n[a-2],n[a-1]],f=Wa.Path.calcLength(s[s.length-4],s[s.length-3],"C",d),p=Wa.Path.getPointOnQuadraticBezier(Math.min(1,1-o/f),d[0],d[1],d[2],d[3],d[4],d[5]);l=n[a-2]-p.x,h=n[a-1]-p.y}else l=n[a-2]-n[a-4],h=n[a-1]-n[a-3];const c=(Math.atan2(h,l)+i)%i,u=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[a-2],n[a-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-o,u/2),t.lineTo(-o,-u/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(n[0],n[1]),r?(l=(s[0]+s[2])/2-n[0],h=(s[1]+s[3])/2-n[1]):(l=n[2]-n[0],h=n[3]-n[1]),t.rotate((Math.atan2(-h,-l)+i)%i),t.moveTo(0,0),t.lineTo(-o,u/2),t.lineTo(-o,-u/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const i=this.dashEnabled();i&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),i&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),i=this.pointerWidth()/2;return{x:t.x-i,y:t.y-i,width:t.width+i*2,height:t.height+i*2}}}Ms.Arrow=Pi;Pi.prototype.className="Arrow";(0,nf._registerNode)(Pi);Os.Factory.addGetterSetter(Pi,"pointerLength",10,(0,Fh.getNumberValidator)());Os.Factory.addGetterSetter(Pi,"pointerWidth",10,(0,Fh.getNumberValidator)());Os.Factory.addGetterSetter(Pi,"pointerAtBeginning",!1);Os.Factory.addGetterSetter(Pi,"pointerAtEnding",!0);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});Ns.Circle=void 0;const sf=ut,rf=Ht,of=nt,af=ct;class nn extends rf.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Ns.Circle=nn;nn.prototype._centroid=!0;nn.prototype.className="Circle";nn.prototype._attrsAffectingSize=["radius"];(0,af._registerNode)(nn);sf.Factory.addGetterSetter(nn,"radius",0,(0,of.getNumberValidator)());var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.Ellipse=void 0;const zo=ut,lf=Ht,kh=nt,hf=ct;class ci extends lf.Shape{_sceneFunc(t){const i=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),i!==n&&t.scale(1,n/i),t.arc(0,0,i,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Fs.Ellipse=ci;ci.prototype.className="Ellipse";ci.prototype._centroid=!0;ci.prototype._attrsAffectingSize=["radiusX","radiusY"];(0,hf._registerNode)(ci);zo.Factory.addComponentsGetterSetter(ci,"radius",["x","y"]);zo.Factory.addGetterSetter(ci,"radiusX",0,(0,kh.getNumberValidator)());zo.Factory.addGetterSetter(ci,"radiusY",0,(0,kh.getNumberValidator)());var ks={};Object.defineProperty(ks,"__esModule",{value:!0});ks.Image=void 0;const kr=Ft,Ei=ut,cf=Ht,uf=ct,kn=nt;let Oe=class Lh extends cf.Shape{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){const t=!!this.cornerRadius(),i=this.hasShadow();return t&&i?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const i=this.getWidth(),n=this.getHeight(),s=this.cornerRadius(),r=this.attrs.image;let o;if(r){const a=this.attrs.cropWidth,l=this.attrs.cropHeight;a&&l?o=[r,this.cropX(),this.cropY(),a,l,0,0,i,n]:o=[r,0,0,i,n]}(this.hasFill()||this.hasStroke()||s)&&(t.beginPath(),s?kr.Util.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)),r&&(s&&t.clip(),t.drawImage.apply(t,o))}_hitFunc(t){const i=this.width(),n=this.height(),s=this.cornerRadius();t.beginPath(),s?kr.Util.drawRoundedRectPath(t,i,n,s):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,i;return(t=this.attrs.width)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.width}getHeight(){var t,i;return(t=this.attrs.height)!==null&&t!==void 0?t:(i=this.image())===null||i===void 0?void 0:i.height}static fromURL(t,i,n=null){const s=kr.Util.createImageElement();s.onload=function(){const r=new Lh({image:s});i(r)},s.onerror=n,s.crossOrigin="Anonymous",s.src=t}};ks.Image=Oe;Oe.prototype.className="Image";(0,uf._registerNode)(Oe);Ei.Factory.addGetterSetter(Oe,"cornerRadius",0,(0,kn.getNumberOrArrayOfNumbersValidator)(4));Ei.Factory.addGetterSetter(Oe,"image");Ei.Factory.addComponentsGetterSetter(Oe,"crop",["x","y","width","height"]);Ei.Factory.addGetterSetter(Oe,"cropX",0,(0,kn.getNumberValidator)());Ei.Factory.addGetterSetter(Oe,"cropY",0,(0,kn.getNumberValidator)());Ei.Factory.addGetterSetter(Oe,"cropWidth",0,(0,kn.getNumberValidator)());Ei.Factory.addGetterSetter(Oe,"cropHeight",0,(0,kn.getNumberValidator)());var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Tag=Ki.Label=void 0;const Ls=ut,df=Ht,ff=Qi,Wo=nt,Dh=ct,Gh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],gf="Change.konva",pf="none",io="up",no="right",so="down",ro="left",mf=Gh.length;class jo extends ff.Group{constructor(t){super(t),this.on("add.konva",function(i){this._addListeners(i.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let i=this,n;const s=function(){i._sync()};for(n=0;n<mf;n++)t.on(Gh[n]+gf,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),i=this.getTag(),n,s,r,o,a,l,h;if(t&&i){switch(n=t.width(),s=t.height(),r=i.pointerDirection(),o=i.pointerWidth(),h=i.pointerHeight(),a=0,l=0,r){case io:a=n/2,l=-1*h;break;case no:a=n+o,l=s/2;break;case so:a=n/2,l=s+h;break;case ro:a=-1*o,l=s/2;break}i.setAttrs({x:-1*a,y:-1*l,width:n,height:s}),t.setAttrs({x:-1*a,y:-1*l})}}}Ki.Label=jo;jo.prototype.className="Label";(0,Dh._registerNode)(jo);class Ti extends df.Shape{_sceneFunc(t){const i=this.width(),n=this.height(),s=this.pointerDirection(),r=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,h=0,c=0,u=0;typeof a=="number"?l=h=c=u=Math.min(a,i/2,n/2):(l=Math.min(a[0]||0,i/2,n/2),h=Math.min(a[1]||0,i/2,n/2),u=Math.min(a[2]||0,i/2,n/2),c=Math.min(a[3]||0,i/2,n/2)),t.beginPath(),t.moveTo(l,0),s===io&&(t.lineTo((i-r)/2,0),t.lineTo(i/2,-1*o),t.lineTo((i+r)/2,0)),t.lineTo(i-h,0),t.arc(i-h,h,h,Math.PI*3/2,0,!1),s===no&&(t.lineTo(i,(n-o)/2),t.lineTo(i+r,n/2),t.lineTo(i,(n+o)/2)),t.lineTo(i,n-u),t.arc(i-u,n-u,u,0,Math.PI/2,!1),s===so&&(t.lineTo((i+r)/2,n),t.lineTo(i/2,n+o),t.lineTo((i-r)/2,n)),t.lineTo(c,n),t.arc(c,n-c,c,Math.PI/2,Math.PI,!1),s===ro&&(t.lineTo(0,(n+o)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-o)/2)),t.lineTo(0,l),t.arc(l,l,l,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,i=0,n=this.pointerWidth(),s=this.pointerHeight(),r=this.pointerDirection(),o=this.width(),a=this.height();return r===io?(i-=s,a+=s):r===so?a+=s:r===ro?(t-=n*1.5,o+=n):r===no&&(o+=n*1.5),{x:t,y:i,width:o,height:a}}}Ki.Tag=Ti;Ti.prototype.className="Tag";(0,Dh._registerNode)(Ti);Ls.Factory.addGetterSetter(Ti,"pointerDirection",pf);Ls.Factory.addGetterSetter(Ti,"pointerWidth",0,(0,Wo.getNumberValidator)());Ls.Factory.addGetterSetter(Ti,"pointerHeight",0,(0,Wo.getNumberValidator)());Ls.Factory.addGetterSetter(Ti,"cornerRadius",0,(0,Wo.getNumberOrArrayOfNumbersValidator)(4));var Ln={};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.Rect=void 0;const _f=ut,yf=Ht,vf=ct,bf=Ft,Sf=nt;class Ds extends yf.Shape{_sceneFunc(t){const i=this.cornerRadius(),n=this.width(),s=this.height();t.beginPath(),i?bf.Util.drawRoundedRectPath(t,n,s,i):t.rect(0,0,n,s),t.closePath(),t.fillStrokeShape(this)}}Ln.Rect=Ds;Ds.prototype.className="Rect";(0,vf._registerNode)(Ds);_f.Factory.addGetterSetter(Ds,"cornerRadius",0,(0,Sf.getNumberOrArrayOfNumbersValidator)(4));var Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.RegularPolygon=void 0;const Ih=ut,wf=Ht,Uh=nt,Cf=ct;class Ai extends wf.Shape{_sceneFunc(t){const i=this._getPoints();t.beginPath(),t.moveTo(i[0].x,i[0].y);for(let n=1;n<i.length;n++)t.lineTo(i[n].x,i[n].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,i=this.attrs.radius||0,n=[];for(let s=0;s<t;s++)n.push({x:i*Math.sin(s*2*Math.PI/t),y:-1*i*Math.cos(s*2*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();let i=t[0].x,n=t[0].y,s=t[0].x,r=t[0].y;return t.forEach(o=>{i=Math.min(i,o.x),n=Math.max(n,o.x),s=Math.min(s,o.y),r=Math.max(r,o.y)}),{x:i,y:s,width:n-i,height:r-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Gs.RegularPolygon=Ai;Ai.prototype.className="RegularPolygon";Ai.prototype._centroid=!0;Ai.prototype._attrsAffectingSize=["radius"];(0,Cf._registerNode)(Ai);Ih.Factory.addGetterSetter(Ai,"radius",0,(0,Uh.getNumberValidator)());Ih.Factory.addGetterSetter(Ai,"sides",0,(0,Uh.getNumberValidator)());var Is={};Object.defineProperty(Is,"__esModule",{value:!0});Is.Ring=void 0;const Bh=ut,xf=Ht,Vh=nt,Pf=ct,ja=Math.PI*2;class Mi extends xf.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,ja,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),ja,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Is.Ring=Mi;Mi.prototype.className="Ring";Mi.prototype._centroid=!0;Mi.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Pf._registerNode)(Mi);Bh.Factory.addGetterSetter(Mi,"innerRadius",0,(0,Vh.getNumberValidator)());Bh.Factory.addGetterSetter(Mi,"outerRadius",0,(0,Vh.getNumberValidator)());var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Sprite=void 0;const Ri=ut,Ef=Ht,Tf=tn,$h=nt,Af=ct;class Ne extends Ef.Shape{constructor(t){super(t),this._updated=!0,this.anim=new Tf.Animation(()=>{const i=this._updated;return this._updated=!1,i}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,r=this.animations()[i],o=this.frameOffsets(),a=r[s+0],l=r[s+1],h=r[s+2],c=r[s+3],u=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,h,c),t.closePath(),t.fillStrokeShape(this)),u)if(o){const d=o[i],f=n*2;t.drawImage(u,a,l,h,c,d[f+0],d[f+1],h,c)}else t.drawImage(u,a,l,h,c,0,0,h,c)}_hitFunc(t){const i=this.animation(),n=this.frameIndex(),s=n*4,r=this.animations()[i],o=this.frameOffsets(),a=r[s+2],l=r[s+3];if(t.beginPath(),o){const h=o[i],c=n*2;t.rect(h[c+0],h[c+1],a,l)}else t.rect(0,0,a,l);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),i=this.animation(),n=this.animations(),s=n[i],r=s.length/4;t<r-1?this.frameIndex(t+1):this.frameIndex(0)}}Us.Sprite=Ne;Ne.prototype.className="Sprite";(0,Af._registerNode)(Ne);Ri.Factory.addGetterSetter(Ne,"animation");Ri.Factory.addGetterSetter(Ne,"animations");Ri.Factory.addGetterSetter(Ne,"frameOffsets");Ri.Factory.addGetterSetter(Ne,"image");Ri.Factory.addGetterSetter(Ne,"frameIndex",0,(0,$h.getNumberValidator)());Ri.Factory.addGetterSetter(Ne,"frameRate",17,(0,$h.getNumberValidator)());Ri.Factory.backCompat(Ne,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});var Bs={};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Star=void 0;const Ko=ut,Mf=Ht,Yo=nt,Rf=ct;class ui extends Mf.Shape{_sceneFunc(t){const i=this.innerRadius(),n=this.outerRadius(),s=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(let r=1;r<s*2;r++){const o=r%2===0?n:i,a=o*Math.sin(r*Math.PI/s),l=-1*o*Math.cos(r*Math.PI/s);t.lineTo(a,l)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Bs.Star=ui;ui.prototype.className="Star";ui.prototype._centroid=!0;ui.prototype._attrsAffectingSize=["innerRadius","outerRadius"];(0,Rf._registerNode)(ui);Ko.Factory.addGetterSetter(ui,"numPoints",5,(0,Yo.getNumberValidator)());Ko.Factory.addGetterSetter(ui,"innerRadius",0,(0,Yo.getNumberValidator)());Ko.Factory.addGetterSetter(ui,"outerRadius",0,(0,Yo.getNumberValidator)());var sn={};Object.defineProperty(sn,"__esModule",{value:!0});sn.Text=void 0;sn.stringToArray=Hh;const oo=Ft,te=ut,Of=Ht,Lr=ct,di=nt,Nf=ct;function Hh(e){return[...e].reduce((t,i,n,s)=>(new RegExp("\\p{Emoji_Modifier_Base}\\p{Emoji_Modifier}?(?:\\u200D\\p{Emoji_Presentation})+","u").test(i)?t.push(i):new RegExp("\\p{Regional_Indicator}{2}","u").test(i+(s[n+1]||""))?t.push(i+s[n+1]):n>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(i)?t[t.length-1]+=i:t.push(i),t),[])}const ki="auto",Ff="center",zh="inherit",hn="justify",kf="Change.konva",Lf="2d",Ka="-",Wh="left",Df="text",Gf="Text",If="top",Uf="bottom",Ya="middle",jh="normal",Bf="px ",Vn=" ",Vf="right",Xa="rtl",$f="word",Hf="char",qa="none",Dr="…",Kh=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],zf=Kh.length;function Wf(e){return e.split(",").map(t=>{t=t.trim();const i=t.indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return i&&!n&&(t=`"${t}"`),t}).join(", ")}let $n;function Gr(){return $n||($n=oo.Util.createCanvasElement().getContext(Lf),$n)}function jf(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Kf(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Yf(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}class Dt extends Of.Shape{constructor(t){super(Yf(t)),this._partialTextX=0,this._partialTextY=0;for(let i=0;i<zf;i++)this.on(Kh[i]+kf,this._setTextData);this._setTextData()}_sceneFunc(t){const i=this.textArr,n=i.length;if(!this.text())return;let s=this.padding(),r=this.fontSize(),o=this.lineHeight()*r,a=this.verticalAlign(),l=this.direction(),h=0,c=this.align(),u=this.getWidth(),d=this.letterSpacing(),f=this.fill(),p=this.textDecoration(),m=p.indexOf("underline")!==-1,b=p.indexOf("line-through")!==-1,y;l=l===zh?t.direction:l;let P=o/2,g=Ya;if(Lr.Konva._fixTextRendering){const j=this.measureSize("M");g="alphabetic",P=(j.fontBoundingBoxAscent-j.fontBoundingBoxDescent)/2+o/2}var _=0,v=0;for(l===Xa&&t.setAttr("direction",l),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",g),t.setAttr("textAlign",Wh),a===Ya?h=(this.getHeight()-n*o-s*2)/2:a===Uf&&(h=this.getHeight()-n*o-s*2),t.translate(s,h+s),y=0;y<n;y++){var _=0,v=0,A=i[y],N=A.text,x=A.width,R=A.lastInParagraph,S,T,O;if(t.save(),c===Vf?_+=u-x-s*2:c===Ff&&(_+=(u-x-s*2)/2),m){t.save(),t.beginPath();const U=Lr.Konva._fixTextRendering?Math.round(r/4):Math.round(r/2),B=_,Y=P+v+U;t.moveTo(B,Y),S=N.split(" ").length-1,T=S===0,O=c===hn&&!R?u-s*2:x,t.lineTo(B+Math.round(O),Y),t.lineWidth=r/15;const J=this._getLinearGradient();t.strokeStyle=J||f,t.stroke(),t.restore()}if(b){t.save(),t.beginPath();const U=Lr.Konva._fixTextRendering?-Math.round(r/4):0;t.moveTo(_,P+v+U),S=N.split(" ").length-1,T=S===0,O=c===hn&&R&&!T?u-s*2:x,t.lineTo(_+Math.round(O),P+v+U),t.lineWidth=r/15;const B=this._getLinearGradient();t.strokeStyle=B||f,t.stroke(),t.restore()}if(l!==Xa&&(d!==0||c===hn)){S=N.split(" ").length-1;const U=Hh(N);for(let B=0;B<U.length;B++){const Y=U[B];Y===" "&&!R&&c===hn&&(_+=(u-s*2-x)/S),this._partialTextX=_,this._partialTextY=P+v,this._partialText=Y,t.fillStrokeShape(this),_+=this.measureSize(Y).width+d}}else d!==0&&t.setAttr("letterSpacing",`${d}px`),this._partialTextX=_,this._partialTextY=P+v,this._partialText=N,t.fillStrokeShape(this);t.restore(),n>1&&(P+=o)}}_hitFunc(t){const i=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}setText(t){const i=oo.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(Df,i),this}getWidth(){return this.attrs.width===ki||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===ki||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return oo.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var i,n,s,r,o,a,l,h,c,u,d;let f=Gr(),p=this.fontSize(),m;f.save(),f.font=this._getContextFont(),m=f.measureText(t),f.restore();const b=p/100;return{actualBoundingBoxAscent:(i=m.actualBoundingBoxAscent)!==null&&i!==void 0?i:71.58203125*b,actualBoundingBoxDescent:(n=m.actualBoundingBoxDescent)!==null&&n!==void 0?n:0,actualBoundingBoxLeft:(s=m.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*b,actualBoundingBoxRight:(r=m.actualBoundingBoxRight)!==null&&r!==void 0?r:75.732421875*b,alphabeticBaseline:(o=m.alphabeticBaseline)!==null&&o!==void 0?o:0,emHeightAscent:(a=m.emHeightAscent)!==null&&a!==void 0?a:100*b,emHeightDescent:(l=m.emHeightDescent)!==null&&l!==void 0?l:-20*b,fontBoundingBoxAscent:(h=m.fontBoundingBoxAscent)!==null&&h!==void 0?h:91*b,fontBoundingBoxDescent:(c=m.fontBoundingBoxDescent)!==null&&c!==void 0?c:21*b,hangingBaseline:(u=m.hangingBaseline)!==null&&u!==void 0?u:72.80000305175781*b,ideographicBaseline:(d=m.ideographicBaseline)!==null&&d!==void 0?d:-21*b,width:m.width,height:p}}_getContextFont(){return this.fontStyle()+Vn+this.fontVariant()+Vn+(this.fontSize()+Bf)+Wf(this.fontFamily())}_addTextLine(t){this.align()===hn&&(t=t.trim());const n=this._getTextWidth(t);return this.textArr.push({text:t,width:n,lastInParagraph:!1})}_getTextWidth(t){const i=this.letterSpacing(),n=t.length;return Gr().measureText(t).width+(n?i*(n-1):0)}_setTextData(){let t=this.text().split(`
`),i=+this.fontSize(),n=0,s=this.lineHeight()*i,r=this.attrs.width,o=this.attrs.height,a=r!==ki&&r!==void 0,l=o!==ki&&o!==void 0,h=this.padding(),c=r-h*2,u=o-h*2,d=0,f=this.wrap(),p=f!==qa,m=f!==Hf&&p,b=this.ellipsis();this.textArr=[],Gr().font=this._getContextFont();const y=b?this._getTextWidth(Dr):0;for(let g=0,_=t.length;g<_;++g){let v=t[g],A=this._getTextWidth(v);if(a&&A>c)for(;v.length>0;){let N=0,x=v.length,R="",S=0;for(;N<x;){const T=N+x>>>1,O=v.slice(0,T+1),j=this._getTextWidth(O)+y;j<=c?(N=T+1,R=O,S=j):x=T}if(R){if(m){var P;const O=v[R.length];(O===Vn||O===Ka)&&S<=c?P=R.length:P=Math.max(R.lastIndexOf(Vn),R.lastIndexOf(Ka))+1,P>0&&(N=P,R=R.slice(0,N),S=this._getTextWidth(R))}if(R=R.trimRight(),this._addTextLine(R),n=Math.max(n,S),d+=s,this._shouldHandleEllipsis(d)){this._tryToAddEllipsisToLastLine();break}if(v=v.slice(N),v=v.trimLeft(),v.length>0&&(A=this._getTextWidth(v),A<=c)){this._addTextLine(v),d+=s,n=Math.max(n,A);break}}else break}else this._addTextLine(v),d+=s,n=Math.max(n,A),this._shouldHandleEllipsis(d)&&g<_-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&d+s>u)break}this.textHeight=i,this.textWidth=n}_shouldHandleEllipsis(t){const i=+this.fontSize(),n=this.lineHeight()*i,s=this.attrs.height,r=s!==ki&&s!==void 0,o=this.padding(),a=s-o*2;return!(this.wrap()!==qa)||r&&t+n>a}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,i=t!==ki&&t!==void 0,n=this.padding(),s=t-n*2,r=this.ellipsis(),o=this.textArr[this.textArr.length-1];!o||!r||(i&&(this._getTextWidth(o.text+Dr)<s||(o.text=o.text.slice(0,o.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(o.text+Dr))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,i=this.hasShadow();return t&&i?!0:super._useBufferCanvas()}}sn.Text=Dt;Dt.prototype._fillFunc=jf;Dt.prototype._strokeFunc=Kf;Dt.prototype.className=Gf;Dt.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];(0,Nf._registerNode)(Dt);te.Factory.overWriteSetter(Dt,"width",(0,di.getNumberOrAutoValidator)());te.Factory.overWriteSetter(Dt,"height",(0,di.getNumberOrAutoValidator)());te.Factory.addGetterSetter(Dt,"direction",zh);te.Factory.addGetterSetter(Dt,"fontFamily","Arial");te.Factory.addGetterSetter(Dt,"fontSize",12,(0,di.getNumberValidator)());te.Factory.addGetterSetter(Dt,"fontStyle",jh);te.Factory.addGetterSetter(Dt,"fontVariant",jh);te.Factory.addGetterSetter(Dt,"padding",0,(0,di.getNumberValidator)());te.Factory.addGetterSetter(Dt,"align",Wh);te.Factory.addGetterSetter(Dt,"verticalAlign",If);te.Factory.addGetterSetter(Dt,"lineHeight",1,(0,di.getNumberValidator)());te.Factory.addGetterSetter(Dt,"wrap",$f);te.Factory.addGetterSetter(Dt,"ellipsis",!1,(0,di.getBooleanValidator)());te.Factory.addGetterSetter(Dt,"letterSpacing",0,(0,di.getNumberValidator)());te.Factory.addGetterSetter(Dt,"text","",(0,di.getStringValidator)());te.Factory.addGetterSetter(Dt,"textDecoration","");var Vs={};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.TextPath=void 0;const Ir=Ft,we=ut,Xf=Ht,cn=en,Ur=sn,Yh=nt,qf=ct,Zf="",Xh="normal";function qh(e){e.fillText(this.partialText,0,0)}function Zh(e){e.strokeText(this.partialText,0,0)}class zt extends Xf.Shape{constructor(t){super(t),this.dummyCanvas=Ir.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return cn.Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const i=this.pathLength;return t-1>i?null:cn.Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=cn.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const i=this.textDecoration(),n=this.fill(),s=this.fontSize(),r=this.glyphInfo;i==="underline"&&t.beginPath();for(let o=0;o<r.length;o++){t.save();const a=r[o].p0;t.translate(a.x,a.y),t.rotate(r[o].rotation),this.partialText=r[o].text,t.fillStrokeShape(this),i==="underline"&&(o===0&&t.moveTo(0,s/2+1),t.lineTo(s,s/2+1)),t.restore()}i==="underline"&&(t.strokeStyle=n,t.lineWidth=s/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();const i=this.glyphInfo;if(i.length>=1){const n=i[0].p0;t.moveTo(n.x,n.y)}for(let n=0;n<i.length;n++){const s=i[n].p1;t.lineTo(s.x,s.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Ir.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Ur.Text.prototype.setText.call(this,t)}_getContextFont(){return Ur.Text.prototype._getContextFont.call(this)}_getTextSize(t){const n=this.dummyCanvas.getContext("2d");n.save(),n.font=this._getContextFont();const s=n.measureText(t);return n.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:t,height:i}=this._getTextSize(this.attrs.text);if(this.textWidth=t,this.textHeight=i,this.glyphInfo=[],!this.attrs.data)return null;const n=this.letterSpacing(),s=this.align(),r=this.kerningFunc(),o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);let a=0;s==="center"&&(a=Math.max(0,this.pathLength/2-o/2)),s==="right"&&(a=Math.max(0,this.pathLength-o));const l=(0,Ur.stringToArray)(this.text());let h=a;for(let c=0;c<l.length;c++){const u=this._getPointAtLength(h);if(!u)return;let d=this._getTextSize(l[c]).width+n;if(l[c]===" "&&s==="justify"){const P=this.text().split(" ").length-1;d+=(this.pathLength-o)/P}const f=this._getPointAtLength(h+d);if(!f)return;const p=cn.Path.getLineLength(u.x,u.y,f.x,f.y);let m=0;if(r)try{m=r(l[c-1],l[c])*this.fontSize()}catch{m=0}u.x+=m,f.x+=m,this.textWidth+=m;const b=cn.Path.getPointOnLine(m+p/2,u.x,u.y,f.x,f.y),y=Math.atan2(f.y-u.y,f.x-u.x);this.glyphInfo.push({transposeX:b.x,transposeY:b.y,text:l[c],rotation:y,p0:u,p1:f}),h+=d}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(h){t.push(h.p0.x),t.push(h.p0.y),t.push(h.p1.x),t.push(h.p1.y)});let i=t[0]||0,n=t[0]||0,s=t[1]||0,r=t[1]||0,o,a;for(let h=0;h<t.length/2;h++)o=t[h*2],a=t[h*2+1],i=Math.min(i,o),n=Math.max(n,o),s=Math.min(s,a),r=Math.max(r,a);const l=this.fontSize();return{x:i-l/2,y:s-l/2,width:n-i+l,height:r-s+l}}destroy(){return Ir.Util.releaseCanvas(this.dummyCanvas),super.destroy()}}Vs.TextPath=zt;zt.prototype._fillFunc=qh;zt.prototype._strokeFunc=Zh;zt.prototype._fillFuncHit=qh;zt.prototype._strokeFuncHit=Zh;zt.prototype.className="TextPath";zt.prototype._attrsAffectingSize=["text","fontSize","data"];(0,qf._registerNode)(zt);we.Factory.addGetterSetter(zt,"data");we.Factory.addGetterSetter(zt,"fontFamily","Arial");we.Factory.addGetterSetter(zt,"fontSize",12,(0,Yh.getNumberValidator)());we.Factory.addGetterSetter(zt,"fontStyle",Xh);we.Factory.addGetterSetter(zt,"align","left");we.Factory.addGetterSetter(zt,"letterSpacing",0,(0,Yh.getNumberValidator)());we.Factory.addGetterSetter(zt,"textBaseline","middle");we.Factory.addGetterSetter(zt,"fontVariant",Xh);we.Factory.addGetterSetter(zt,"text",Zf);we.Factory.addGetterSetter(zt,"textDecoration",null);we.Factory.addGetterSetter(zt,"kerningFunc",null);var $s={};Object.defineProperty($s,"__esModule",{value:!0});$s.Transformer=void 0;const wt=Ft,yt=ut,Za=Ot,Jf=Ht,Qf=Ln,Ja=Qi,_e=ct,fi=nt,t1=ct,Jh="tr-konva",e1=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${Jh}`).join(" "),Qa="nodesRect",i1=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],n1={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},s1="ontouchstart"in _e.Konva._global;function r1(e,t,i){if(e==="rotater")return i;t+=wt.Util.degToRad(n1[e]||0);const n=(wt.Util.radToDeg(t)%360+360)%360;return wt.Util._inRange(n,315+22.5,360)||wt.Util._inRange(n,0,22.5)?"ns-resize":wt.Util._inRange(n,45-22.5,45+22.5)?"nesw-resize":wt.Util._inRange(n,90-22.5,90+22.5)?"ew-resize":wt.Util._inRange(n,135-22.5,135+22.5)?"nwse-resize":wt.Util._inRange(n,180-22.5,180+22.5)?"ns-resize":wt.Util._inRange(n,225-22.5,225+22.5)?"nesw-resize":wt.Util._inRange(n,270-22.5,270+22.5)?"ew-resize":wt.Util._inRange(n,315-22.5,315+22.5)?"nwse-resize":(wt.Util.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}const rs=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],tl=1e8;function o1(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function Qh(e,t,i){const n=i.x+(e.x-i.x)*Math.cos(t)-(e.y-i.y)*Math.sin(t),s=i.y+(e.x-i.x)*Math.sin(t)+(e.y-i.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:n,y:s}}function a1(e,t){const i=o1(e);return Qh(e,t,i)}function l1(e,t,i){let n=t;for(let s=0;s<e.length;s++){const r=_e.Konva.getAngle(e[s]),o=Math.abs(r-t)%(Math.PI*2);Math.min(o,Math.PI*2-o)<i&&(n=r)}return n}let ao=0;class ft extends Ja.Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(e1,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return wt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Jh+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const i=t.filter(s=>s.isAncestorOf(this)?(wt.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=i,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const r=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},o=s._attrsAffectingSize.map(a=>a+"Change."+this._getEventNamespace()).join(" ");s.on(o,r),s.on(i1.map(a=>a+`.${this._getEventNamespace()}`).join(" "),r),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,r),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let i;t.on(`dragstart.${this._getEventNamespace()}`,n=>{i=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(n,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,n=>{if(!i)return;const s=t.getAbsolutePosition(),r=s.x-i.x,o=s.y-i.y;this.nodes().forEach(a=>{if(a===t||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+r,y:l.y+o}),a.startDrag(n)}),i=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Qa),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Qa,this.__getNodeRect)}__getNodeShape(t,i=this.rotation(),n){const s=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(n),o=t.getAbsolutePosition(n),a=s.x*r.x-t.offsetX()*r.x,l=s.y*r.y-t.offsetY()*r.y,h=(_e.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:o.x+a*Math.cos(h)+l*Math.sin(-h),y:o.y+l*Math.cos(h)+a*Math.sin(h),width:s.width*r.x,height:s.height*r.y,rotation:h};return Qh(c,-_e.Konva.getAngle(i),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-tl,y:-tl,width:0,height:0,rotation:0};const i=[];this.nodes().map(h=>{const c=h.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),u=[{x:c.x,y:c.y},{x:c.x+c.width,y:c.y},{x:c.x+c.width,y:c.y+c.height},{x:c.x,y:c.y+c.height}],d=h.getAbsoluteTransform();u.forEach(function(f){const p=d.point(f);i.push(p)})});const n=new wt.Transform;n.rotate(-_e.Konva.getAngle(this.rotation()));let s=1/0,r=1/0,o=-1/0,a=-1/0;i.forEach(function(h){const c=n.point(h);s===void 0&&(s=o=c.x,r=a=c.y),s=Math.min(s,c.x),r=Math.min(r,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y)}),n.invert();const l=n.point({x:s,y:r});return{x:l.x,y:l.y,width:o-s,height:a-r,rotation:_e.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),rs.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const i=new Qf.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:s1?10:"auto"}),n=this;i.on("mousedown touchstart",function(s){n._handleMouseDown(s)}),i.on("dragstart",s=>{i.stopDrag(),s.cancelBubble=!0}),i.on("dragend",s=>{s.cancelBubble=!0}),i.on("mouseenter",()=>{const s=_e.Konva.getAngle(this.rotation()),r=this.rotateAnchorCursor(),o=r1(t,s,r);i.getStage().content&&(i.getStage().content.style.cursor=o),this._cursorChange=!0}),i.on("mouseout",()=>{i.getStage().content&&(i.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(i)}_createBack(){const t=new Jf.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(i,n){const s=n.getParent(),r=s.padding();i.beginPath(),i.rect(-r,-r,n.width()+r*2,n.height()+r*2),i.moveTo(n.width()/2,-r),s.rotateEnabled()&&s.rotateLineVisible()&&i.lineTo(n.width()/2,-s.rotateAnchorOffset()*wt.Util._sign(n.height())-r),i.fillStrokeShape(n)},hitFunc:(i,n)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();i.beginPath(),i.rect(-s,-s,n.width()+s*2,n.height()+s*2),i.fillStrokeShape(n)}});this.add(t),this._proxyDrag(t),t.on("dragstart",i=>{i.cancelBubble=!0}),t.on("dragmove",i=>{i.cancelBubble=!0}),t.on("dragend",i=>{i.cancelBubble=!0}),this.on("dragmove",i=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const i=this._getNodeRect(),n=i.width,s=i.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));this.sin=Math.abs(s/r),this.cos=Math.abs(n/r),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const o=t.target.getAbsolutePosition(),a=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},ao++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:t.evt,target:l})})}_handleMouseMove(t){let i,n,s;const r=this.findOne("."+this._movingAnchorName),o=r.getStage();o.setPointersPositions(t);const a=o.getPointerPosition();let l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const h=r.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(h,l,t)),r.setAbsolutePosition(l);const c=r.getAbsolutePosition();if(h.x===c.x&&h.y===c.y)return;if(this._movingAnchorName==="rotater"){const v=this._getNodeRect();i=r.x()-v.width/2,n=-r.y()+v.height/2;let A=Math.atan2(-n,i)+Math.PI/2;v.height<0&&(A-=Math.PI);const x=_e.Konva.getAngle(this.rotation())+A,R=_e.Konva.getAngle(this.rotationSnapTolerance()),T=l1(this.rotationSnaps(),x,R)-v.rotation,O=a1(v,T);this._fitNodesInto(O,t);return}const u=this.shiftBehavior();let d;u==="inverted"?d=this.keepRatio()&&!t.shiftKey:u==="none"?d=this.keepRatio():d=this.keepRatio()||t.shiftKey;var y=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(d){var f=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(f.y-r.y(),2));var p=this.findOne(".top-left").x()>f.x?-1:1,m=this.findOne(".top-left").y()>f.y?-1:1;i=s*this.cos*p,n=s*this.sin*m,this.findOne(".top-left").x(f.x-i),this.findOne(".top-left").y(f.y-n)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(r.y());else if(this._movingAnchorName==="top-right"){if(d){var f=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(f.y-r.y(),2));var p=this.findOne(".top-right").x()<f.x?-1:1,m=this.findOne(".top-right").y()>f.y?-1:1;i=s*this.cos*p,n=s*this.sin*m,this.findOne(".top-right").x(f.x+i),this.findOne(".top-right").y(f.y-n)}var b=r.position();this.findOne(".top-left").y(b.y),this.findOne(".bottom-right").x(b.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(r.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(r.x());else if(this._movingAnchorName==="bottom-left"){if(d){var f=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(f.x-r.x(),2)+Math.pow(r.y()-f.y,2));var p=f.x<r.x()?-1:1,m=r.y()<f.y?-1:1;i=s*this.cos*p,n=s*this.sin*m,r.x(f.x-i),r.y(f.y+n)}b=r.position(),this.findOne(".top-left").x(b.x),this.findOne(".bottom-right").y(b.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(r.y());else if(this._movingAnchorName==="bottom-right"){if(d){var f=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(r.x()-f.x,2)+Math.pow(r.y()-f.y,2));var p=this.findOne(".bottom-right").x()<f.x?-1:1,m=this.findOne(".bottom-right").y()<f.y?-1:1;i=s*this.cos*p,n=s*this.sin*m,this.findOne(".bottom-right").x(f.x+i),this.findOne(".bottom-right").y(f.y+n)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var y=this.centeredScaling()||t.altKey;if(y){const v=this.findOne(".top-left"),A=this.findOne(".bottom-right"),N=v.x(),x=v.y(),R=this.getWidth()-A.x(),S=this.getHeight()-A.y();A.move({x:-N,y:-x}),v.move({x:R,y:S})}const P=this.findOne(".top-left").getAbsolutePosition();i=P.x,n=P.y;const g=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),_=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:i,y:n,width:g,height:_,rotation:_e.Konva.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var i;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const n=this.getNode();ao--,this._fire("transformend",{evt:t,target:n}),(i=this.getLayer())===null||i===void 0||i.batchDraw(),n&&this._nodes.forEach(s=>{var r;s._fire("transformend",{evt:t,target:s}),(r=s.getLayer())===null||r===void 0||r.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,i){const n=this._getNodeRect(),s=1;if(wt.Util._inRange(t.width,-this.padding()*2-s,s)){this.update();return}if(wt.Util._inRange(t.height,-this.padding()*2-s,s)){this.update();return}const r=new wt.Transform;if(r.rotate(_e.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const d=r.point({x:-this.padding()*2,y:0});t.x+=d.x,t.y+=d.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const d=r.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const d=r.point({x:0,y:-this.padding()*2});t.x+=d.x,t.y+=d.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const d=r.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=d.x,this._anchorDragOffset.y-=d.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const d=this.boundBoxFunc()(n,t);d?t=d:wt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const o=1e7,a=new wt.Transform;a.translate(n.x,n.y),a.rotate(n.rotation),a.scale(n.width/o,n.height/o);const l=new wt.Transform,h=t.width/o,c=t.height/o;this.flipEnabled()===!1?(l.translate(t.x,t.y),l.rotate(t.rotation),l.translate(t.width<0?t.width:0,t.height<0?t.height:0),l.scale(Math.abs(h),Math.abs(c))):(l.translate(t.x,t.y),l.rotate(t.rotation),l.scale(h,c));const u=l.multiply(a.invert());this._nodes.forEach(d=>{var f;const p=d.getParent().getAbsoluteTransform(),m=d.getTransform().copy();m.translate(d.offsetX(),d.offsetY());const b=new wt.Transform;b.multiply(p.copy().invert()).multiply(u).multiply(p).multiply(m);const y=b.decompose();d.setAttrs(y),(f=d.getLayer())===null||f===void 0||f.batchDraw()}),this.rotation(wt.Util._getRotation(t.rotation)),this._nodes.forEach(d=>{this._fire("transform",{evt:i,target:d}),d._fire("transform",{evt:i,target:d})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,i){this.findOne(t).setAttrs(i)}update(){var t;const i=this._getNodeRect();this.rotation(wt.Util._getRotation(i.rotation));const n=i.width,s=i.height,r=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize(),h=this.find("._anchor");h.forEach(u=>{u.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:l/2+a,visible:o&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:l/2+a,visible:o&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:s/2,offsetX:l/2-a,visible:o&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:l/2+a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:s,offsetY:l/2-a,visible:o&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:s,offsetX:l/2-a,offsetY:l/2-a,visible:o&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*wt.Util._sign(s)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const c=this.anchorStyleFunc();c&&h.forEach(u=>{c(u)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Ja.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Za.Node.prototype.toObject.call(this)}clone(t){return Za.Node.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}$s.Transformer=ft;ft.isTransforming=()=>ao>0;function h1(e){return e instanceof Array||wt.Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){rs.indexOf(t)===-1&&wt.Util.warn("Unknown anchor name: "+t+". Available names are: "+rs.join(", "))}),e||[]}ft.prototype.className="Transformer";(0,t1._registerNode)(ft);yt.Factory.addGetterSetter(ft,"enabledAnchors",rs,h1);yt.Factory.addGetterSetter(ft,"flipEnabled",!0,(0,fi.getBooleanValidator)());yt.Factory.addGetterSetter(ft,"resizeEnabled",!0);yt.Factory.addGetterSetter(ft,"anchorSize",10,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"rotateEnabled",!0);yt.Factory.addGetterSetter(ft,"rotateLineVisible",!0);yt.Factory.addGetterSetter(ft,"rotationSnaps",[]);yt.Factory.addGetterSetter(ft,"rotateAnchorOffset",50,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"rotateAnchorCursor","crosshair");yt.Factory.addGetterSetter(ft,"rotationSnapTolerance",5,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"borderEnabled",!0);yt.Factory.addGetterSetter(ft,"anchorStroke","rgb(0, 161, 255)");yt.Factory.addGetterSetter(ft,"anchorStrokeWidth",1,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"anchorFill","white");yt.Factory.addGetterSetter(ft,"anchorCornerRadius",0,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"borderStroke","rgb(0, 161, 255)");yt.Factory.addGetterSetter(ft,"borderStrokeWidth",1,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"borderDash");yt.Factory.addGetterSetter(ft,"keepRatio",!0);yt.Factory.addGetterSetter(ft,"shiftBehavior","default");yt.Factory.addGetterSetter(ft,"centeredScaling",!1);yt.Factory.addGetterSetter(ft,"ignoreStroke",!1);yt.Factory.addGetterSetter(ft,"padding",0,(0,fi.getNumberValidator)());yt.Factory.addGetterSetter(ft,"node");yt.Factory.addGetterSetter(ft,"nodes");yt.Factory.addGetterSetter(ft,"boundBoxFunc");yt.Factory.addGetterSetter(ft,"anchorDragBoundFunc");yt.Factory.addGetterSetter(ft,"anchorStyleFunc");yt.Factory.addGetterSetter(ft,"shouldOverdrawWholeArea",!1);yt.Factory.addGetterSetter(ft,"useSingleNodeRotation",!0);yt.Factory.backCompat(ft,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Wedge=void 0;const zs=ut,c1=Ht,u1=ct,tc=nt,d1=ct;class je extends c1.Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,u1.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Hs.Wedge=je;je.prototype.className="Wedge";je.prototype._centroid=!0;je.prototype._attrsAffectingSize=["radius"];(0,d1._registerNode)(je);zs.Factory.addGetterSetter(je,"radius",0,(0,tc.getNumberValidator)());zs.Factory.addGetterSetter(je,"angle",0,(0,tc.getNumberValidator)());zs.Factory.addGetterSetter(je,"clockwise",!1);zs.Factory.backCompat(je,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Ws={};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.Blur=void 0;const el=ut,f1=Ot,g1=nt;function il(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const p1=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],m1=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function _1(e,t){const i=e.data,n=e.width,s=e.height;let r,o,a,l,h,c,u,d,f,p,m,b,y,P,g,_,v,A,N,x,R,S,T,O,j=t+t+1,et=n-1,U=s-1,B=t+1,Y=B*(B+1)/2,J=new il,kt=null,z=J,Q=null,ht=null,pt=p1[t],Ct=m1[t];for(a=1;a<j;a++)z=z.next=new il,a===B&&(kt=z);for(z.next=J,u=c=0,o=0;o<s;o++){for(_=v=A=N=d=f=p=m=0,b=B*(x=i[c]),y=B*(R=i[c+1]),P=B*(S=i[c+2]),g=B*(T=i[c+3]),d+=Y*x,f+=Y*R,p+=Y*S,m+=Y*T,z=J,a=0;a<B;a++)z.r=x,z.g=R,z.b=S,z.a=T,z=z.next;for(a=1;a<B;a++)l=c+((et<a?et:a)<<2),d+=(z.r=x=i[l])*(O=B-a),f+=(z.g=R=i[l+1])*O,p+=(z.b=S=i[l+2])*O,m+=(z.a=T=i[l+3])*O,_+=x,v+=R,A+=S,N+=T,z=z.next;for(Q=J,ht=kt,r=0;r<n;r++)i[c+3]=T=m*pt>>Ct,T!==0?(T=255/T,i[c]=(d*pt>>Ct)*T,i[c+1]=(f*pt>>Ct)*T,i[c+2]=(p*pt>>Ct)*T):i[c]=i[c+1]=i[c+2]=0,d-=b,f-=y,p-=P,m-=g,b-=Q.r,y-=Q.g,P-=Q.b,g-=Q.a,l=u+((l=r+t+1)<et?l:et)<<2,_+=Q.r=i[l],v+=Q.g=i[l+1],A+=Q.b=i[l+2],N+=Q.a=i[l+3],d+=_,f+=v,p+=A,m+=N,Q=Q.next,b+=x=ht.r,y+=R=ht.g,P+=S=ht.b,g+=T=ht.a,_-=x,v-=R,A-=S,N-=T,ht=ht.next,c+=4;u+=n}for(r=0;r<n;r++){for(v=A=N=_=f=p=m=d=0,c=r<<2,b=B*(x=i[c]),y=B*(R=i[c+1]),P=B*(S=i[c+2]),g=B*(T=i[c+3]),d+=Y*x,f+=Y*R,p+=Y*S,m+=Y*T,z=J,a=0;a<B;a++)z.r=x,z.g=R,z.b=S,z.a=T,z=z.next;for(h=n,a=1;a<=t;a++)c=h+r<<2,d+=(z.r=x=i[c])*(O=B-a),f+=(z.g=R=i[c+1])*O,p+=(z.b=S=i[c+2])*O,m+=(z.a=T=i[c+3])*O,_+=x,v+=R,A+=S,N+=T,z=z.next,a<U&&(h+=n);for(c=r,Q=J,ht=kt,o=0;o<s;o++)l=c<<2,i[l+3]=T=m*pt>>Ct,T>0?(T=255/T,i[l]=(d*pt>>Ct)*T,i[l+1]=(f*pt>>Ct)*T,i[l+2]=(p*pt>>Ct)*T):i[l]=i[l+1]=i[l+2]=0,d-=b,f-=y,p-=P,m-=g,b-=Q.r,y-=Q.g,P-=Q.b,g-=Q.a,l=r+((l=o+B)<U?l:U)*n<<2,d+=_+=Q.r=i[l],f+=v+=Q.g=i[l+1],p+=A+=Q.b=i[l+2],m+=N+=Q.a=i[l+3],Q=Q.next,b+=x=ht.r,y+=R=ht.g,P+=S=ht.b,g+=T=ht.a,_-=x,v-=R,A-=S,N-=T,ht=ht.next,c+=n}}const y1=function(t){const i=Math.round(this.blurRadius());i>0&&_1(t,i)};Ws.Blur=y1;el.Factory.addGetterSetter(f1.Node,"blurRadius",0,(0,g1.getNumberValidator)(),el.Factory.afterSetFilter);var js={};Object.defineProperty(js,"__esModule",{value:!0});js.Brighten=void 0;const nl=ut,v1=Ot,b1=nt,S1=function(e){let t=this.brightness()*255,i=e.data,n=i.length,s;for(s=0;s<n;s+=4)i[s]+=t,i[s+1]+=t,i[s+2]+=t};js.Brighten=S1;nl.Factory.addGetterSetter(v1.Node,"brightness",0,(0,b1.getNumberValidator)(),nl.Factory.afterSetFilter);var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Contrast=void 0;const sl=ut,w1=Ot,C1=nt,x1=function(e){const t=Math.pow((this.contrast()+100)/100,2);let i=e.data,n=i.length,s=150,r=150,o=150,a;for(a=0;a<n;a+=4)s=i[a],r=i[a+1],o=i[a+2],s/=255,s-=.5,s*=t,s+=.5,s*=255,r/=255,r-=.5,r*=t,r+=.5,r*=255,o/=255,o-=.5,o*=t,o+=.5,o*=255,s=s<0?0:s>255?255:s,r=r<0?0:r>255?255:r,o=o<0?0:o>255?255:o,i[a]=s,i[a+1]=r,i[a+2]=o};Ks.Contrast=x1;sl.Factory.addGetterSetter(w1.Node,"contrast",0,(0,C1.getNumberValidator)(),sl.Factory.afterSetFilter);var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Emboss=void 0;const ni=ut,Xs=Ot,P1=Ft,ec=nt,E1=function(e){let t=this.embossStrength()*10,i=this.embossWhiteLevel()*255,n=this.embossDirection(),s=this.embossBlend(),r=0,o=0,a=e.data,l=e.width,h=e.height,c=l*4,u=h;switch(n){case"top-left":r=-1,o=-1;break;case"top":r=-1,o=0;break;case"top-right":r=-1,o=1;break;case"right":r=0,o=1;break;case"bottom-right":r=1,o=1;break;case"bottom":r=1,o=0;break;case"bottom-left":r=1,o=-1;break;case"left":r=0,o=-1;break;default:P1.Util.error("Unknown emboss direction: "+n)}do{const d=(u-1)*c;let f=r;u+f<1&&(f=0),u+f>h&&(f=0);const p=(u-1+f)*l*4;let m=l;do{const b=d+(m-1)*4;let y=o;m+y<1&&(y=0),m+y>l&&(y=0);const P=p+(m-1+y)*4,g=a[b]-a[P],_=a[b+1]-a[P+1],v=a[b+2]-a[P+2];let A=g;const N=A>0?A:-A,x=_>0?_:-_,R=v>0?v:-v;if(x>N&&(A=_),R>N&&(A=v),A*=t,s){const S=a[b]+A,T=a[b+1]+A,O=a[b+2]+A;a[b]=S>255?255:S<0?0:S,a[b+1]=T>255?255:T<0?0:T,a[b+2]=O>255?255:O<0?0:O}else{let S=i-A;S<0?S=0:S>255&&(S=255),a[b]=a[b+1]=a[b+2]=S}}while(--m)}while(--u)};Ys.Emboss=E1;ni.Factory.addGetterSetter(Xs.Node,"embossStrength",.5,(0,ec.getNumberValidator)(),ni.Factory.afterSetFilter);ni.Factory.addGetterSetter(Xs.Node,"embossWhiteLevel",.5,(0,ec.getNumberValidator)(),ni.Factory.afterSetFilter);ni.Factory.addGetterSetter(Xs.Node,"embossDirection","top-left",null,ni.Factory.afterSetFilter);ni.Factory.addGetterSetter(Xs.Node,"embossBlend",!1,null,ni.Factory.afterSetFilter);var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.Enhance=void 0;const rl=ut,T1=Ot,A1=nt;function Br(e,t,i,n,s){let r=i-t,o=s-n,a;return r===0?n+o/2:o===0?n:(a=(e-t)/r,a=o*a+n,a)}const M1=function(e){let t=e.data,i=t.length,n=t[0],s=n,r,o=t[1],a=o,l,h=t[2],c=h,u,d;const f=this.enhance();if(f===0)return;for(d=0;d<i;d+=4)r=t[d+0],r<n?n=r:r>s&&(s=r),l=t[d+1],l<o?o=l:l>a&&(a=l),u=t[d+2],u<h?h=u:u>c&&(c=u);s===n&&(s=255,n=0),a===o&&(a=255,o=0),c===h&&(c=255,h=0);let p,m,b,y,P,g,_,v,A;for(f>0?(m=s+f*(255-s),b=n-f*(n-0),P=a+f*(255-a),g=o-f*(o-0),v=c+f*(255-c),A=h-f*(h-0)):(p=(s+n)*.5,m=s+f*(s-p),b=n+f*(n-p),y=(a+o)*.5,P=a+f*(a-y),g=o+f*(o-y),_=(c+h)*.5,v=c+f*(c-_),A=h+f*(h-_)),d=0;d<i;d+=4)t[d+0]=Br(t[d+0],n,s,b,m),t[d+1]=Br(t[d+1],o,a,g,P),t[d+2]=Br(t[d+2],h,c,A,v)};qs.Enhance=M1;rl.Factory.addGetterSetter(T1.Node,"enhance",0,(0,A1.getNumberValidator)(),rl.Factory.afterSetFilter);var Zs={};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Grayscale=void 0;const R1=function(e){let t=e.data,i=t.length,n,s;for(n=0;n<i;n+=4)s=.34*t[n]+.5*t[n+1]+.16*t[n+2],t[n]=s,t[n+1]=s,t[n+2]=s};Zs.Grayscale=R1;var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.HSL=void 0;const Yi=ut,Xo=Ot,qo=nt;Yi.Factory.addGetterSetter(Xo.Node,"hue",0,(0,qo.getNumberValidator)(),Yi.Factory.afterSetFilter);Yi.Factory.addGetterSetter(Xo.Node,"saturation",0,(0,qo.getNumberValidator)(),Yi.Factory.afterSetFilter);Yi.Factory.addGetterSetter(Xo.Node,"luminance",0,(0,qo.getNumberValidator)(),Yi.Factory.afterSetFilter);const O1=function(e){let t=e.data,i=t.length,n=1,s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a;const l=n*s*Math.cos(r*Math.PI/180),h=n*s*Math.sin(r*Math.PI/180),c=.299*n+.701*l+.167*h,u=.587*n-.587*l+.33*h,d=.114*n-.114*l-.497*h,f=.299*n-.299*l-.328*h,p=.587*n+.413*l+.035*h,m=.114*n-.114*l+.293*h,b=.299*n-.3*l+1.25*h,y=.587*n-.586*l-1.05*h,P=.114*n+.886*l-.2*h;let g,_,v,A;for(a=0;a<i;a+=4)g=t[a+0],_=t[a+1],v=t[a+2],A=t[a+3],t[a+0]=c*g+u*_+d*v+o,t[a+1]=f*g+p*_+m*v+o,t[a+2]=b*g+y*_+P*v+o,t[a+3]=A};Js.HSL=O1;var Qs={};Object.defineProperty(Qs,"__esModule",{value:!0});Qs.HSV=void 0;const Xi=ut,Zo=Ot,Jo=nt,N1=function(e){const t=e.data,i=t.length,n=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),r=Math.abs(this.hue()+360)%360,o=n*s*Math.cos(r*Math.PI/180),a=n*s*Math.sin(r*Math.PI/180),l=.299*n+.701*o+.167*a,h=.587*n-.587*o+.33*a,c=.114*n-.114*o-.497*a,u=.299*n-.299*o-.328*a,d=.587*n+.413*o+.035*a,f=.114*n-.114*o+.293*a,p=.299*n-.3*o+1.25*a,m=.587*n-.586*o-1.05*a,b=.114*n+.886*o-.2*a;let y,P,g,_;for(let v=0;v<i;v+=4)y=t[v+0],P=t[v+1],g=t[v+2],_=t[v+3],t[v+0]=l*y+h*P+c*g,t[v+1]=u*y+d*P+f*g,t[v+2]=p*y+m*P+b*g,t[v+3]=_};Qs.HSV=N1;Xi.Factory.addGetterSetter(Zo.Node,"hue",0,(0,Jo.getNumberValidator)(),Xi.Factory.afterSetFilter);Xi.Factory.addGetterSetter(Zo.Node,"saturation",0,(0,Jo.getNumberValidator)(),Xi.Factory.afterSetFilter);Xi.Factory.addGetterSetter(Zo.Node,"value",0,(0,Jo.getNumberValidator)(),Xi.Factory.afterSetFilter);var tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.Invert=void 0;const F1=function(e){let t=e.data,i=t.length,n;for(n=0;n<i;n+=4)t[n]=255-t[n],t[n+1]=255-t[n+1],t[n+2]=255-t[n+2]};tr.Invert=F1;var er={};Object.defineProperty(er,"__esModule",{value:!0});er.Kaleidoscope=void 0;const os=ut,ic=Ot,ol=Ft,nc=nt,k1=function(e,t,i){let n=e.data,s=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2,h,c,u,d=0,f=0,p=0,m=0,b,y=Math.sqrt(a*a+l*l);c=r-a,u=o-l,b=Math.sqrt(c*c+u*u),y=b>y?b:y;let P=o,g=r,_,v,A=360/g*Math.PI/180,N,x;for(v=0;v<g;v+=1)for(N=Math.sin(v*A),x=Math.cos(v*A),_=0;_<P;_+=1)c=Math.floor(a+y*_/P*x),u=Math.floor(l+y*_/P*N),h=(u*r+c)*4,d=n[h+0],f=n[h+1],p=n[h+2],m=n[h+3],h=(v+_*r)*4,s[h+0]=d,s[h+1]=f,s[h+2]=p,s[h+3]=m},L1=function(e,t,i){let n=e.data,s=t.data,r=e.width,o=e.height,a=i.polarCenterX||r/2,l=i.polarCenterY||o/2,h,c,u,d,f,p=0,m=0,b=0,y=0,P,g=Math.sqrt(a*a+l*l);c=r-a,u=o-l,P=Math.sqrt(c*c+u*u),g=P>g?P:g;let _=o,v=r,A,N,x=0,R,S;for(c=0;c<r;c+=1)for(u=0;u<o;u+=1)d=c-a,f=u-l,A=Math.sqrt(d*d+f*f)*_/g,N=(Math.atan2(f,d)*180/Math.PI+360+x)%360,N=N*v/360,R=Math.floor(N),S=Math.floor(A),h=(S*r+R)*4,p=n[h+0],m=n[h+1],b=n[h+2],y=n[h+3],h=(u*r+c)*4,s[h+0]=p,s[h+1]=m,s[h+2]=b,s[h+3]=y},D1=function(e){const t=e.width,i=e.height;let n,s,r,o,a,l,h,c,u,d,f=Math.round(this.kaleidoscopePower());const p=Math.round(this.kaleidoscopeAngle()),m=Math.floor(t*(p%360)/360);if(f<1)return;const b=ol.Util.createCanvasElement();b.width=t,b.height=i;const y=b.getContext("2d").getImageData(0,0,t,i);ol.Util.releaseCanvas(b),k1(e,y,{polarCenterX:t/2,polarCenterY:i/2});let P=t/Math.pow(2,f);for(;P<=8;)P=P*2,f-=1;P=Math.ceil(P);let g=P,_=0,v=g,A=1;for(m+P>t&&(_=g,v=0,A=-1),s=0;s<i;s+=1)for(n=_;n!==v;n+=A)r=Math.round(n+m)%t,u=(t*s+r)*4,a=y.data[u+0],l=y.data[u+1],h=y.data[u+2],c=y.data[u+3],d=(t*s+n)*4,y.data[d+0]=a,y.data[d+1]=l,y.data[d+2]=h,y.data[d+3]=c;for(s=0;s<i;s+=1)for(g=Math.floor(P),o=0;o<f;o+=1){for(n=0;n<g+1;n+=1)u=(t*s+n)*4,a=y.data[u+0],l=y.data[u+1],h=y.data[u+2],c=y.data[u+3],d=(t*s+g*2-n-1)*4,y.data[d+0]=a,y.data[d+1]=l,y.data[d+2]=h,y.data[d+3]=c;g*=2}L1(y,e,{polarRotation:0})};er.Kaleidoscope=D1;os.Factory.addGetterSetter(ic.Node,"kaleidoscopePower",2,(0,nc.getNumberValidator)(),os.Factory.afterSetFilter);os.Factory.addGetterSetter(ic.Node,"kaleidoscopeAngle",0,(0,nc.getNumberValidator)(),os.Factory.afterSetFilter);var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.Mask=void 0;const al=ut,G1=Ot,I1=nt;function Hn(e,t,i){let n=(i*e.width+t)*4;const s=[];return s.push(e.data[n++],e.data[n++],e.data[n++],e.data[n++]),s}function un(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function U1(e){const t=[0,0,0];for(let i=0;i<e.length;i++)t[0]+=e[i][0],t[1]+=e[i][1],t[2]+=e[i][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function B1(e,t){const i=Hn(e,0,0),n=Hn(e,e.width-1,0),s=Hn(e,0,e.height-1),r=Hn(e,e.width-1,e.height-1),o=t||10;if(un(i,n)<o&&un(n,r)<o&&un(r,s)<o&&un(s,i)<o){const a=U1([n,i,r,s]),l=[];for(let h=0;h<e.width*e.height;h++){const c=un(a,[e.data[h*4],e.data[h*4+1],e.data[h*4+2]]);l[h]=c<o?0:255}return l}}function V1(e,t){for(let i=0;i<e.width*e.height;i++)e.data[4*i+3]=t[i]}function $1(e,t,i){const n=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let u=0;u<s;u++)for(let d=0;d<s;d++){const f=a+u-r,p=l+d-r;if(f>=0&&f<i&&p>=0&&p<t){const m=f*t+p,b=n[u*s+d];c+=e[m]*b}}o[h]=c===255*8?255:0}return o}function H1(e,t,i){const n=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let u=0;u<s;u++)for(let d=0;d<s;d++){const f=a+u-r,p=l+d-r;if(f>=0&&f<i&&p>=0&&p<t){const m=f*t+p,b=n[u*s+d];c+=e[m]*b}}o[h]=c>=255*4?255:0}return o}function z1(e,t,i){const n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(n.length)),r=Math.floor(s/2),o=[];for(let a=0;a<i;a++)for(let l=0;l<t;l++){const h=a*t+l;let c=0;for(let u=0;u<s;u++)for(let d=0;d<s;d++){const f=a+u-r,p=l+d-r;if(f>=0&&f<i&&p>=0&&p<t){const m=f*t+p,b=n[u*s+d];c+=e[m]*b}}o[h]=c}return o}const W1=function(e){let t=this.threshold(),i=B1(e,t);return i&&(i=$1(i,e.width,e.height),i=H1(i,e.width,e.height),i=z1(i,e.width,e.height),V1(e,i)),e};ir.Mask=W1;al.Factory.addGetterSetter(G1.Node,"threshold",0,(0,I1.getNumberValidator)(),al.Factory.afterSetFilter);var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.Noise=void 0;const ll=ut,j1=Ot,K1=nt,Y1=function(e){const t=this.noise()*255,i=e.data,n=i.length,s=t/2;for(let r=0;r<n;r+=4)i[r+0]+=s-2*s*Math.random(),i[r+1]+=s-2*s*Math.random(),i[r+2]+=s-2*s*Math.random()};nr.Noise=Y1;ll.Factory.addGetterSetter(j1.Node,"noise",.2,(0,K1.getNumberValidator)(),ll.Factory.afterSetFilter);var sr={};Object.defineProperty(sr,"__esModule",{value:!0});sr.Pixelate=void 0;const hl=ut,X1=Ft,q1=Ot,Z1=nt,J1=function(e){let t=Math.ceil(this.pixelSize()),i=e.width,n=e.height,s,r,o,a,l,h,c,u=Math.ceil(i/t),d=Math.ceil(n/t),f,p,m,b,y,P,g,_=e.data;if(t<=0){X1.Util.error("pixelSize value can not be <= 0");return}for(y=0;y<u;y+=1)for(P=0;P<d;P+=1){for(a=0,l=0,h=0,c=0,f=y*t,p=f+t,m=P*t,b=m+t,g=0,s=f;s<p;s+=1)if(!(s>=i))for(r=m;r<b;r+=1)r>=n||(o=(i*r+s)*4,a+=_[o+0],l+=_[o+1],h+=_[o+2],c+=_[o+3],g+=1);for(a=a/g,l=l/g,h=h/g,c=c/g,s=f;s<p;s+=1)if(!(s>=i))for(r=m;r<b;r+=1)r>=n||(o=(i*r+s)*4,_[o+0]=a,_[o+1]=l,_[o+2]=h,_[o+3]=c)}};sr.Pixelate=J1;hl.Factory.addGetterSetter(q1.Node,"pixelSize",8,(0,Z1.getNumberValidator)(),hl.Factory.afterSetFilter);var rr={};Object.defineProperty(rr,"__esModule",{value:!0});rr.Posterize=void 0;const cl=ut,Q1=Ot,t2=nt,e2=function(e){let t=Math.round(this.levels()*254)+1,i=e.data,n=i.length,s=255/t,r;for(r=0;r<n;r+=1)i[r]=Math.floor(i[r]/s)*s};rr.Posterize=e2;cl.Factory.addGetterSetter(Q1.Node,"levels",.5,(0,t2.getNumberValidator)(),cl.Factory.afterSetFilter);var or={};Object.defineProperty(or,"__esModule",{value:!0});or.RGB=void 0;const as=ut,Qo=Ot,i2=nt,n2=function(e){let t=e.data,i=t.length,n=this.red(),s=this.green(),r=this.blue(),o,a;for(o=0;o<i;o+=4)a=(.34*t[o]+.5*t[o+1]+.16*t[o+2])/255,t[o]=a*n,t[o+1]=a*s,t[o+2]=a*r,t[o+3]=t[o+3]};or.RGB=n2;as.Factory.addGetterSetter(Qo.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});as.Factory.addGetterSetter(Qo.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});as.Factory.addGetterSetter(Qo.Node,"blue",0,i2.RGBComponent,as.Factory.afterSetFilter);var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.RGBA=void 0;const En=ut,lr=Ot,s2=nt,r2=function(e){const t=e.data,i=t.length,n=this.red(),s=this.green(),r=this.blue(),o=this.alpha();for(let a=0;a<i;a+=4){const l=1-o;t[a]=n*o+t[a]*l,t[a+1]=s*o+t[a+1]*l,t[a+2]=r*o+t[a+2]*l}};ar.RGBA=r2;En.Factory.addGetterSetter(lr.Node,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});En.Factory.addGetterSetter(lr.Node,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});En.Factory.addGetterSetter(lr.Node,"blue",0,s2.RGBComponent,En.Factory.afterSetFilter);En.Factory.addGetterSetter(lr.Node,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});var hr={};Object.defineProperty(hr,"__esModule",{value:!0});hr.Sepia=void 0;const o2=function(e){let t=e.data,i=t.length,n,s,r,o;for(n=0;n<i;n+=4)s=t[n+0],r=t[n+1],o=t[n+2],t[n+0]=Math.min(255,s*.393+r*.769+o*.189),t[n+1]=Math.min(255,s*.349+r*.686+o*.168),t[n+2]=Math.min(255,s*.272+r*.534+o*.131)};hr.Sepia=o2;var cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.Solarize=void 0;const a2=function(e){const t=e.data,i=e.width,n=e.height,s=i*4;let r=n;do{const o=(r-1)*s;let a=i;do{const l=o+(a-1)*4;let h=t[l],c=t[l+1],u=t[l+2];h>127&&(h=255-h),c>127&&(c=255-c),u>127&&(u=255-u),t[l]=h,t[l+1]=c,t[l+2]=u}while(--a)}while(--r)};cr.Solarize=a2;var ur={};Object.defineProperty(ur,"__esModule",{value:!0});ur.Threshold=void 0;const ul=ut,l2=Ot,h2=nt,c2=function(e){const t=this.threshold()*255,i=e.data,n=i.length;for(let s=0;s<n;s+=1)i[s]=i[s]<t?0:255};ur.Threshold=c2;ul.Factory.addGetterSetter(l2.Node,"threshold",.5,(0,h2.getNumberValidator)(),ul.Factory.afterSetFilter);Object.defineProperty(bs,"__esModule",{value:!0});bs.Konva=void 0;const dl=wh,u2=Es,d2=Ms,f2=Ns,g2=Fs,p2=ks,fl=Ki,m2=Fn,_2=en,y2=Ln,v2=Gs,b2=Is,S2=Us,w2=Bs,C2=sn,x2=Vs,P2=$s,E2=Hs,T2=Ws,A2=js,M2=Ks,R2=Ys,O2=qs,N2=Zs,F2=Js,k2=Qs,L2=tr,D2=er,G2=ir,I2=nr,U2=sr,B2=rr,V2=or,$2=ar,H2=hr,z2=cr,W2=ur;bs.Konva=dl.Konva.Util._assign(dl.Konva,{Arc:u2.Arc,Arrow:d2.Arrow,Circle:f2.Circle,Ellipse:g2.Ellipse,Image:p2.Image,Label:fl.Label,Tag:fl.Tag,Line:m2.Line,Path:_2.Path,Rect:y2.Rect,RegularPolygon:v2.RegularPolygon,Ring:b2.Ring,Sprite:S2.Sprite,Star:w2.Star,Text:C2.Text,TextPath:x2.TextPath,Transformer:P2.Transformer,Wedge:E2.Wedge,Filters:{Blur:T2.Blur,Brighten:A2.Brighten,Contrast:M2.Contrast,Emboss:R2.Emboss,Enhance:O2.Enhance,Grayscale:N2.Grayscale,HSL:F2.HSL,HSV:k2.HSV,Invert:L2.Invert,Kaleidoscope:D2.Kaleidoscope,Mask:G2.Mask,Noise:I2.Noise,Pixelate:U2.Pixelate,Posterize:B2.Posterize,RGB:V2.RGB,RGBA:$2.RGBA,Sepia:H2.Sepia,Solarize:z2.Solarize,Threshold:W2.Threshold}});var j2=Uo.exports;Object.defineProperty(j2,"__esModule",{value:!0});const K2=bs;Uo.exports=K2.Konva;var Y2=Uo.exports;const Ut=Xu(Y2);class X2{constructor(t,i={}){K(this,"name","VisuPluginSelection");K(this,"main");K(this,"isOpen",!1);K(this,"selecting",!1);K(this,"startPosition",{x:0,y:0});K(this,"selectionRectangle",new Ut.Rect({name:"selectionRectangle",fill:"rgba(165, 180, 252, 0.1)",stroke:"rgba(165, 180, 252, 0.3)",strokeWidth:2,visible:!1,listening:!1}));K(this,"_handleMousedown",this.handleMousedown.bind(this));K(this,"_handleMousemove",this.handleMousemove.bind(this));K(this,"_handleMouseup",this.handleMouseup.bind(this));this.stage=t,this.main=t.findOne(`#${wi.MAIN}`),this.main.add(this.selectionRectangle)}open(){this.isOpen||(this.isOpen=!0,this.stage.on("mousedown",this._handleMousedown))}close(){this.isOpen&&(this.isOpen=!1,this.stage.off("mousedown",this._handleMousedown),document.removeEventListener("mousemove",this._handleMousemove),document.removeEventListener("mouseup",this._handleMouseup))}handleMousedown(t){const i=t.target.id();if((i===Sh||i===Ue.CANVAS)&&(t.evt.preventDefault(),this.main)){const{x:n,y:s}=this.main.position();this.startPosition.x=(t.evt.offsetX-n)/this.main.scaleX(),this.startPosition.y=(t.evt.offsetY-s)/this.main.scaleX(),this.selecting=!0,document.addEventListener("mousemove",this._handleMousemove),document.addEventListener("mouseup",this._handleMouseup)}}handleMousemove(t){if(!this.selecting)return;const{left:i,top:n}=this.stage.container().getBoundingClientRect(),{x:s,y:r}=this.main.position(),o=this.startPosition.x,a=this.startPosition.y,l=(t.clientX-i-s)/this.main.scaleX(),h=(t.clientY-n-r)/this.main.scaleX();this.selectionRectangle.setAttrs({visible:!0,x:Math.min(o,l),y:Math.min(a,h),width:Math.abs(l-o),height:Math.abs(h-a)}),this.stage.container().style.cursor="default",t.preventDefault()}handleMouseup(t){this.selecting=!1,this.selectionRectangle.visible()&&(t.preventDefault(),this.selectionRectangle.visible(!1),document.removeEventListener("mousemove",this._handleMousemove),document.removeEventListener("mouseup",this._handleMouseup))}}const q2="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Z2=(e=21)=>{let t="",i=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=q2[i[e]&63];return t};class J2{constructor(t,i={}){K(this,"name","VisuPluginWorkspace");K(this,"isOpen",!1);K(this,"workspace");K(this,"canvas");K(this,"_handleVisuWorkspace",this.handleVisuWorkspace.bind(this));this.stage=t;const{width:n=800,height:s=500,backgroundColor:r="#ffffff"}=i;this.workspace=this.stage.findOne(`#${Ue.GROUP}`),this.canvas=new Ut.Rect({id:Ue.CANVAS,name:Ue.CANVAS,width:n,height:s,fill:r}),this.workspace.setAttrs({width:n,height:s,clipWidth:n,clipHeight:s}),this.workspace.add(this.canvas)}open(){this.isOpen||(this.isOpen=!0,Jt.on("visu-workspace",this._handleVisuWorkspace))}close(){this.isOpen&&(this.isOpen=!1,Jt.off("visu-workspace",this._handleVisuWorkspace))}get nodes(){return this.workspace.getChildren()}getNode(t){return this.workspace.findOne(`#${t}`)}addNode(t){Jt.emit("visu-workspace",{type:"add",node:t})}removeNode(t){Jt.emit("visu-workspace",{type:"remove",id:t})}hideNode(t){Jt.emit("visu-workspace",{type:"hide",id:t})}showNode(t){Jt.emit("visu-workspace",{type:"show",id:t})}handleVisuWorkspace(t){var i,n,s;switch(t.type){case"add":t.node.setAttr("id",Z2()),this.workspace.add(t.node);break;case"remove":(i=this.getNode(t.id))==null||i.remove();break;case"show":(n=this.getNode(t.id))==null||n.show();break;case"hide":(s=this.getNode(t.id))==null||s.hide();break}}}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Di=9e15,gi=1e9,lo="0123456789abcdef",ls="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",hs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",ho={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Di,maxE:Di,crypto:!1},sc,Ie,st=!0,dr="[DecimalError] ",si=dr+"Invalid argument: ",rc=dr+"Precision limit exceeded",oc=dr+"crypto unavailable",ac="[object Decimal]",Qt=Math.floor,$t=Math.pow,Q2=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,tg=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,eg=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,lc=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Se=1e7,tt=7,ig=9007199254740991,ng=ls.length-1,co=hs.length-1,k={toStringTag:ac};k.absoluteValue=k.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),X(e)};k.ceil=function(){return X(new this.constructor(this),this.e+1,2)};k.clampedTo=k.clamp=function(e,t){var i,n=this,s=n.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(si+t);return i=n.cmp(e),i<0?e:n.cmp(t)>0?t:new s(n)};k.comparedTo=k.cmp=function(e){var t,i,n,s,r=this,o=r.d,a=(e=new r.constructor(e)).d,l=r.s,h=e.s;if(!o||!a)return!l||!h?NaN:l!==h?l:o===a?0:!o^l<0?1:-1;if(!o[0]||!a[0])return o[0]?l:a[0]?-h:0;if(l!==h)return l;if(r.e!==e.e)return r.e>e.e^l<0?1:-1;for(n=o.length,s=a.length,t=0,i=n<s?n:s;t<i;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return n===s?0:n>s^l<0?1:-1};k.cosine=k.cos=function(){var e,t,i=this,n=i.constructor;return i.d?i.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+tt,n.rounding=1,i=sg(n,fc(n,i)),n.precision=e,n.rounding=t,X(Ie==2||Ie==3?i.neg():i,e,t,!0)):new n(1):new n(NaN)};k.cubeRoot=k.cbrt=function(){var e,t,i,n,s,r,o,a,l,h,c=this,u=c.constructor;if(!c.isFinite()||c.isZero())return new u(c);for(st=!1,r=c.s*$t(c.s*c,1/3),!r||Math.abs(r)==1/0?(i=Kt(c.d),e=c.e,(r=(e-i.length+1)%3)&&(i+=r==1||r==-2?"0":"00"),r=$t(i,1/3),e=Qt((e+1)/3)-(e%3==(e<0?-1:2)),r==1/0?i="5e"+e:(i=r.toExponential(),i=i.slice(0,i.indexOf("e")+1)+e),n=new u(i),n.s=c.s):n=new u(r.toString()),o=(e=u.precision)+3;;)if(a=n,l=a.times(a).times(a),h=l.plus(c),n=xt(h.plus(c).times(a),h.plus(l),o+2,1),Kt(a.d).slice(0,o)===(i=Kt(n.d)).slice(0,o))if(i=i.slice(o-3,o+1),i=="9999"||!s&&i=="4999"){if(!s&&(X(a,e+1,0),a.times(a).times(a).eq(c))){n=a;break}o+=4,s=1}else{(!+i||!+i.slice(1)&&i.charAt(0)=="5")&&(X(n,e+1,1),t=!n.times(n).times(n).eq(c));break}return st=!0,X(n,e,u.rounding,t)};k.decimalPlaces=k.dp=function(){var e,t=this.d,i=NaN;if(t){if(e=t.length-1,i=(e-Qt(this.e/tt))*tt,e=t[e],e)for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i};k.dividedBy=k.div=function(e){return xt(this,new this.constructor(e))};k.dividedToIntegerBy=k.divToInt=function(e){var t=this,i=t.constructor;return X(xt(t,new i(e),0,1,1),i.precision,i.rounding)};k.equals=k.eq=function(e){return this.cmp(e)===0};k.floor=function(){return X(new this.constructor(this),this.e+1,3)};k.greaterThan=k.gt=function(e){return this.cmp(e)>0};k.greaterThanOrEqualTo=k.gte=function(e){var t=this.cmp(e);return t==1||t===0};k.hyperbolicCosine=k.cosh=function(){var e,t,i,n,s,r=this,o=r.constructor,a=new o(1);if(!r.isFinite())return new o(r.s?1/0:NaN);if(r.isZero())return a;i=o.precision,n=o.rounding,o.precision=i+Math.max(r.e,r.sd())+4,o.rounding=1,s=r.d.length,s<32?(e=Math.ceil(s/3),t=(1/gr(4,e)).toString()):(e=16,t="2.3283064365386962890625e-10"),r=qi(o,1,r.times(t),new o(1),!0);for(var l,h=e,c=new o(8);h--;)l=r.times(r),r=a.minus(l.times(c.minus(l.times(c))));return X(r,o.precision=i,o.rounding=n,!0)};k.hyperbolicSine=k.sinh=function(){var e,t,i,n,s=this,r=s.constructor;if(!s.isFinite()||s.isZero())return new r(s);if(t=r.precision,i=r.rounding,r.precision=t+Math.max(s.e,s.sd())+4,r.rounding=1,n=s.d.length,n<3)s=qi(r,2,s,s,!0);else{e=1.4*Math.sqrt(n),e=e>16?16:e|0,s=s.times(1/gr(5,e)),s=qi(r,2,s,s,!0);for(var o,a=new r(5),l=new r(16),h=new r(20);e--;)o=s.times(s),s=s.times(a.plus(o.times(l.times(o).plus(h))))}return r.precision=t,r.rounding=i,X(s,t,i,!0)};k.hyperbolicTangent=k.tanh=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,xt(i.sinh(),i.cosh(),n.precision=e,n.rounding=t)):new n(i.s)};k.inverseCosine=k.acos=function(){var e,t=this,i=t.constructor,n=t.abs().cmp(1),s=i.precision,r=i.rounding;return n!==-1?n===0?t.isNeg()?ye(i,s,r):new i(0):new i(NaN):t.isZero()?ye(i,s+4,r).times(.5):(i.precision=s+6,i.rounding=1,t=t.asin(),e=ye(i,s+4,r).times(.5),i.precision=s,i.rounding=r,e.minus(t))};k.inverseHyperbolicCosine=k.acosh=function(){var e,t,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,st=!1,i=i.times(i).minus(1).sqrt().plus(i),st=!0,n.precision=e,n.rounding=t,i.ln()):new n(i)};k.inverseHyperbolicSine=k.asinh=function(){var e,t,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,st=!1,i=i.times(i).plus(1).sqrt().plus(i),st=!0,n.precision=e,n.rounding=t,i.ln())};k.inverseHyperbolicTangent=k.atanh=function(){var e,t,i,n,s=this,r=s.constructor;return s.isFinite()?s.e>=0?new r(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=r.precision,t=r.rounding,n=s.sd(),Math.max(n,e)<2*-s.e-1?X(new r(s),e,t,!0):(r.precision=i=n-s.e,s=xt(s.plus(1),new r(1).minus(s),i+e,1),r.precision=e+4,r.rounding=1,s=s.ln(),r.precision=e,r.rounding=t,s.times(.5))):new r(NaN)};k.inverseSine=k.asin=function(){var e,t,i,n,s=this,r=s.constructor;return s.isZero()?new r(s):(t=s.abs().cmp(1),i=r.precision,n=r.rounding,t!==-1?t===0?(e=ye(r,i+4,n).times(.5),e.s=s.s,e):new r(NaN):(r.precision=i+6,r.rounding=1,s=s.div(new r(1).minus(s.times(s)).sqrt().plus(1)).atan(),r.precision=i,r.rounding=n,s.times(2)))};k.inverseTangent=k.atan=function(){var e,t,i,n,s,r,o,a,l,h=this,c=h.constructor,u=c.precision,d=c.rounding;if(h.isFinite()){if(h.isZero())return new c(h);if(h.abs().eq(1)&&u+4<=co)return o=ye(c,u+4,d).times(.25),o.s=h.s,o}else{if(!h.s)return new c(NaN);if(u+4<=co)return o=ye(c,u+4,d).times(.5),o.s=h.s,o}for(c.precision=a=u+10,c.rounding=1,i=Math.min(28,a/tt+2|0),e=i;e;--e)h=h.div(h.times(h).plus(1).sqrt().plus(1));for(st=!1,t=Math.ceil(a/tt),n=1,l=h.times(h),o=new c(h),s=h;e!==-1;)if(s=s.times(l),r=o.minus(s.div(n+=2)),s=s.times(l),o=r.plus(s.div(n+=2)),o.d[t]!==void 0)for(e=t;o.d[e]===r.d[e]&&e--;);return i&&(o=o.times(2<<i-1)),st=!0,X(o,c.precision=u,c.rounding=d,!0)};k.isFinite=function(){return!!this.d};k.isInteger=k.isInt=function(){return!!this.d&&Qt(this.e/tt)>this.d.length-2};k.isNaN=function(){return!this.s};k.isNegative=k.isNeg=function(){return this.s<0};k.isPositive=k.isPos=function(){return this.s>0};k.isZero=function(){return!!this.d&&this.d[0]===0};k.lessThan=k.lt=function(e){return this.cmp(e)<0};k.lessThanOrEqualTo=k.lte=function(e){return this.cmp(e)<1};k.logarithm=k.log=function(e){var t,i,n,s,r,o,a,l,h=this,c=h.constructor,u=c.precision,d=c.rounding,f=5;if(e==null)e=new c(10),t=!0;else{if(e=new c(e),i=e.d,e.s<0||!i||!i[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(i=h.d,h.s<0||!i||!i[0]||h.eq(1))return new c(i&&!i[0]?-1/0:h.s!=1?NaN:i?0:1/0);if(t)if(i.length>1)r=!0;else{for(s=i[0];s%10===0;)s/=10;r=s!==1}if(st=!1,a=u+f,o=Qe(h,a),n=t?cs(c,a+10):Qe(e,a),l=xt(o,n,a,1),Tn(l.d,s=u,d))do if(a+=10,o=Qe(h,a),n=t?cs(c,a+10):Qe(e,a),l=xt(o,n,a,1),!r){+Kt(l.d).slice(s+1,s+15)+1==1e14&&(l=X(l,u+1,0));break}while(Tn(l.d,s+=10,d));return st=!0,X(l,u,d)};k.minus=k.sub=function(e){var t,i,n,s,r,o,a,l,h,c,u,d,f=this,p=f.constructor;if(e=new p(e),!f.d||!e.d)return!f.s||!e.s?e=new p(NaN):f.d?e.s=-e.s:e=new p(e.d||f.s!==e.s?f:NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(h=f.d,d=e.d,a=p.precision,l=p.rounding,!h[0]||!d[0]){if(d[0])e.s=-e.s;else if(h[0])e=new p(f);else return new p(l===3?-0:0);return st?X(e,a,l):e}if(i=Qt(e.e/tt),c=Qt(f.e/tt),h=h.slice(),r=c-i,r){for(u=r<0,u?(t=h,r=-r,o=d.length):(t=d,i=c,o=h.length),n=Math.max(Math.ceil(a/tt),o)+2,r>n&&(r=n,t.length=1),t.reverse(),n=r;n--;)t.push(0);t.reverse()}else{for(n=h.length,o=d.length,u=n<o,u&&(o=n),n=0;n<o;n++)if(h[n]!=d[n]){u=h[n]<d[n];break}r=0}for(u&&(t=h,h=d,d=t,e.s=-e.s),o=h.length,n=d.length-o;n>0;--n)h[o++]=0;for(n=d.length;n>r;){if(h[--n]<d[n]){for(s=n;s&&h[--s]===0;)h[s]=Se-1;--h[s],h[n]+=Se}h[n]-=d[n]}for(;h[--o]===0;)h.pop();for(;h[0]===0;h.shift())--i;return h[0]?(e.d=h,e.e=fr(h,i),st?X(e,a,l):e):new p(l===3?-0:0)};k.modulo=k.mod=function(e){var t,i=this,n=i.constructor;return e=new n(e),!i.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||i.d&&!i.d[0]?X(new n(i),n.precision,n.rounding):(st=!1,n.modulo==9?(t=xt(i,e.abs(),0,3,1),t.s*=e.s):t=xt(i,e,0,n.modulo,1),t=t.times(e),st=!0,i.minus(t))};k.naturalExponential=k.exp=function(){return uo(this)};k.naturalLogarithm=k.ln=function(){return Qe(this)};k.negated=k.neg=function(){var e=new this.constructor(this);return e.s=-e.s,X(e)};k.plus=k.add=function(e){var t,i,n,s,r,o,a,l,h,c,u=this,d=u.constructor;if(e=new d(e),!u.d||!e.d)return!u.s||!e.s?e=new d(NaN):u.d||(e=new d(e.d||u.s===e.s?u:NaN)),e;if(u.s!=e.s)return e.s=-e.s,u.minus(e);if(h=u.d,c=e.d,a=d.precision,l=d.rounding,!h[0]||!c[0])return c[0]||(e=new d(u)),st?X(e,a,l):e;if(r=Qt(u.e/tt),n=Qt(e.e/tt),h=h.slice(),s=r-n,s){for(s<0?(i=h,s=-s,o=c.length):(i=c,n=r,o=h.length),r=Math.ceil(a/tt),o=r>o?r+1:o+1,s>o&&(s=o,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(o=h.length,s=c.length,o-s<0&&(s=o,i=c,c=h,h=i),t=0;s;)t=(h[--s]=h[s]+c[s]+t)/Se|0,h[s]%=Se;for(t&&(h.unshift(t),++n),o=h.length;h[--o]==0;)h.pop();return e.d=h,e.e=fr(h,n),st?X(e,a,l):e};k.precision=k.sd=function(e){var t,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(si+e);return i.d?(t=hc(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t};k.round=function(){var e=this,t=e.constructor;return X(new t(e),e.e+1,t.rounding)};k.sine=k.sin=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+tt,n.rounding=1,i=og(n,fc(n,i)),n.precision=e,n.rounding=t,X(Ie>2?i.neg():i,e,t,!0)):new n(NaN)};k.squareRoot=k.sqrt=function(){var e,t,i,n,s,r,o=this,a=o.d,l=o.e,h=o.s,c=o.constructor;if(h!==1||!a||!a[0])return new c(!h||h<0&&(!a||a[0])?NaN:a?o:1/0);for(st=!1,h=Math.sqrt(+o),h==0||h==1/0?(t=Kt(a),(t.length+l)%2==0&&(t+="0"),h=Math.sqrt(t),l=Qt((l+1)/2)-(l<0||l%2),h==1/0?t="5e"+l:(t=h.toExponential(),t=t.slice(0,t.indexOf("e")+1)+l),n=new c(t)):n=new c(h.toString()),i=(l=c.precision)+3;;)if(r=n,n=r.plus(xt(o,r,i+2,1)).times(.5),Kt(r.d).slice(0,i)===(t=Kt(n.d)).slice(0,i))if(t=t.slice(i-3,i+1),t=="9999"||!s&&t=="4999"){if(!s&&(X(r,l+1,0),r.times(r).eq(o))){n=r;break}i+=4,s=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(X(n,l+1,1),e=!n.times(n).eq(o));break}return st=!0,X(n,l,c.rounding,e)};k.tangent=k.tan=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,i=i.sin(),i.s=1,i=xt(i,new n(1).minus(i.times(i)).sqrt(),e+10,0),n.precision=e,n.rounding=t,X(Ie==2||Ie==4?i.neg():i,e,t,!0)):new n(NaN)};k.times=k.mul=function(e){var t,i,n,s,r,o,a,l,h,c=this,u=c.constructor,d=c.d,f=(e=new u(e)).d;if(e.s*=c.s,!d||!d[0]||!f||!f[0])return new u(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:!d||!f?e.s/0:e.s*0);for(i=Qt(c.e/tt)+Qt(e.e/tt),l=d.length,h=f.length,l<h&&(r=d,d=f,f=r,o=l,l=h,h=o),r=[],o=l+h,n=o;n--;)r.push(0);for(n=h;--n>=0;){for(t=0,s=l+n;s>n;)a=r[s]+f[n]*d[s-n-1]+t,r[s--]=a%Se|0,t=a/Se|0;r[s]=(r[s]+t)%Se|0}for(;!r[--o];)r.pop();return t?++i:r.shift(),e.d=r,e.e=fr(r,i),st?X(e,u.precision,u.rounding):e};k.toBinary=function(e,t){return ta(this,2,e,t)};k.toDecimalPlaces=k.toDP=function(e,t){var i=this,n=i.constructor;return i=new n(i),e===void 0?i:(oe(e,0,gi),t===void 0?t=n.rounding:oe(t,0,8),X(i,e+i.e+1,t))};k.toExponential=function(e,t){var i,n=this,s=n.constructor;return e===void 0?i=Re(n,!0):(oe(e,0,gi),t===void 0?t=s.rounding:oe(t,0,8),n=X(new s(n),e+1,t),i=Re(n,!0,e+1)),n.isNeg()&&!n.isZero()?"-"+i:i};k.toFixed=function(e,t){var i,n,s=this,r=s.constructor;return e===void 0?i=Re(s):(oe(e,0,gi),t===void 0?t=r.rounding:oe(t,0,8),n=X(new r(s),e+s.e+1,t),i=Re(n,!1,e+n.e+1)),s.isNeg()&&!s.isZero()?"-"+i:i};k.toFraction=function(e){var t,i,n,s,r,o,a,l,h,c,u,d,f=this,p=f.d,m=f.constructor;if(!p)return new m(f);if(h=i=new m(1),n=l=new m(0),t=new m(n),r=t.e=hc(p)-f.e-1,o=r%tt,t.d[0]=$t(10,o<0?tt+o:o),e==null)e=r>0?t:h;else{if(a=new m(e),!a.isInt()||a.lt(h))throw Error(si+a);e=a.gt(t)?r>0?t:h:a}for(st=!1,a=new m(Kt(p)),c=m.precision,m.precision=r=p.length*tt*2;u=xt(a,t,0,1,1),s=i.plus(u.times(n)),s.cmp(e)!=1;)i=n,n=s,s=h,h=l.plus(u.times(s)),l=s,s=t,t=a.minus(u.times(s)),a=s;return s=xt(e.minus(i),n,0,1,1),l=l.plus(s.times(h)),i=i.plus(s.times(n)),l.s=h.s=f.s,d=xt(h,n,r,1).minus(f).abs().cmp(xt(l,i,r,1).minus(f).abs())<1?[h,n]:[l,i],m.precision=c,st=!0,d};k.toHexadecimal=k.toHex=function(e,t){return ta(this,16,e,t)};k.toNearest=function(e,t){var i=this,n=i.constructor;if(i=new n(i),e==null){if(!i.d)return i;e=new n(1),t=n.rounding}else{if(e=new n(e),t===void 0?t=n.rounding:oe(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(st=!1,i=xt(i,e,0,t,1).times(e),st=!0,X(i)):(e.s=i.s,i=e),i};k.toNumber=function(){return+this};k.toOctal=function(e,t){return ta(this,8,e,t)};k.toPower=k.pow=function(e){var t,i,n,s,r,o,a=this,l=a.constructor,h=+(e=new l(e));if(!a.d||!e.d||!a.d[0]||!e.d[0])return new l($t(+a,h));if(a=new l(a),a.eq(1))return a;if(n=l.precision,r=l.rounding,e.eq(1))return X(a,n,r);if(t=Qt(e.e/tt),t>=e.d.length-1&&(i=h<0?-h:h)<=ig)return s=cc(l,a,i,n),e.s<0?new l(1).div(s):X(s,n,r);if(o=a.s,o<0){if(t<e.d.length-1)return new l(NaN);if(e.d[t]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return i=$t(+a,h),t=i==0||!isFinite(i)?Qt(h*(Math.log("0."+Kt(a.d))/Math.LN10+a.e+1)):new l(i+"").e,t>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(st=!1,l.rounding=a.s=1,i=Math.min(12,(t+"").length),s=uo(e.times(Qe(a,n+i)),n),s.d&&(s=X(s,n+5,1),Tn(s.d,n,r)&&(t=n+10,s=X(uo(e.times(Qe(a,t+i)),t),t+5,1),+Kt(s.d).slice(n+1,n+15)+1==1e14&&(s=X(s,n+1,0)))),s.s=o,st=!0,l.rounding=r,X(s,n,r))};k.toPrecision=function(e,t){var i,n=this,s=n.constructor;return e===void 0?i=Re(n,n.e<=s.toExpNeg||n.e>=s.toExpPos):(oe(e,1,gi),t===void 0?t=s.rounding:oe(t,0,8),n=X(new s(n),e,t),i=Re(n,e<=n.e||n.e<=s.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+i:i};k.toSignificantDigits=k.toSD=function(e,t){var i=this,n=i.constructor;return e===void 0?(e=n.precision,t=n.rounding):(oe(e,1,gi),t===void 0?t=n.rounding:oe(t,0,8)),X(new n(i),e,t)};k.toString=function(){var e=this,t=e.constructor,i=Re(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i};k.truncated=k.trunc=function(){return X(new this.constructor(this),this.e+1,1)};k.valueOf=k.toJSON=function(){var e=this,t=e.constructor,i=Re(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};function Kt(e){var t,i,n,s=e.length-1,r="",o=e[0];if(s>0){for(r+=o,t=1;t<s;t++)n=e[t]+"",i=tt-n.length,i&&(r+=Ze(i)),r+=n;o=e[t],n=o+"",i=tt-n.length,i&&(r+=Ze(i))}else if(o===0)return"0";for(;o%10===0;)o/=10;return r+o}function oe(e,t,i){if(e!==~~e||e<t||e>i)throw Error(si+e)}function Tn(e,t,i,n){var s,r,o,a;for(r=e[0];r>=10;r/=10)--t;return--t<0?(t+=tt,s=0):(s=Math.ceil((t+1)/tt),t%=tt),r=$t(10,tt-t),a=e[s]%r|0,n==null?t<3?(t==0?a=a/100|0:t==1&&(a=a/10|0),o=i<4&&a==99999||i>3&&a==49999||a==5e4||a==0):o=(i<4&&a+1==r||i>3&&a+1==r/2)&&(e[s+1]/r/100|0)==$t(10,t-2)-1||(a==r/2||a==0)&&(e[s+1]/r/100|0)==0:t<4?(t==0?a=a/1e3|0:t==1?a=a/100|0:t==2&&(a=a/10|0),o=(n||i<4)&&a==9999||!n&&i>3&&a==4999):o=((n||i<4)&&a+1==r||!n&&i>3&&a+1==r/2)&&(e[s+1]/r/1e3|0)==$t(10,t-3)-1,o}function Zn(e,t,i){for(var n,s=[0],r,o=0,a=e.length;o<a;){for(r=s.length;r--;)s[r]*=t;for(s[0]+=lo.indexOf(e.charAt(o++)),n=0;n<s.length;n++)s[n]>i-1&&(s[n+1]===void 0&&(s[n+1]=0),s[n+1]+=s[n]/i|0,s[n]%=i)}return s.reverse()}function sg(e,t){var i,n,s;if(t.isZero())return t;n=t.d.length,n<32?(i=Math.ceil(n/3),s=(1/gr(4,i)).toString()):(i=16,s="2.3283064365386962890625e-10"),e.precision+=i,t=qi(e,1,t.times(s),new e(1));for(var r=i;r--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=i,t}var xt=function(){function e(n,s,r){var o,a=0,l=n.length;for(n=n.slice();l--;)o=n[l]*s+a,n[l]=o%r|0,a=o/r|0;return a&&n.unshift(a),n}function t(n,s,r,o){var a,l;if(r!=o)l=r>o?1:-1;else for(a=l=0;a<r;a++)if(n[a]!=s[a]){l=n[a]>s[a]?1:-1;break}return l}function i(n,s,r,o){for(var a=0;r--;)n[r]-=a,a=n[r]<s[r]?1:0,n[r]=a*o+n[r]-s[r];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,r,o,a,l){var h,c,u,d,f,p,m,b,y,P,g,_,v,A,N,x,R,S,T,O,j=n.constructor,et=n.s==s.s?1:-1,U=n.d,B=s.d;if(!U||!U[0]||!B||!B[0])return new j(!n.s||!s.s||(U?B&&U[0]==B[0]:!B)?NaN:U&&U[0]==0||!B?et*0:et/0);for(l?(f=1,c=n.e-s.e):(l=Se,f=tt,c=Qt(n.e/f)-Qt(s.e/f)),T=B.length,R=U.length,y=new j(et),P=y.d=[],u=0;B[u]==(U[u]||0);u++);if(B[u]>(U[u]||0)&&c--,r==null?(A=r=j.precision,o=j.rounding):a?A=r+(n.e-s.e)+1:A=r,A<0)P.push(1),p=!0;else{if(A=A/f+2|0,u=0,T==1){for(d=0,B=B[0],A++;(u<R||d)&&A--;u++)N=d*l+(U[u]||0),P[u]=N/B|0,d=N%B|0;p=d||u<R}else{for(d=l/(B[0]+1)|0,d>1&&(B=e(B,d,l),U=e(U,d,l),T=B.length,R=U.length),x=T,g=U.slice(0,T),_=g.length;_<T;)g[_++]=0;O=B.slice(),O.unshift(0),S=B[0],B[1]>=l/2&&++S;do d=0,h=t(B,g,T,_),h<0?(v=g[0],T!=_&&(v=v*l+(g[1]||0)),d=v/S|0,d>1?(d>=l&&(d=l-1),m=e(B,d,l),b=m.length,_=g.length,h=t(m,g,b,_),h==1&&(d--,i(m,T<b?O:B,b,l))):(d==0&&(h=d=1),m=B.slice()),b=m.length,b<_&&m.unshift(0),i(g,m,_,l),h==-1&&(_=g.length,h=t(B,g,T,_),h<1&&(d++,i(g,T<_?O:B,_,l))),_=g.length):h===0&&(d++,g=[0]),P[u++]=d,h&&g[0]?g[_++]=U[x]||0:(g=[U[x]],_=1);while((x++<R||g[0]!==void 0)&&A--);p=g[0]!==void 0}P[0]||P.shift()}if(f==1)y.e=c,sc=p;else{for(u=1,d=P[0];d>=10;d/=10)u++;y.e=u+c*f-1,X(y,a?r+y.e+1:r,o,p)}return y}}();function X(e,t,i,n){var s,r,o,a,l,h,c,u,d,f=e.constructor;t:if(t!=null){if(u=e.d,!u)return e;for(s=1,a=u[0];a>=10;a/=10)s++;if(r=t-s,r<0)r+=tt,o=t,c=u[d=0],l=c/$t(10,s-o-1)%10|0;else if(d=Math.ceil((r+1)/tt),a=u.length,d>=a)if(n){for(;a++<=d;)u.push(0);c=l=0,s=1,r%=tt,o=r-tt+1}else break t;else{for(c=a=u[d],s=1;a>=10;a/=10)s++;r%=tt,o=r-tt+s,l=o<0?0:c/$t(10,s-o-1)%10|0}if(n=n||t<0||u[d+1]!==void 0||(o<0?c:c%$t(10,s-o-1)),h=i<4?(l||n)&&(i==0||i==(e.s<0?3:2)):l>5||l==5&&(i==4||n||i==6&&(r>0?o>0?c/$t(10,s-o):0:u[d-1])%10&1||i==(e.s<0?8:7)),t<1||!u[0])return u.length=0,h?(t-=e.e+1,u[0]=$t(10,(tt-t%tt)%tt),e.e=-t||0):u[0]=e.e=0,e;if(r==0?(u.length=d,a=1,d--):(u.length=d+1,a=$t(10,tt-r),u[d]=o>0?(c/$t(10,s-o)%$t(10,o)|0)*a:0),h)for(;;)if(d==0){for(r=1,o=u[0];o>=10;o/=10)r++;for(o=u[0]+=a,a=1;o>=10;o/=10)a++;r!=a&&(e.e++,u[0]==Se&&(u[0]=1));break}else{if(u[d]+=a,u[d]!=Se)break;u[d--]=0,a=1}for(r=u.length;u[--r]===0;)u.pop()}return st&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function Re(e,t,i){if(!e.isFinite())return dc(e);var n,s=e.e,r=Kt(e.d),o=r.length;return t?(i&&(n=i-o)>0?r=r.charAt(0)+"."+r.slice(1)+Ze(n):o>1&&(r=r.charAt(0)+"."+r.slice(1)),r=r+(e.e<0?"e":"e+")+e.e):s<0?(r="0."+Ze(-s-1)+r,i&&(n=i-o)>0&&(r+=Ze(n))):s>=o?(r+=Ze(s+1-o),i&&(n=i-s-1)>0&&(r=r+"."+Ze(n))):((n=s+1)<o&&(r=r.slice(0,n)+"."+r.slice(n)),i&&(n=i-o)>0&&(s+1===o&&(r+="."),r+=Ze(n))),r}function fr(e,t){var i=e[0];for(t*=tt;i>=10;i/=10)t++;return t}function cs(e,t,i){if(t>ng)throw st=!0,i&&(e.precision=i),Error(rc);return X(new e(ls),t,1,!0)}function ye(e,t,i){if(t>co)throw Error(rc);return X(new e(hs),t,i,!0)}function hc(e){var t=e.length-1,i=t*tt+1;if(t=e[t],t){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function Ze(e){for(var t="";e--;)t+="0";return t}function cc(e,t,i,n){var s,r=new e(1),o=Math.ceil(n/tt+4);for(st=!1;;){if(i%2&&(r=r.times(t),pl(r.d,o)&&(s=!0)),i=Qt(i/2),i===0){i=r.d.length-1,s&&r.d[i]===0&&++r.d[i];break}t=t.times(t),pl(t.d,o)}return st=!0,r}function gl(e){return e.d[e.d.length-1]&1}function uc(e,t,i){for(var n,s=new e(t[0]),r=0;++r<t.length;)if(n=new e(t[r]),n.s)s[i](n)&&(s=n);else{s=n;break}return s}function uo(e,t){var i,n,s,r,o,a,l,h=0,c=0,u=0,d=e.constructor,f=d.rounding,p=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(t==null?(st=!1,l=p):l=t,a=new d(.03125);e.e>-2;)e=e.times(a),u+=5;for(n=Math.log($t(2,u))/Math.LN10*2+5|0,l+=n,i=r=o=new d(1),d.precision=l;;){if(r=X(r.times(e),l,1),i=i.times(++c),a=o.plus(xt(r,i,l,1)),Kt(a.d).slice(0,l)===Kt(o.d).slice(0,l)){for(s=u;s--;)o=X(o.times(o),l,1);if(t==null)if(h<3&&Tn(o.d,l-n,f,h))d.precision=l+=10,i=r=a=new d(1),c=0,h++;else return X(o,d.precision=p,f,st=!0);else return d.precision=p,o}o=a}}function Qe(e,t){var i,n,s,r,o,a,l,h,c,u,d,f=1,p=10,m=e,b=m.d,y=m.constructor,P=y.rounding,g=y.precision;if(m.s<0||!b||!b[0]||!m.e&&b[0]==1&&b.length==1)return new y(b&&!b[0]?-1/0:m.s!=1?NaN:b?0:m);if(t==null?(st=!1,c=g):c=t,y.precision=c+=p,i=Kt(b),n=i.charAt(0),Math.abs(r=m.e)<15e14){for(;n<7&&n!=1||n==1&&i.charAt(1)>3;)m=m.times(e),i=Kt(m.d),n=i.charAt(0),f++;r=m.e,n>1?(m=new y("0."+i),r++):m=new y(n+"."+i.slice(1))}else return h=cs(y,c+2,g).times(r+""),m=Qe(new y(n+"."+i.slice(1)),c-p).plus(h),y.precision=g,t==null?X(m,g,P,st=!0):m;for(u=m,l=o=m=xt(m.minus(1),m.plus(1),c,1),d=X(m.times(m),c,1),s=3;;){if(o=X(o.times(d),c,1),h=l.plus(xt(o,new y(s),c,1)),Kt(h.d).slice(0,c)===Kt(l.d).slice(0,c))if(l=l.times(2),r!==0&&(l=l.plus(cs(y,c+2,g).times(r+""))),l=xt(l,new y(f),c,1),t==null)if(Tn(l.d,c-p,P,a))y.precision=c+=p,h=o=m=xt(u.minus(1),u.plus(1),c,1),d=X(m.times(m),c,1),s=a=1;else return X(l,y.precision=g,P,st=!0);else return y.precision=g,l;l=h,s+=2}}function dc(e){return String(e.s*e.s/0)}function fo(e,t){var i,n,s;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;t.charCodeAt(n)===48;n++);for(s=t.length;t.charCodeAt(s-1)===48;--s);if(t=t.slice(n,s),t){if(s-=n,e.e=i=i-n-1,e.d=[],n=(i+1)%tt,i<0&&(n+=tt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=tt;n<s;)e.d.push(+t.slice(n,n+=tt));t=t.slice(n),n=tt-t.length}else n-=s;for(;n--;)t+="0";e.d.push(+t),st&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function rg(e,t){var i,n,s,r,o,a,l,h,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),lc.test(t))return fo(e,t)}else if(t==="Infinity"||t==="NaN")return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(tg.test(t))i=16,t=t.toLowerCase();else if(Q2.test(t))i=2;else if(eg.test(t))i=8;else throw Error(si+t);for(r=t.search(/p/i),r>0?(l=+t.slice(r+1),t=t.substring(2,r)):t=t.slice(2),r=t.indexOf("."),o=r>=0,n=e.constructor,o&&(t=t.replace(".",""),a=t.length,r=a-r,s=cc(n,new n(i),r,r*2)),h=Zn(t,i,Se),c=h.length-1,r=c;h[r]===0;--r)h.pop();return r<0?new n(e.s*0):(e.e=fr(h,c),e.d=h,st=!1,o&&(e=xt(e,s,a*4)),l&&(e=e.times(Math.abs(l)<54?$t(2,l):bi.pow(2,l))),st=!0,e)}function og(e,t){var i,n=t.d.length;if(n<3)return t.isZero()?t:qi(e,2,t,t);i=1.4*Math.sqrt(n),i=i>16?16:i|0,t=t.times(1/gr(5,i)),t=qi(e,2,t,t);for(var s,r=new e(5),o=new e(16),a=new e(20);i--;)s=t.times(t),t=t.times(r.plus(s.times(o.times(s).minus(a))));return t}function qi(e,t,i,n,s){var r,o,a,l,h=e.precision,c=Math.ceil(h/tt);for(st=!1,l=i.times(i),a=new e(n);;){if(o=xt(a.times(l),new e(t++*t++),h,1),a=s?n.plus(o):n.minus(o),n=xt(o.times(l),new e(t++*t++),h,1),o=a.plus(n),o.d[c]!==void 0){for(r=c;o.d[r]===a.d[r]&&r--;);if(r==-1)break}r=a,a=n,n=o,o=r}return st=!0,o.d.length=c+1,o}function gr(e,t){for(var i=e;--t;)i*=e;return i}function fc(e,t){var i,n=t.s<0,s=ye(e,e.precision,1),r=s.times(.5);if(t=t.abs(),t.lte(r))return Ie=n?4:1,t;if(i=t.divToInt(s),i.isZero())Ie=n?3:2;else{if(t=t.minus(i.times(s)),t.lte(r))return Ie=gl(i)?n?2:3:n?4:1,t;Ie=gl(i)?n?1:4:n?3:2}return t.minus(s).abs()}function ta(e,t,i,n){var s,r,o,a,l,h,c,u,d,f=e.constructor,p=i!==void 0;if(p?(oe(i,1,gi),n===void 0?n=f.rounding:oe(n,0,8)):(i=f.precision,n=f.rounding),!e.isFinite())c=dc(e);else{for(c=Re(e),o=c.indexOf("."),p?(s=2,t==16?i=i*4-3:t==8&&(i=i*3-2)):s=t,o>=0&&(c=c.replace(".",""),d=new f(1),d.e=c.length-o,d.d=Zn(Re(d),10,s),d.e=d.d.length),u=Zn(c,10,s),r=l=u.length;u[--l]==0;)u.pop();if(!u[0])c=p?"0p+0":"0";else{if(o<0?r--:(e=new f(e),e.d=u,e.e=r,e=xt(e,d,i,n,0,s),u=e.d,r=e.e,h=sc),o=u[i],a=s/2,h=h||u[i+1]!==void 0,h=n<4?(o!==void 0||h)&&(n===0||n===(e.s<0?3:2)):o>a||o===a&&(n===4||h||n===6&&u[i-1]&1||n===(e.s<0?8:7)),u.length=i,h)for(;++u[--i]>s-1;)u[i]=0,i||(++r,u.unshift(1));for(l=u.length;!u[l-1];--l);for(o=0,c="";o<l;o++)c+=lo.charAt(u[o]);if(p){if(l>1)if(t==16||t==8){for(o=t==16?4:3,--l;l%o;l++)c+="0";for(u=Zn(c,s,t),l=u.length;!u[l-1];--l);for(o=1,c="1.";o<l;o++)c+=lo.charAt(u[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(r<0?"p":"p+")+r}else if(r<0){for(;++r;)c="0"+c;c="0."+c}else if(++r>l)for(r-=l;r--;)c+="0";else r<l&&(c=c.slice(0,r)+"."+c.slice(r))}c=(t==16?"0x":t==2?"0b":t==8?"0o":"")+c}return e.s<0?"-"+c:c}function pl(e,t){if(e.length>t)return e.length=t,!0}function ag(e){return new this(e).abs()}function lg(e){return new this(e).acos()}function hg(e){return new this(e).acosh()}function cg(e,t){return new this(e).plus(t)}function ug(e){return new this(e).asin()}function dg(e){return new this(e).asinh()}function fg(e){return new this(e).atan()}function gg(e){return new this(e).atanh()}function pg(e,t){e=new this(e),t=new this(t);var i,n=this.precision,s=this.rounding,r=n+4;return!e.s||!t.s?i=new this(NaN):!e.d&&!t.d?(i=ye(this,r,1).times(t.s>0?.25:.75),i.s=e.s):!t.d||e.isZero()?(i=t.s<0?ye(this,n,s):new this(0),i.s=e.s):!e.d||t.isZero()?(i=ye(this,r,1).times(.5),i.s=e.s):t.s<0?(this.precision=r,this.rounding=1,i=this.atan(xt(e,t,r,1)),t=ye(this,r,1),this.precision=n,this.rounding=s,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(xt(e,t,r,1)),i}function mg(e){return new this(e).cbrt()}function _g(e){return X(e=new this(e),e.e+1,2)}function yg(e,t,i){return new this(e).clamp(t,i)}function vg(e){if(!e||typeof e!="object")throw Error(dr+"Object expected");var t,i,n,s=e.defaults===!0,r=["precision",1,gi,"rounding",0,8,"toExpNeg",-Di,0,"toExpPos",0,Di,"maxE",0,Di,"minE",-Di,0,"modulo",0,9];for(t=0;t<r.length;t+=3)if(i=r[t],s&&(this[i]=ho[i]),(n=e[i])!==void 0)if(Qt(n)===n&&n>=r[t+1]&&n<=r[t+2])this[i]=n;else throw Error(si+i+": "+n);if(i="crypto",s&&(this[i]=ho[i]),(n=e[i])!==void 0)if(n===!0||n===!1||n===0||n===1)if(n)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[i]=!0;else throw Error(oc);else this[i]=!1;else throw Error(si+i+": "+n);return this}function bg(e){return new this(e).cos()}function Sg(e){return new this(e).cosh()}function gc(e){var t,i,n;function s(r){var o,a,l,h=this;if(!(h instanceof s))return new s(r);if(h.constructor=s,ml(r)){h.s=r.s,st?!r.d||r.e>s.maxE?(h.e=NaN,h.d=null):r.e<s.minE?(h.e=0,h.d=[0]):(h.e=r.e,h.d=r.d.slice()):(h.e=r.e,h.d=r.d?r.d.slice():r.d);return}if(l=typeof r,l==="number"){if(r===0){h.s=1/r<0?-1:1,h.e=0,h.d=[0];return}if(r<0?(r=-r,h.s=-1):h.s=1,r===~~r&&r<1e7){for(o=0,a=r;a>=10;a/=10)o++;st?o>s.maxE?(h.e=NaN,h.d=null):o<s.minE?(h.e=0,h.d=[0]):(h.e=o,h.d=[r]):(h.e=o,h.d=[r]);return}else if(r*0!==0){r||(h.s=NaN),h.e=NaN,h.d=null;return}return fo(h,r.toString())}else if(l!=="string")throw Error(si+r);return(a=r.charCodeAt(0))===45?(r=r.slice(1),h.s=-1):(a===43&&(r=r.slice(1)),h.s=1),lc.test(r)?fo(h,r):rg(h,r)}if(s.prototype=k,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=vg,s.clone=gc,s.isDecimal=ml,s.abs=ag,s.acos=lg,s.acosh=hg,s.add=cg,s.asin=ug,s.asinh=dg,s.atan=fg,s.atanh=gg,s.atan2=pg,s.cbrt=mg,s.ceil=_g,s.clamp=yg,s.cos=bg,s.cosh=Sg,s.div=wg,s.exp=Cg,s.floor=xg,s.hypot=Pg,s.ln=Eg,s.log=Tg,s.log10=Mg,s.log2=Ag,s.max=Rg,s.min=Og,s.mod=Ng,s.mul=Fg,s.pow=kg,s.random=Lg,s.round=Dg,s.sign=Gg,s.sin=Ig,s.sinh=Ug,s.sqrt=Bg,s.sub=Vg,s.sum=$g,s.tan=Hg,s.tanh=zg,s.trunc=Wg,e===void 0&&(e={}),e&&e.defaults!==!0)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],t=0;t<n.length;)e.hasOwnProperty(i=n[t++])||(e[i]=this[i]);return s.config(e),s}function wg(e,t){return new this(e).div(t)}function Cg(e){return new this(e).exp()}function xg(e){return X(e=new this(e),e.e+1,3)}function Pg(){var e,t,i=new this(0);for(st=!1,e=0;e<arguments.length;)if(t=new this(arguments[e++]),t.d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return st=!0,new this(1/0);i=t}return st=!0,i.sqrt()}function ml(e){return e instanceof bi||e&&e.toStringTag===ac||!1}function Eg(e){return new this(e).ln()}function Tg(e,t){return new this(e).log(t)}function Ag(e){return new this(e).log(2)}function Mg(e){return new this(e).log(10)}function Rg(){return uc(this,arguments,"lt")}function Og(){return uc(this,arguments,"gt")}function Ng(e,t){return new this(e).mod(t)}function Fg(e,t){return new this(e).mul(t)}function kg(e,t){return new this(e).pow(t)}function Lg(e){var t,i,n,s,r=0,o=new this(1),a=[];if(e===void 0?e=this.precision:oe(e,1,gi),n=Math.ceil(e/tt),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));r<n;)s=t[r],s>=429e7?t[r]=crypto.getRandomValues(new Uint32Array(1))[0]:a[r++]=s%1e7;else if(crypto.randomBytes){for(t=crypto.randomBytes(n*=4);r<n;)s=t[r]+(t[r+1]<<8)+(t[r+2]<<16)+((t[r+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(t,r):(a.push(s%1e7),r+=4);r=n/4}else throw Error(oc);else for(;r<n;)a[r++]=Math.random()*1e7|0;for(n=a[--r],e%=tt,n&&e&&(s=$t(10,tt-e),a[r]=(n/s|0)*s);a[r]===0;r--)a.pop();if(r<0)i=0,a=[0];else{for(i=-1;a[0]===0;i-=tt)a.shift();for(n=1,s=a[0];s>=10;s/=10)n++;n<tt&&(i-=tt-n)}return o.e=i,o.d=a,o}function Dg(e){return X(e=new this(e),e.e+1,this.rounding)}function Gg(e){return e=new this(e),e.d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ig(e){return new this(e).sin()}function Ug(e){return new this(e).sinh()}function Bg(e){return new this(e).sqrt()}function Vg(e,t){return new this(e).sub(t)}function $g(){var e=0,t=arguments,i=new this(t[e]);for(st=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return st=!0,X(i,this.precision,this.rounding)}function Hg(e){return new this(e).tan()}function zg(e){return new this(e).tanh()}function Wg(e){return X(e=new this(e),e.e+1,1)}k[Symbol.for("nodejs.util.inspect.custom")]=k.toString;k[Symbol.toStringTag]="Decimal";var bi=k.constructor=gc(ho);ls=new bi(ls);hs=new bi(hs);class jg{constructor(t,i={}){K(this,"name","VisuPluginZoom");K(this,"isOpen",!1);K(this,"main");K(this,"workspace");K(this,"zoom",1);K(this,"zoomRadio",.1);K(this,"zoomRange",[.1,20]);K(this,"_handleWheel",this.handleWheel.bind(this));K(this,"_handleResize",this.handleResize.bind(this));this.stage=t,this.main=t.findOne(`#${wi.MAIN}`),this.workspace=t.findOne(`#${Ue.CANVAS}`),this.zoom=this.main.scaleX()}open(){this.isOpen||(this.isOpen=!0,this.stage.on("wheel",this._handleWheel),Jt.on("visu-resize",this._handleResize))}close(){this.isOpen&&(this.isOpen=!1,this.stage.off("wheel",this._handleWheel),Jt.off("visu-resize",this._handleResize))}handleResize({width:t,height:i}){this.autoZoom(t,i)}handleWheel(t){t.evt.deltaY<0?this.zoomIn():this.zoomOut()}viewportZoom(t){if(t<this.zoomRange[0]||t>this.zoomRange[1])return;const i={x:this.main.width()/2,y:this.main.height()/2},n={x:(i.x-this.main.x())/this.zoom,y:(i.y-this.main.y())/this.zoom},s={x:t,y:t};this.zoom=t,this.main.scale(s),this.main.position({x:i.x-n.x*t,y:i.y-n.y*t}),this.main.batchDraw(),Jt.emit("visu-zoom",{zoom:t})}zoomIn(){const t=Number(new bi(this.zoomRadio).plus(this.zoom));this.viewportZoom(t)}zoomOut(){const t=Number(new bi(-this.zoomRadio).plus(this.zoom));this.viewportZoom(t)}autoZoom(t,i){for(let n=this.zoomRange[1];n>=this.zoomRange[0];n=Number(new bi(n).sub(this.zoomRadio))){const s=this.workspace.width()*n*1.3,r=this.workspace.height()*n*1.3;if(s<t&&r<i){this.viewportZoom(n);break}}}}class Kg extends Ut.Group{constructor(i){const{width:n,height:s,size:r=24,backgroundColor:o="#f9fafb",lineColor:a="#cacaca",textColor:l="#888888",visible:h=!0}=i;super({name:"ruler",visible:h});K(this,"rulerSize");K(this,"backgroundColor");K(this,"lineColor");K(this,"textColor");K(this,"scaleLevels",[100,50,25,20,15,10,5,2,1]);K(this,"background");K(this,"lineH");K(this,"lineW");K(this,"cursor","");K(this,"ruler",new Ut.Group);K(this,"scales",new Ut.Group);K(this,"guidelines",new Ut.Group);K(this,"_handleMouseenter",this.handleMouseenter.bind(this));K(this,"_handleMouseleave",this.handleMouseleave.bind(this));K(this,"_handleMousedown",this.handleMousedown.bind(this));K(this,"_handleMousemove",this.handleMousemove.bind(this));K(this,"_handleMouseup",this.handleMouseup.bind(this));this.rulerSize=r,this.backgroundColor=o,this.lineColor=a,this.textColor=l,this.background=new Ut.Line({points:[0,0,0,s,this.rulerSize,s,this.rulerSize,this.rulerSize,n,this.rulerSize,n,0,0,0],closed:!0,fill:this.backgroundColor,shadowBlur:10,shadowColor:"#ddd"}),this.lineH=new Ut.Line({points:[0,this.rulerSize,n,this.rulerSize],stroke:this.lineColor,strokeWidth:1}),this.lineW=new Ut.Line({points:[this.rulerSize,0,this.rulerSize,s],stroke:this.lineColor,strokeWidth:1});const c=new Ut.Rect({x:0,y:0,width:this.rulerSize-1,height:this.rulerSize-1,fill:this.backgroundColor}),u=new Ut.Text({x:this.rulerSize/4,y:this.rulerSize/4,text:"px",fontSize:this.rulerSize/2,fill:this.textColor});this.ruler.add(this.guidelines,this.background,this.scales),this.add(this.ruler,c,this.lineH,this.lineW,u),this.bindEvent()}bindEvent(){this.ruler.on("mouseenter",this._handleMouseenter),this.ruler.on("mouseleave",this._handleMouseleave),this.ruler.on("mousedown",this._handleMousedown)}unBindEvent(){this.ruler.off("mouseenter",this._handleMouseenter),this.ruler.off("mouseleave",this._handleMouseleave),this.ruler.off("mousedown",this._handleMousedown)}render({position:i,zoom:n}){if(!this.parent)return;this.scales.removeChildren();const s=this.parent.width(),r=this.parent.height();this.background.setAttrs({points:[0,0,0,r,this.rulerSize,r,this.rulerSize,this.rulerSize,s,this.rulerSize,s,0,0,0]}),this.lineH.setAttrs({points:[0,this.rulerSize,s,this.rulerSize]}),this.lineW.setAttrs({points:[this.rulerSize,0,this.rulerSize,r]});const o=this.createScale("HORIZONTAL",{length:s,distance:i.x,zoom:n}),a=this.createScale("VERTICAL",{length:r,distance:i.y,zoom:n});this.scales.add(o,a),this.parent.draw()}createScale(i,n){const{length:s,distance:r,zoom:o}=n,a=new Ut.Group,l=i==="HORIZONTAL";let h=Math.floor(o/.5);h=Math.min(this.scaleLevels.length-1,h),h=Math.max(0,h);const c=this.scaleLevels[h];for(let u=this.rulerSize;u<s;u+=.1){const d=Math.floor((u-.1-r)/o),f=Math.floor((u-r)/o);if(d===f)continue;const p=f%(c*10)===0,m=f%c===0;if(p){const b=new Ut.Line({points:l?[u,this.rulerSize*.4,u,this.rulerSize]:[this.rulerSize*.4,u,this.rulerSize,u],stroke:this.lineColor,strokeWidth:1}),y=new Ut.Text({x:l?u+this.rulerSize*.25:this.rulerSize*.2,y:l?this.rulerSize*.2:u-this.rulerSize*.25,text:`${f}`,fontSize:this.rulerSize*.4,fill:this.textColor,rotation:l?0:-90});a.add(b,y)}else if(m){const b=new Ut.Line({points:l?[u,this.rulerSize*.7,u,this.rulerSize]:[this.rulerSize*.7,u,this.rulerSize,u],stroke:this.lineColor,strokeWidth:1});a.add(b)}}return a}handleMouseenter(i){const{offsetX:n,offsetY:s}=i.evt,r=this.getStage();this.cursor=r.container().style.cursor||"",n<this.rulerSize&&s>this.rulerSize?r.container().style.cursor="e-resize":n>this.rulerSize&&s<this.rulerSize&&(r.container().style.cursor="s-resize")}handleMouseleave(){this.getStage().container().style.cursor=this.cursor}handleMousedown(){this.ruler.off("mouseenter",this._handleMouseenter),this.ruler.off("mouseleave",this._handleMouseleave),document.addEventListener("mousemove",this._handleMousemove),document.addEventListener("mouseup",this._handleMouseup)}handleMousemove(){}handleMouseup(){this.getStage().container().style.cursor=this.cursor,document.removeEventListener("mousemove",this._handleMousemove),document.removeEventListener("mouseup",this._handleMouseup),this.ruler.on("mouseenter",this._handleMouseenter),this.ruler.on("mouseleave",this._handleMouseleave)}}class Yg{constructor(t,i={}){K(this,"name","VisuPluginRuler");K(this,"mainLayer");K(this,"staticLayer");K(this,"ruler");K(this,"isOpen",!1);K(this,"_handleVisuResize",this.handleVisuResize.bind(this));K(this,"_handleVisuDrag",this.handleVisuDrag.bind(this));K(this,"_handleVisuZoom",this.handleVisuZoom.bind(this));this.stage=t;const{size:n,backgroundColor:s,lineColor:r,textColor:o}=i;this.staticLayer=t.findOne(`#${wi.STATIC}`),this.mainLayer=t.findOne(`#${wi.MAIN}`),this.ruler=new Kg({width:this.stage.width(),height:this.stage.height(),size:n,backgroundColor:s,lineColor:r,textColor:o}),this.staticLayer.add(this.ruler)}get rulerRenderOptions(){const t=this.stage.findOne(`#${Ue.GROUP}`);return{zoom:this.mainLayer.scaleX(),position:t?t.absolutePosition():{x:0,y:0}}}open(){this.isOpen||(this.isOpen=!0,this.ruler.visible(!0),Jt.on("visu-resize",this._handleVisuResize),Jt.on("visu-drag",this._handleVisuDrag),Jt.on("visu-zoom",this._handleVisuZoom))}close(){this.isOpen&&(this.isOpen=!1,this.ruler.visible(!1),Jt.off("visu-resize",this._handleVisuResize),Jt.off("visu-drag",this._handleVisuDrag),Jt.off("visu-zoom",this._handleVisuZoom))}handleVisuResize(){this.ruler.render(this.rulerRenderOptions)}handleVisuDrag(){this.ruler.render(this.rulerRenderOptions)}handleVisuZoom(){this.ruler.render(this.rulerRenderOptions)}}class Xg extends Ut.Group{constructor(){super({id:Ue.GROUP,name:Ue.GROUP,clipX:0,clipY:0})}}class qg{constructor(t){K(this,"stage");K(this,"mainLayer");K(this,"staticLayer");K(this,"workspace");K(this,"plugins",new Map);const i=typeof t=="string"?document.querySelector(t):t;this.stage=new Ut.Stage({id:Sh,container:t,width:i==null?void 0:i.clientWidth,height:i==null?void 0:i.clientHeight}),this.mainLayer=new Ut.Layer({id:wi.MAIN}),this.staticLayer=new Ut.Layer({id:wi.STATIC}),this.workspace=new Xg,this.stage.add(this.mainLayer,this.staticLayer),this.mainLayer.add(this.workspace)}use(t,i){const n=new t(this.stage,i||{}),s=n.name;return this.plugins.get(s)||(this.plugins.set(s,n),n.open()),this}unuse(t){const i=this.plugins.get(t);return i&&(i.close(),this.plugins.delete(t)),this}destroy(){this.plugins.forEach(t=>t.close()),this.plugins.clear(),this.stage.destroy()}}function Zg(e){return Tl()?(Rc(e),!0):!1}function Jg(e){return typeof e=="function"?e():Bi(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Qg(e){var t;const i=Jg(e);return(t=i==null?void 0:i.$el)!=null?t:i}function t5(e){let t;jn(()=>Qg(e),d=>t=i(d)),Zg(()=>n());function i(d){if(d)return t&&n(),new qg(d).use(J2,{width:800,height:500}).use(Yu).use(ju).use(X2).use(jg).use(Yg)}function n(){t==null||t.destroy()}function s(d,f){return t==null?void 0:t.use(d,f)}function r(d){t==null||t.unuse(d)}function o(d){return t==null?void 0:t.plugins.get(d)}function a(){return t==null?void 0:t.stage.size()}function l(){return t==null?void 0:t.workspace.size()}function h(){return t==null?void 0:t.workspace.getAbsolutePosition()}function c(){return t==null?void 0:t.workspace.toJSON()}function u(){return t==null?void 0:t.mainLayer.toDataURL({x:0,y:0,width:t==null?void 0:t.stage.width(),height:t==null?void 0:t.stage.height()})}return No(()=>{n()}),{use:s,unuse:r,getPlugin:o,getStageSize:a,getCanvasSize:l,getCanvasPosition:h,toJson:c,getThumbnail:u}}const e5="https://github.com/zhengyuzi/visu-bench",i5={class:"w-full h-full flex flex-col"},n5={class:"h-64px border-b-2 flex justify-between items-center px-4"},s5=["href"],r5={class:"relative w-full h-[calc(100%-64px)] flex"},o5={class:"w-50px h-full border-r-2"},a5={class:"relative w-[calc(100%-350px)] h-full bg-stone-100"},l5={class:"relative w-300px border-l-2"},h5=ms({__name:"index",setup(e){return(t,i)=>(zi(),Do("div",i5,[ue("div",n5,[i[1]||(i[1]=ue("div",{class:"flex items-center space-x-4 select-none"},[ue("span",{class:"font-serif text-indigo-500 font-bold text-2xl"},"Visu Bench")],-1)),ue("div",null,[ue("a",{target:"_blank",href:Bi(e5),class:"cursor-pointer"},i[0]||(i[0]=[ue("i",{class:"i-mdi-github text-3xl"},null,-1)]),8,s5)])]),ue("div",r5,[ue("div",o5,[Wn(t.$slots,"toolbar")]),ue("div",a5,[Wn(t.$slots,"canvas")]),ue("div",l5,[Wn(t.$slots,"aside")])])]))}}),c5=ms({__name:"index",setup(e){const t=yn("visu");function i(o){n(o);const a=o.dataTransfer.files;if(a!=null&&a.length)for(const l of a){const h=URL.createObjectURL(l);s(h)}}function n(o){o.preventDefault(),o.stopPropagation()}function s(o){const a=t==null?void 0:t.getPlugin("VisuPluginWorkspace"),l=t==null?void 0:t.getCanvasSize(),h=new Image;h.onload=function(){const{width:c,height:u}=r(h.width,h.height,(l==null?void 0:l.width)||0,(l==null?void 0:l.height)||0),d={image:h,x:0,y:0,width:c,height:u},f=new Ut.Image(d);a==null||a.addNode(f)},h.src=o}function r(o,a,l,h){const c=o/a,u=l/h;if(c>u){const d=l/o;return{width:l,height:a*d}}else{const d=h/a;return{width:o*d,height:h}}}return(o,a)=>(zi(),Do("div",{class:"w-full h-full",onDragover:n,onDrop:i},[Wn(o.$slots,"default")],32))}}),u5={class:"w-screen h-screen overflow-hidden"},d5=ms({__name:"App",setup(e){const t=Sr(()=>Mr(()=>import("./index-VQoGUn-T.js"),[])),i=Sr(()=>Mr(()=>import("./index-DaqVckEH.js").then(o=>o.i),[])),n=Sr(()=>Mr(()=>import("./index-N1OXXR2j.js"),[])),s=zn(),r=t5(s);return Ql("visu",r),(o,a)=>(zi(),Do("div",u5,[Nt(h5,null,{canvas:dn(()=>[Nt(Bi(n)),Nt(c5,null,{default:dn(()=>[ue("div",{ref_key:"stageEl",ref:s,class:"w-full h-full"},null,512)]),_:1})]),toolbar:dn(()=>[Nt(Bi(t))]),aside:dn(()=>[Nt(Bi(i))]),_:1})]))}});window.addEventListener("vite:preloadError",()=>{window.location.reload()});Vu(d5).mount("#app");export{m5 as A,S5 as B,No as C,Ql as D,Tl as E,ge as F,Rc as G,mh as H,ii as I,Wi as J,v5 as K,wi as L,ru as M,Mc as N,Zc as O,y5 as P,Sr as Q,Yt as R,X2 as V,Ue as W,Mr as _,_5 as a,ue as b,Do as c,ms as d,Po as e,qr as f,Wn as g,Nt as h,yn as i,gu as j,y0 as k,yo as l,b5 as m,vo as n,zi as o,w5 as p,C5 as q,zn as r,Jt as s,p5 as t,Bi as u,jn as v,dn as w,l0 as x,ou as y,g5 as z};
